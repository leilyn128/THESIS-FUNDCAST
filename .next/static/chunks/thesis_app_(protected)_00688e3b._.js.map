{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/expenses/components/budgetUpload.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect} from \"react\";\r\n\r\nimport { forwardRef, useImperativeHandle, useRef, useState } from \"react\";\r\nimport * as XLSX from \"xlsx\";\r\nimport { supabase } from \"../../../../lib/supabaseClient\";\r\n\r\nconst BudgetUploadPage = forwardRef(function BudgetUploadPage(\r\n  { mode = \"form\", selectedYear, onSuccess }, // üëà ADD onSuccess\r\n  ref\r\n) {\r\n\r\n  const fileInputRef = useRef(null);\r\n\r\n  const [category, setCategory] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [amount, setAmount] = useState(\"\");\r\nconst [customCategory, setCustomCategory] = useState(\"\");\r\nconst [customDescription, setCustomDescription] = useState(\"\");\r\n\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    openFilePicker() {\r\n      fileInputRef.current?.click();\r\n    },\r\n  }));\r\nconst [previousCategories, setPreviousCategories] = useState([]);\r\nconst [previousDescriptions, setPreviousDescriptions] = useState([]);\r\n\r\nuseEffect(() => {\r\n  const loadCategories = async () => {\r\n    const { data, error } = await supabase\r\n      .from(\"budget_uploads\")\r\n      .select(\"category\")\r\n      .eq(\"year\", 2025);\r\n\r\n    if (!error && data) {\r\n      const unique = [...new Set(data.map(d => d.category))];\r\n      setPreviousCategories(unique);\r\n    }\r\n  };\r\n\r\n  loadCategories();\r\n}, []);\r\nuseEffect(() => {\r\n  if (!category || category === \"__new__\") {\r\n    setPreviousDescriptions([]);\r\n    return;\r\n  }\r\n\r\n  const loadDescriptions = async () => {\r\n    const { data, error } = await supabase\r\n      .from(\"budget_uploads\")\r\n      .select(\"description\")\r\n      .eq(\"year\", 2025)\r\n      .eq(\"category\", category);\r\n\r\n    if (!error && data) {\r\n      const unique = [...new Set(data.map(d => d.description))];\r\n      setPreviousDescriptions(unique);\r\n    }\r\n  };\r\n\r\n  loadDescriptions();\r\n}, [category]);\r\n\r\n  /* ================= FILE UPLOAD ================= */\r\n  const handleFile = async (file) => {\r\n    if (!file) return;\r\n\r\n    try {\r\n      let records = [];\r\n\r\n      if (file.name.endsWith(\".csv\")) {\r\n        const text = await file.text();\r\n        const rows = text.trim().split(/\\r?\\n/).slice(1);\r\n        records = rows.map((row) => {\r\n          const r = row.split(\",\");\r\n          return {\r\n            year: Number(r[0]),\r\n            category: r[1],\r\n            description: r[2],\r\n            amount: Number(r[3]),\r\n          };\r\n        });\r\n      }\r\n\r\n      if (file.name.endsWith(\".xlsx\")) {\r\n        const buffer = await file.arrayBuffer();\r\n        const wb = XLSX.read(buffer, { type: \"array\" });\r\n        const sheet = wb.Sheets[wb.SheetNames[0]];\r\n        const json = XLSX.utils.sheet_to_json(sheet, { defval: \"\" });\r\n\r\n        records = json.map((row) => ({\r\n  year: selectedYear, // ‚úÖ FORCE DASHBOARD YEAR\r\n  category: row.category,\r\n  description: row.description,\r\n  amount: Number(row.amount),\r\n}));\r\n\r\n      }\r\n\r\n      await supabase\r\n        .from(\"budget_uploads\")\r\n        .upsert(records, { onConflict: \"year,category,description\" });\r\nonSuccess?.(); \r\n      alert(`‚úÖ Uploaded ${records.length} rows`);\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"‚ùå Upload failed\");\r\n    }\r\n  };\r\n\r\n  const handleManualSubmit = async () => {\r\n  const finalCategory =\r\n    category === \"__new__\" ? customCategory.trim() : category;\r\n\r\n  const finalDescription =\r\n    description === \"__new__\"\r\n      ? customDescription.trim()\r\n      : description;\r\n\r\n  if (!finalCategory || !finalDescription || !amount) {\r\n    alert(\"‚ùå Please complete all fields.\");\r\n    return;\r\n  }\r\n\r\n  if (finalCategory === \"__new__\" || finalDescription === \"__new__\") {\r\n    alert(\"‚ùå Invalid category or description.\");\r\n    return;\r\n  }\r\n\r\n  const record = {\r\n    year: selectedYear,\r\n    category: finalCategory,        // ‚úÖ CORRECT VALUE\r\n    description: finalDescription,  // ‚úÖ CORRECT VALUE\r\n    amount: Number(amount),\r\n  };\r\n\r\n  const { error } = await supabase\r\n    .from(\"budget_uploads\")\r\n    .upsert(record, {\r\n      onConflict: \"year,category,description\",\r\n    });\r\n\r\n  if (error) {\r\n    console.error(error);\r\n    alert(\"‚ùå Failed to save record\");\r\n    return;\r\n  }\r\n\r\n  alert(\"‚úÖ Budget item saved\");\r\n\r\n  setCategory(\"\");\r\n  setCustomCategory(\"\");\r\n  setDescription(\"\");\r\n  setCustomDescription(\"\");\r\n  setAmount(\"\");\r\n\r\n  onSuccess?.();\r\n};\r\n\r\n  return (\r\n    <>\r\n      {/* ALWAYS RENDER FILE INPUT (INVISIBLE) */}\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept=\".csv,.xlsx\"\r\n        className=\"hidden\"\r\n        onChange={(e) => handleFile(e.target.files?.[0])}\r\n      />\r\n\r\n {mode === \"form\" && (\r\n  <div className=\"space-y-4\">\r\n\r\n    {/* CATEGORY */}\r\n<div>\r\n  <label className=\"text-xs font-medium text-slate-600\">Category</label>\r\n\r\n  <select\r\n    value={category}\r\n    onChange={(e) => {\r\n      setCategory(e.target.value);\r\n      if (e.target.value !== \"__new__\") {\r\n        setCustomCategory(\"\");\r\n      }\r\n    }}\r\n    className=\"border rounded px-3 py-2 text-sm w-full\"\r\n  >\r\n    <option value=\"\">Select Category</option>\r\n\r\n    {previousCategories.map((c) => (\r\n      <option key={c} value={c}>\r\n        {c}\r\n      </option>\r\n    ))}\r\n\r\n    <option value=\"__new__\">‚ûï Add new category</option>\r\n  </select>\r\n\r\n  {category === \"__new__\" && (\r\n    <input\r\n      type=\"text\"\r\n      placeholder=\"Enter new category\"\r\n      value={customCategory}\r\n      onChange={(e) => setCustomCategory(e.target.value)}\r\n      className=\"border rounded px-3 py-2 text-sm w-full mt-1\"\r\n    />\r\n  )}\r\n</div>\r\n\r\n\r\n    {/* DESCRIPTION */}\r\n    <div>\r\n      <label className=\"text-xs font-medium text-slate-600\">Description</label>\r\n\r\n      {previousDescriptions.length > 0 && (\r\n        <select\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n          className=\"border rounded px-3 py-2 text-sm w-full\"\r\n        >\r\n          <option value=\"\">Select Description</option>\r\n\r\n          {previousDescriptions.map((d) => (\r\n            <option key={d} value={d}>{d}</option>\r\n          ))}\r\n\r\n          <option value=\"__new__\">‚ûï Add new description</option>\r\n        </select>\r\n      )}\r\n\r\n      {(description === \"__new__\" || previousDescriptions.length === 0) && (\r\n        <input\r\n  type=\"text\"\r\n  placeholder=\"Enter description\"\r\n  value={customDescription}\r\n  onChange={(e) => setCustomDescription(e.target.value)}\r\n  className=\"border rounded px-3 py-2 text-sm w-full mt-1\"\r\n/>\r\n\r\n      )}\r\n    </div>\r\n\r\n    {/* AMOUNT */}\r\n    <div>\r\n      <label className=\"text-xs font-medium text-slate-600\">Amount</label>\r\n      <input\r\n        type=\"number\"\r\n        value={amount}\r\n        onChange={(e) => setAmount(e.target.value)}\r\n        placeholder=\"Amount\"\r\n        className=\"border rounded px-3 py-2 text-sm w-full\"\r\n      />\r\n    </div>\r\n\r\n    <div className=\"flex justify-end\">\r\n      <button\r\n        onClick={handleManualSubmit}\r\n        className=\"bg-emerald-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-emerald-700\"\r\n      >\r\n        üíæ Save Budget Item\r\n      </button>\r\n    </div>\r\n\r\n  </div>\r\n)}\r\n\r\n    </>\r\n  );\r\n});\r\n\r\nexport default BudgetUploadPage;\r\n"],"names":[],"mappings":";;;;;AAEA;AAGA;AACA;;;AANA;;;;;AAQA,MAAM,iCAAmB,GAAA,IAAA,qLAAU,UAAC,SAAS,iBAC3C,KAA0C,EAC1C,GAAG;QADH,EAAE,OAAO,MAAM,EAAE,YAAY,EAAE,SAAS,EAAE,GAA1C;;IAIA,MAAM,eAAe,IAAA,iLAAM,EAAC;IAE5B,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,mLAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,mLAAQ,EAAC;IAC/C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,mLAAQ,EAAC;IACvC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,mLAAQ,EAAC;IACrD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,mLAAQ,EAAC;IAGzD,IAAA,8LAAmB,EAAC;iEAAK,IAAM,CAAC;gBAC9B;wBACE;qBAAA,wBAAA,aAAa,OAAO,cAApB,4CAAA,sBAAsB,KAAK;gBAC7B;YACF,CAAC;;IACH,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,mLAAQ,EAAC,EAAE;IAC/D,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,mLAAQ,EAAC,EAAE;IAEnE,IAAA,oLAAS;uDAAC;YACR,MAAM;8EAAiB;oBACrB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACnC,IAAI,CAAC,kBACL,MAAM,CAAC,YACP,EAAE,CAAC,QAAQ;oBAEd,IAAI,CAAC,SAAS,MAAM;wBAClB,MAAM,SAAS;+BAAI,IAAI,IAAI,KAAK,GAAG;8FAAC,CAAA,IAAK,EAAE,QAAQ;;yBAAG;wBACtD,sBAAsB;oBACxB;gBACF;;YAEA;QACF;sDAAG,EAAE;IACL,IAAA,oLAAS;uDAAC;YACR,IAAI,CAAC,YAAY,aAAa,WAAW;gBACvC,wBAAwB,EAAE;gBAC1B;YACF;YAEA,MAAM;gFAAmB;oBACvB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACnC,IAAI,CAAC,kBACL,MAAM,CAAC,eACP,EAAE,CAAC,QAAQ,MACX,EAAE,CAAC,YAAY;oBAElB,IAAI,CAAC,SAAS,MAAM;wBAClB,MAAM,SAAS;+BAAI,IAAI,IAAI,KAAK,GAAG;gGAAC,CAAA,IAAK,EAAE,WAAW;;yBAAG;wBACzD,wBAAwB;oBAC1B;gBACF;;YAEA;QACF;sDAAG;QAAC;KAAS;IAEX,mDAAmD,GACnD,MAAM,aAAa,OAAO;QACxB,IAAI,CAAC,MAAM;QAEX,IAAI;YACF,IAAI,UAAU,EAAE;YAEhB,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS;gBAC9B,MAAM,OAAO,MAAM,KAAK,IAAI;gBAC5B,MAAM,OAAO,KAAK,IAAI,GAAG,KAAK,CAAC,SAAS,KAAK,CAAC;gBAC9C,UAAU,KAAK,GAAG,CAAC,CAAC;oBAClB,MAAM,IAAI,IAAI,KAAK,CAAC;oBACpB,OAAO;wBACL,MAAM,OAAO,CAAC,CAAC,EAAE;wBACjB,UAAU,CAAC,CAAC,EAAE;wBACd,aAAa,CAAC,CAAC,EAAE;wBACjB,QAAQ,OAAO,CAAC,CAAC,EAAE;oBACrB;gBACF;YACF;YAEA,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,UAAU;gBAC/B,MAAM,SAAS,MAAM,KAAK,WAAW;gBACrC,MAAM,KAAK,kJAAS,CAAC,QAAQ;oBAAE,MAAM;gBAAQ;gBAC7C,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,UAAU,CAAC,EAAE,CAAC;gBACzC,MAAM,OAAO,mJAAU,CAAC,aAAa,CAAC,OAAO;oBAAE,QAAQ;gBAAG;gBAE1D,UAAU,KAAK,GAAG,CAAC,CAAC,MAAQ,CAAC;wBACnC,MAAM;wBACN,UAAU,IAAI,QAAQ;wBACtB,aAAa,IAAI,WAAW;wBAC5B,QAAQ,OAAO,IAAI,MAAM;oBAC3B,CAAC;YAEK;YAEA,MAAM,8IAAQ,CACX,IAAI,CAAC,kBACL,MAAM,CAAC,SAAS;gBAAE,YAAY;YAA4B;YACnE,sBAAA,gCAAA;YACM,MAAM,AAAC,cAA4B,OAAf,QAAQ,MAAM,EAAC;QACrC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACR;IACF;IAEA,MAAM,qBAAqB;QAC3B,MAAM,gBACJ,aAAa,YAAY,eAAe,IAAI,KAAK;QAEnD,MAAM,mBACJ,gBAAgB,YACZ,kBAAkB,IAAI,KACtB;QAEN,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,QAAQ;YAClD,MAAM;YACN;QACF;QAEA,IAAI,kBAAkB,aAAa,qBAAqB,WAAW;YACjE,MAAM;YACN;QACF;QAEA,MAAM,SAAS;YACb,MAAM;YACN,UAAU;YACV,aAAa;YACb,QAAQ,OAAO;QACjB;QAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CAC7B,IAAI,CAAC,kBACL,MAAM,CAAC,QAAQ;YACd,YAAY;QACd;QAEF,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC;YACd,MAAM;YACN;QACF;QAEA,MAAM;QAEN,YAAY;QACZ,kBAAkB;QAClB,eAAe;QACf,qBAAqB;QACrB,UAAU;QAEV,sBAAA,gCAAA;IACF;IAEE,qBACE;;0BAEE,uMAAC;gBACC,KAAK;gBACL,MAAK;gBACL,QAAO;gBACP,WAAU;gBACV,UAAU,CAAC;wBAAiB;2BAAX,YAAW,kBAAA,EAAE,MAAM,CAAC,KAAK,cAAd,sCAAA,eAAgB,CAAC,EAAE;;;;;;;YAGrD,SAAS,wBACT,uMAAC;gBAAI,WAAU;;kCAGjB,uMAAC;;0CACC,uMAAC;gCAAM,WAAU;0CAAqC;;;;;;0CAEtD,uMAAC;gCACC,OAAO;gCACP,UAAU,CAAC;oCACT,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC1B,IAAI,EAAE,MAAM,CAAC,KAAK,KAAK,WAAW;wCAChC,kBAAkB;oCACpB;gCACF;gCACA,WAAU;;kDAEV,uMAAC;wCAAO,OAAM;kDAAG;;;;;;oCAEhB,mBAAmB,GAAG,CAAC,CAAC,kBACvB,uMAAC;4CAAe,OAAO;sDACpB;2CADU;;;;;kDAKf,uMAAC;wCAAO,OAAM;kDAAU;;;;;;;;;;;;4BAGzB,aAAa,2BACZ,uMAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;gCACjD,WAAU;;;;;;;;;;;;kCAOZ,uMAAC;;0CACC,uMAAC;gCAAM,WAAU;0CAAqC;;;;;;4BAErD,qBAAqB,MAAM,GAAG,mBAC7B,uMAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,WAAU;;kDAEV,uMAAC;wCAAO,OAAM;kDAAG;;;;;;oCAEhB,qBAAqB,GAAG,CAAC,CAAC,kBACzB,uMAAC;4CAAe,OAAO;sDAAI;2CAAd;;;;;kDAGf,uMAAC;wCAAO,OAAM;kDAAU;;;;;;;;;;;;4BAI3B,CAAC,gBAAgB,aAAa,qBAAqB,MAAM,KAAK,CAAC,mBAC9D,uMAAC;gCACP,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,qBAAqB,EAAE,MAAM,CAAC,KAAK;gCACpD,WAAU;;;;;;;;;;;;kCAOR,uMAAC;;0CACC,uMAAC;gCAAM,WAAU;0CAAqC;;;;;;0CACtD,uMAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gCACzC,aAAY;gCACZ,WAAU;;;;;;;;;;;;kCAId,uMAAC;wBAAI,WAAU;kCACb,cAAA,uMAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;AAUP;;uCAEe","debugId":null}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/expensePieChart.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nconst expenseCOLORS = [\r\n  \"#ef4444\", \"#f97316\", \"#eab308\", \"#84cc16\", \"#22c55e\",\r\n  \"#0ea5e9\", \"#6366f1\", \"#a855f7\", \"#ec4899\", \"#14b8a6\"\r\n];\r\n\r\n// --- COA-COMPLIANT EXPENSE CATEGORIZER ---\r\nexport function categorizeExpense(description = \"\") {\r\n  const t = description.toLowerCase();\r\n\r\n  if (\r\n    t.includes(\"hon.\") ||\r\n    t.includes(\"honor\") ||\r\n    t.includes(\"appointed\") ||\r\n    t.includes(\"elected\") ||\r\n    t.includes(\"tanod\") ||\r\n    t.includes(\"bhw\") ||\r\n    t.includes(\"chief\")\r\n  ) return \"PS (Personal Services)\";\r\n\r\n  if (t.includes(\"sk\")) return \"10% SK Fund\";\r\n\r\n  if (\r\n    t.includes(\"fire\") ||\r\n    t.includes(\"safety drill\") ||\r\n    t.includes(\"disaster\") ||\r\n    t.includes(\"rescue\") ||\r\n    t.includes(\"drrm\")\r\n  ) return \"5% BDRRM Fund\";\r\n\r\n  if (\r\n    t.includes(\"women\") ||\r\n    t.includes(\"senior\") ||\r\n    t.includes(\"pwd\") ||\r\n    t.includes(\"nutrition\") ||\r\n    t.includes(\"feeding\") ||\r\n    t.includes(\"deworm\") ||\r\n    t.includes(\"gap\")\r\n  ) return \"GAD Programs\";\r\n\r\n  if (\r\n    t.includes(\"construction\") ||\r\n    t.includes(\"improvement\") ||\r\n    t.includes(\"materials\") ||\r\n    t.includes(\"solar\") ||\r\n    t.includes(\"equipment\") ||\r\n    t.includes(\"road\") ||\r\n    t.includes(\"building\") ||\r\n    t.includes(\"water system\") ||\r\n    t.includes(\"rehab\")\r\n  ) return \"20% BDF / Capital Outlay\";\r\n\r\n  if (\r\n    t.includes(\"travel\") ||\r\n    t.includes(\"seminar\") ||\r\n    t.includes(\"training\") ||\r\n    t.includes(\"supplies\") ||\r\n    t.includes(\"office\") ||\r\n    t.includes(\"water\") ||\r\n    t.includes(\"electric\") ||\r\n    t.includes(\"bond\") ||\r\n    t.includes(\"security\") ||\r\n    t.includes(\"bookkeeper\") ||\r\n    t.includes(\"lumber\") ||\r\n    t.includes(\"fuel\") ||\r\n    t.includes(\"diesel\") ||\r\n    t.includes(\"registration\") ||\r\n    t.includes(\"check book\") ||\r\n    t.includes(\"maintenance\") ||\r\n    t.includes(\"interest\") ||\r\n    t.includes(\"tax\") ||\r\n    t.includes(\"pcf\")\r\n  ) return \"MOOE\";\r\n\r\n  return \"Other / Non-Office\";\r\n}\r\n\r\nexport default function ExpensePieChart({ transactions }) {\r\n  const expenseTx = transactions.filter(t => t.withdrawal > 0);\r\n\r\n  // =========================\r\n  // GROUP EXPENSES\r\n  // =========================\r\n  const grouped = {};\r\n  expenseTx.forEach(t => {\r\n    const category = categorizeExpense(t.description || \"\");\r\n    grouped[category] = (grouped[category] || 0) + Number(t.withdrawal);\r\n  });\r\n\r\n  // =========================\r\n  // BUILD STABLE CHART DATA\r\n  // =========================\r\n  const chartData = Object.entries(grouped).map(\r\n    ([name, value]) => ({ name, value })\r\n  );\r\n\r\n  // =========================\r\n  // STABLE COLOR MAP (KEY FIX)\r\n  // =========================\r\n  const colorMap = {};\r\n  chartData.forEach((item, index) => {\r\n    colorMap[item.name] =\r\n      expenseCOLORS[index % expenseCOLORS.length];\r\n  });\r\n\r\n  return (\r\n<div className=\"w-full flex flex-col items-center gap-8\">\r\n      {/* PIE */}\r\n      <div className=\"w-[260px]\">\r\n        <ResponsiveContainer width=\"100%\" aspect={1}>\r\n          <PieChart>\r\n            <Pie\r\n              data={chartData}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              outerRadius=\"80%\"\r\n              dataKey=\"value\"\r\n              label={false}\r\n              labelLine={false}\r\n            >\r\n              {chartData.map((item) => (\r\n                <Cell\r\n                  key={item.name}\r\n                  fill={colorMap[item.name]}\r\n                />\r\n              ))}\r\n            </Pie>\r\n\r\n            <Tooltip />\r\n          </PieChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n     {/* CUSTOM LEGEND */}\r\n<div className=\"mt-4 w-full max-w-xs space-y-2 flex flex-col items-start text-left\">\r\n  {chartData.map((item) => (\r\n    <div\r\n      key={item.name}\r\n      className=\"flex items-center gap-2 text-m\"\r\n    >\r\n      <span\r\n        className=\"w-3 h-3 rounded-sm\"\r\n        style={{ backgroundColor: colorMap[item.name] }}\r\n      />\r\n      <span className=\"text-gray-700\">\r\n        {item.name}\r\n      </span>\r\n    </div>\r\n  ))}\r\n</div>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/expenses/components/BudgetSummaryCards.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo, useMemo, useState } from \"react\";\r\n\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nconst BudgetCard = memo(function BudgetCard({\r\n  category,\r\n  allocated,\r\n  isOpen,\r\n  onToggle,\r\n  items,\r\n  onSubcategoryClick,\r\n  selectedSubcategory,\r\n}) {\r\n  const formattedAmount = useMemo(\r\n    () => `‚Ç±${allocated.toLocaleString()}`,\r\n    [allocated]\r\n  );\r\n  \r\n\r\n  // Group items by description/subcategory for clickable sections\r\n  const groupedItems = useMemo(() => {\r\n    const groups = {};\r\n    items?.forEach((item) => {\r\n      const key = item.description || \"Uncategorized\";\r\n      if (!groups[key]) {\r\n        groups[key] = {\r\n          name: key,\r\n          items: [],\r\n          total: 0,\r\n        };\r\n      }\r\n      groups[key].items.push(item);\r\n      groups[key].total += Number(item.amount) || 0;\r\n    });\r\n    return Object.values(groups);\r\n  }, [items]);\r\n\r\n  // Calculate allocation percentage for progress bar\r\n  const progressPercentage = useMemo(() => {\r\n    if (!items || items.length === 0) return 0;\r\n    return Math.min((items.length / 15) * 100, 100);\r\n  }, [items]);\r\n\r\n  return (\r\n    <div\r\n      className={`relative rounded-xl border border-slate-200 bg-white transition-all duration-300\r\n        ${isOpen \r\n          ? \"shadow-lg ring-1 ring-slate-100\" \r\n          : \"shadow-sm hover:shadow-md hover:border-slate-300\"\r\n        }\r\n      `}\r\n    >\r\n      {/* STATUS INDICATOR */}\r\n      <div className=\"absolute right-4 top-4\">\r\n        <span className=\"inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-0.5 text-xs font-medium text-emerald-700\">\r\n          {items?.length || 0} Items\r\n        </span>\r\n      </div>\r\n\r\n      {/* HEADER */}\r\n      <div className=\"p-6\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <div className=\"flex-1\">\r\n            {/* CATEGORY HEADER */}\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <div className=\"h-10 w-10 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center\">\r\n                <span className=\"text-white text-lg font-bold\">\r\n                  {category.charAt(0)}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-slate-900\">\r\n                  {category}\r\n                </h3>\r\n                <p className=\"text-sm text-slate-500\">\r\n                  {items?.length || 0} allocation entries\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* AMOUNT AND STATS */}\r\n            <div className=\"flex items-end justify-between\">\r\n              <div>\r\n                <p className=\"text-2xl font-bold text-slate-900\">\r\n                  {formattedAmount}\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"text-right\">\r\n                <div className=\"text-xs font-medium text-slate-500 mb-2\">\r\n                  Utilization\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"h-2 w-32 rounded-full bg-slate-100 overflow-hidden\">\r\n                    <div \r\n                      className=\"h-full rounded-full bg-gradient-to-r from-emerald-400 to-teal-400 transition-all duration-700\"\r\n                      style={{ width: `${progressPercentage}%` }}\r\n                    />\r\n                  </div>\r\n                  <span className=\"text-sm font-semibold text-slate-700\">\r\n                    {Math.round(progressPercentage)}%\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ACTION BUTTON */}\r\n        <div className=\"mt-6 pt-6 border-t border-slate-100\">\r\n          <button\r\n            onClick={onToggle}\r\n            className={`w-full flex items-center justify-center gap-2 rounded-lg px-4 py-3 text-sm font-medium transition-all\r\n              ${isOpen\r\n                ? \"bg-slate-50 text-slate-700 border border-slate-200\"\r\n                : \"bg-emerald-50 text-emerald-700 hover:bg-emerald-100\"\r\n              }\r\n            `}\r\n          >\r\n            {isOpen ? (\r\n              <>\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 15l7-7 7 7\" />\r\n                </svg>\r\n                Hide Breakdown\r\n              </>\r\n            ) : (\r\n              <>\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                </svg>\r\n                View Breakdown\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* DETAILS PANEL */}\r\n      {isOpen && (\r\n        <div className=\"border-t border-slate-100 animate-fadeIn\">\r\n          <div className=\"p-6\">\r\n            {/* SECTION HEADER */}\r\n            \r\n\r\n            {/* SUBCATEGORIES */}\r\n            <div className=\"space-y-4\">\r\n              {groupedItems.length > 0 ? (\r\n                groupedItems.map((group, groupIndex) => (\r\n                  <div\r\n                    key={groupIndex}\r\n                    className={`group cursor-pointer rounded-lg border transition-all duration-200 hover:shadow-md\r\n                      ${selectedSubcategory === group.name\r\n                        ? \"border-emerald-300 bg-emerald-50\"\r\n                        : \"border-slate-200 hover:border-slate-300\"\r\n                      }\r\n                    `}\r\n                    onClick={() => onSubcategoryClick?.(group.name)}\r\n                  >\r\n                    <div className=\"p-4\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <div className={`h-2 w-2 rounded-full transition-colors\r\n                            ${selectedSubcategory === group.name\r\n                              ? \"bg-emerald-500\"\r\n                              : \"bg-slate-300 group-hover:bg-slate-400\"\r\n                            }\r\n                          `} />\r\n                          <div>\r\n                            <h5 className={`font-medium transition-colors\r\n                              ${selectedSubcategory === group.name\r\n                                ? \"text-emerald-700\"\r\n                                : \"text-slate-700 group-hover:text-slate-900\"\r\n                              }\r\n                            `}>\r\n                              {group.name}\r\n                            </h5>\r\n                            <p className=\"text-xs text-slate-500 mt-1\">\r\n                              {group.items.length} entries\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <p className={`text-sm font-semibold transition-colors\r\n                            ${selectedSubcategory === group.name\r\n                              ? \"text-emerald-700\"\r\n                              : \"text-slate-900\"\r\n                            }\r\n                          `}>\r\n                            ‚Ç±{group.total.toLocaleString()}\r\n                          </p>\r\n                          <p className=\"text-xs text-slate-500 mt-1\">\r\n                            {((group.total / allocated) * 100).toFixed(1)}% of total\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* EXPANDED VIEW FOR SELECTED SUBCATEGORY */}\r\n                      {selectedSubcategory === group.name && (\r\n                        <div className=\"mt-4 pt-4 border-t border-emerald-100 animate-fadeIn\">\r\n                          <div className=\"space-y-3\">\r\n                            <div className=\"flex items-center justify-between text-xs text-slate-500\">\r\n                              <span>Item Details</span>\r\n                              <span>Amount</span>\r\n                            </div>\r\n                            {group.items.map((item, itemIndex) => (\r\n                              <div\r\n                                key={itemIndex}\r\n                                className=\"flex items-center justify-between p-3 rounded-lg bg-white border border-slate-100\"\r\n                              >\r\n                                <div className=\"flex items-center gap-3\">\r\n                                  <div className=\"h-6 w-6 rounded-md bg-slate-50 flex items-center justify-center\">\r\n                                    <span className=\"text-xs font-medium text-slate-500\">\r\n                                      {itemIndex + 1}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div>\r\n                                    <p className=\"text-sm font-medium text-slate-700\">\r\n                                      {item.description || \"No description\"}\r\n                                    </p>\r\n                                    {item.year && (\r\n                                      <p className=\"text-xs text-slate-400 mt-1\">\r\n                                        FY {item.year}\r\n                                      </p>\r\n                                    )}\r\n                                  </div>\r\n                                </div>\r\n                                <span className=\"text-sm font-semibold text-slate-900\">\r\n                                  ‚Ç±{Number(item.amount).toLocaleString()}\r\n                                </span>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <div className=\"text-center py-8 rounded-lg border-2 border-dashed border-slate-200\">\r\n                  <div className=\"mx-auto h-12 w-12 rounded-full bg-slate-100 flex items-center justify-center mb-3\">\r\n                    <span className=\"text-slate-400\">üìÑ</span>\r\n                  </div>\r\n                  <p className=\"text-sm font-medium text-slate-500\">\r\n                    No allocation details available\r\n                  </p>\r\n                  <p className=\"text-xs text-slate-400 mt-1\">\r\n                    Add budget items to see breakdown\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* SUMMARY FOOTER */}\r\n            {groupedItems.length > 0 && (\r\n              <div className=\"mt-6 pt-6 border-t border-slate-100\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"text-sm text-slate-600\">\r\n                    <span className=\"font-medium\">Total Items:</span> {items.length}\r\n                  </div>\r\n                  <button className=\"text-sm font-medium text-emerald-600 hover:text-emerald-700\">\r\n                    Export Breakdown ‚Üí\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\n// Add custom animations\r\nconst style = document.createElement('style');\r\nstyle.textContent = `\r\n  @keyframes fadeIn {\r\n    from { opacity: 0; transform: translateY(-8px); }\r\n    to { opacity: 1; transform: translateY(0); }\r\n  }\r\n  .animate-fadeIn {\r\n    animation: fadeIn 0.3s ease-out;\r\n  }\r\n`;\r\ndocument.head.appendChild(style);\r\n\r\nexport default BudgetCard;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1163, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/expenses/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useMemo } from \"react\";\r\n\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { supabase } from \"../../../lib/supabaseClient\";\r\nimport BudgetUploadPage from \"../expenses/components/budgetUpload\";\r\nimport { categorizeExpense } from \"../dashboard/components/expensePieChart\";\r\nimport BudgetSummaryCards from \"./components/BudgetSummaryCards\";\r\n\r\n/* =========================\r\n   CATEGORY NORMALIZER\r\n========================= */\r\nfunction normalizeCategory(cat = \"\") {\r\n  const t = cat.toLowerCase();\r\n\r\n  if (t.includes(\"personal\")) return \"Personal Services\";\r\n  if (t.includes(\"mooe\")) return \"MOOE\";\r\n  if (t.includes(\"20\") || t.includes(\"bdf\")) return \"20% BDF\";\r\n  if (t.includes(\"gadr\") || t.includes(\"gad\")) return \"15% GAD\";\r\n  if (t.includes(\"bdr\")) return \"5% BDRRMF\";\r\n  if (t.includes(\"sk\")) return \"10% SK Fund\";\r\n  if (t.includes(\"senior\")) return \"1% Senior & PWD\";\r\n\r\n  return cat.trim();\r\n}\r\n\r\nexport default function ExpensesPage() {\r\n  /* =========================\r\n     YEAR\r\n  ========================= */\r\n const searchParams = useSearchParams();\r\nconst selectedYear = Number(searchParams.get(\"year\")) || 2025;\r\n\r\n  /* =========================\r\n     UI STATE (UNCHANGED)\r\n  ========================= */\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n  const [showManualModal, setShowManualModal] = useState(false);\r\n  const [expandedCategory, setExpandedCategory] = useState(null);\r\n  const [refreshKey, setRefreshKey] = useState(0);\r\nconst [selectedCategory, setSelectedCategory] = useState(null);\r\nconst [selectedSubcategory, setSelectedSubcategory] = useState(null);\r\n\r\n  /* =========================\r\n     DATA STATE\r\n  ========================= */\r\n  const [budgetRows, setBudgetRows] = useState([]);\r\n  const [transactions, setTransactions] = useState([]);\r\n\r\n  /* =========================\r\n     FETCH BUDGETS\r\n  ========================= */\r\n  const fetchBudgets = async () => {\r\n    const { data, error } = await supabase\r\n      .from(\"budget_uploads\")\r\n      .select(\"id, year, category, description, amount\")\r\n      .or(`year.eq.${selectedYear},year.eq.${String(selectedYear)}`);\r\n\r\n    \r\n    setBudgetRows(data || []);\r\n  };\r\n\r\n  /* =========================\r\n     FETCH TRANSACTIONS\r\n  ========================= */\r\n  const fetchTransactions = async () => {\r\n  const start = `${selectedYear}-01-01`;\r\n  const end = `${selectedYear}-12-31`;\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"transactions\")\r\n    .select(\"id, description, withdrawal, date\")\r\n    .gte(\"date\", start)\r\n    .lte(\"date\", end);\r\n\r\n  if (error) {\r\n    console.error(\"Transaction fetch error:\", error.message);\r\n    return;\r\n  }\r\n\r\n  setTransactions(data || []);\r\n};\r\n\r\n  /* =========================\r\n     INITIAL LOAD\r\n  ========================= */\r\n useEffect(() => {\r\n  fetchBudgets();\r\n  fetchTransactions();\r\n}, [selectedYear, refreshKey]);\r\n\r\n\r\n  /* =========================\r\n     GROUP BUDGETS\r\n  ========================= */\r\nconst groupedBudgets = useMemo(() => {\r\n  const map = {};\r\n\r\n  budgetRows.forEach((r) => {\r\n    const cat = normalizeCategory(r.category);\r\n\r\n    if (!map[cat]) {\r\n      map[cat] = {\r\n        category: cat,\r\n        allocated: 0,\r\n        items: [],\r\n      };\r\n    }\r\n\r\n    map[cat].allocated += Number(r.amount) || 0;\r\n    map[cat].items.push(r);\r\n  });\r\n\r\n  return Object.values(map).sort(\r\n    (a, b) => b.allocated - a.allocated\r\n  );\r\n}, [budgetRows]);\r\n\r\n\r\n  /* =========================\r\n     GROUP EXPENSES\r\n  ========================= */\r\n  const expensesByCategory = useMemo(() => {\r\n    const map = {};\r\n\r\n    transactions.forEach((t) => {\r\n      if (!t.withdrawal || t.withdrawal <= 0) return;\r\n\r\n      const raw = categorizeExpense(t.description || \"\");\r\n      if (!raw) return;\r\n\r\n      const cat = normalizeCategory(raw);\r\n\r\n      if (!map[cat]) map[cat] = 0;\r\n      map[cat] += Number(t.withdrawal);\r\n    });\r\n\r\n    return map;\r\n  }, [transactions]);\r\n\r\n  const expensesBySubcategory = useMemo(() => {\r\n  const map = {};\r\n\r\n  transactions.forEach((t) => {\r\n    if (!t.withdrawal || t.withdrawal <= 0) return;\r\n\r\n    const desc = t.description?.trim();\r\n    if (!desc) return;\r\n\r\n    if (!map[desc]) map[desc] = 0;\r\n    map[desc] += Number(t.withdrawal);\r\n  });\r\n\r\n  return map;\r\n}, [transactions]);\r\n  /* =========================\r\n     COMPARISON DATA (FOR CHART)\r\n  ========================= */\r\n  const comparisonData = useMemo(() => {\r\n    return groupedBudgets.map((b) => ({\r\n      category: b.category,\r\n      allocated: b.allocated,\r\n      spent: expensesByCategory[b.category] || 0,\r\n    }));\r\n  }, [groupedBudgets, expensesByCategory]);\r\n\r\n\r\n/* =========================\r\n     UI\r\n  ========================= */\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50 \">\r\n      {/* HEADER */}\r\n      <div className=\"rounded-2xl bg-gradient-to-r from-emerald-700 to-emerald-800 px-8 py-4 text-white shadow-lg\">\r\n        <div className=\"mb-2 flex items-center justify-between\">\r\n          <div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"rounded-xl bg-white/10 p-2 backdrop-blur-sm\">\r\n                <span className=\"text-xl\">üìä</span>\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold tracking-tight\">\r\n                  Budget Allocation Dashboard\r\n                </h1>\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => setShowUploadModal(true)}\r\n              className=\"flex items-center gap-2 rounded-xl bg-white px-5 py-3 font-semibold text-emerald-700 shadow-lg transition-all hover:scale-[1.02] hover:shadow-xl\"\r\n            >\r\n              <span className=\"text-lg\">üì§</span>\r\n              <span>Upload File</span>\r\n            </button>\r\n            <button\r\n              onClick={() => setShowManualModal(true)}\r\n              className=\"flex items-center gap-2 rounded-xl bg-emerald-500 px-5 py-3 font-semibold text-white shadow-lg transition-all hover:scale-[1.02] hover:bg-emerald-600 hover:shadow-xl\"\r\n            >\r\n              <span className=\"text-lg\">‚ûï</span>\r\n              <span>Add Budget</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        \r\n        </div>\r\n      {/* MODALS */}\r\n      {showUploadModal && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm\">\r\n          <div className=\"mx-4 w-full max-w-lg rounded-2xl bg-white shadow-2xl\">\r\n            <div className=\"flex items-center justify-between border-b p-6\">\r\n              <div>\r\n                <h2 className=\"text-xl font-bold text-slate-800\">Upload Budget File</h2>\r\n                <p className=\"text-sm text-slate-500\">Upload CSV or Excel files for bulk import</p>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowUploadModal(false)}\r\n                className=\"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600\"\r\n              >\r\n                <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            <div className=\"p-6\">\r\n              <BudgetUploadPage\r\n                mode=\"picker\"\r\n                selectedYear={selectedYear}\r\n                onSuccess={() => {\r\n                  fetchBudgets();\r\n                  setRefreshKey((k) => k + 1);\r\n                  setShowUploadModal(false);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showManualModal && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm\">\r\n          <div className=\"mx-4 w-full max-w-4xl rounded-2xl bg-white shadow-2xl\">\r\n            <div className=\"flex items-center justify-between border-b p-6\">\r\n              <div>\r\n                <h2 className=\"text-xl font-bold text-slate-800\">Add Budget Entry</h2>\r\n                <p className=\"text-sm text-slate-500\">Manually add a new budget allocation</p>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowManualModal(false)}\r\n                className=\"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600\"\r\n              >\r\n                <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            <div className=\"p-6\">\r\n              <BudgetUploadPage\r\n                mode=\"form\"\r\n                selectedYear={selectedYear}\r\n                onSuccess={() => {\r\n                  fetchBudgets();\r\n                  setRefreshKey((k) => k + 1);\r\n                  setShowManualModal(false);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* CONTENT */}\r\n      <div className=\"mt-8\">\r\n        <div className=\"mb-6 flex items-center justify-between\">\r\n          <div>\r\n          </div>\r\n          <div className=\"text-sm text-slate-500\">\r\n            Showing {groupedBudgets.length} categories\r\n          </div>\r\n        </div>\r\n\r\n        {/* BUDGET CARDS GRID */}\r\n        {groupedBudgets.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3\">\r\n            {groupedBudgets.map((g) => {\r\n              const isOpen = expandedCategory === g.category;\r\n              return (\r\n                  <BudgetSummaryCards                 \r\n                  key={g.category}\r\n                  category={g.category}\r\n                  allocated={g.allocated}\r\n                  expensesByCategory={expensesByCategory}\r\n                    expensesBySubcategory={expensesBySubcategory}\r\n                  isOpen={isOpen}\r\n                  onToggle={() => setExpandedCategory(isOpen ? null : g.category)}\r\n                  items={g.items}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        ) : (\r\n          <div className=\"rounded-2xl border-2 border-dashed border-slate-200 bg-white p-12 text-center\">\r\n            <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-slate-100\">\r\n              <span className=\"text-2xl\">üìä</span>\r\n            </div>\r\n            <h3 className=\"mb-2 text-lg font-semibold text-slate-700\">No Budget Data</h3>\r\n            <p className=\"mb-6 text-slate-500\">Get started by uploading a file or adding a budget manually</p>\r\n            <div className=\"flex justify-center gap-3\">\r\n              <button\r\n                onClick={() => setShowUploadModal(true)}\r\n                className=\"rounded-lg bg-emerald-50 px-4 py-2 text-sm font-medium text-emerald-700 hover:bg-emerald-100\"\r\n              >\r\n                Upload File\r\n              </button>\r\n              <button\r\n                onClick={() => setShowManualModal(true)}\r\n                className=\"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-700\"\r\n              >\r\n                Add Budget\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        \r\n            \r\n        \r\n    \r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;AAUA;;0BAE0B,GAC1B,SAAS;QAAkB,MAAA,iEAAM;IAC/B,MAAM,IAAI,IAAI,WAAW;IAEzB,IAAI,EAAE,QAAQ,CAAC,aAAa,OAAO;IACnC,IAAI,EAAE,QAAQ,CAAC,SAAS,OAAO;IAC/B,IAAI,EAAE,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,QAAQ,OAAO;IAClD,IAAI,EAAE,QAAQ,CAAC,WAAW,EAAE,QAAQ,CAAC,QAAQ,OAAO;IACpD,IAAI,EAAE,QAAQ,CAAC,QAAQ,OAAO;IAC9B,IAAI,EAAE,QAAQ,CAAC,OAAO,OAAO;IAC7B,IAAI,EAAE,QAAQ,CAAC,WAAW,OAAO;IAEjC,OAAO,IAAI,IAAI;AACjB;AAEe,SAAS;;IACtB;;4BAE0B,GAC3B,MAAM,eAAe,IAAA,kKAAe;IACrC,MAAM,eAAe,OAAO,aAAa,GAAG,CAAC,YAAY;IAEvD;;4BAE0B,GAC1B,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,mLAAQ,EAAC;IACvD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,mLAAQ,EAAC;IACvD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,mLAAQ,EAAC;IACzD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,mLAAQ,EAAC;IAC/C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,mLAAQ,EAAC;IACzD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,mLAAQ,EAAC;IAE7D;;4BAE0B,GAC1B,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,mLAAQ,EAAC,EAAE;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,mLAAQ,EAAC,EAAE;IAEnD;;4BAE0B,GAC1B,MAAM,eAAe;QACnB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACnC,IAAI,CAAC,kBACL,MAAM,CAAC,2CACP,EAAE,CAAC,AAAC,WAAkC,OAAxB,cAAa,aAAgC,OAArB,OAAO;QAGhD,cAAc,QAAQ,EAAE;IAC1B;IAEA;;4BAE0B,GAC1B,MAAM,oBAAoB;QAC1B,MAAM,QAAQ,AAAC,GAAe,OAAb,cAAa;QAC9B,MAAM,MAAM,AAAC,GAAe,OAAb,cAAa;QAE5B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACnC,IAAI,CAAC,gBACL,MAAM,CAAC,qCACP,GAAG,CAAC,QAAQ,OACZ,GAAG,CAAC,QAAQ;QAEf,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,4BAA4B,MAAM,OAAO;YACvD;QACF;QAEA,gBAAgB,QAAQ,EAAE;IAC5B;IAEE;;4BAE0B,GAC3B,IAAA,oLAAS;kCAAC;YACT;YACA;QACF;iCAAG;QAAC;QAAc;KAAW;IAG3B;;4BAE0B,GAC5B,MAAM,iBAAiB,IAAA,kLAAO;gDAAC;YAC7B,MAAM,MAAM,CAAC;YAEb,WAAW,OAAO;wDAAC,CAAC;oBAClB,MAAM,MAAM,kBAAkB,EAAE,QAAQ;oBAExC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;wBACb,GAAG,CAAC,IAAI,GAAG;4BACT,UAAU;4BACV,WAAW;4BACX,OAAO,EAAE;wBACX;oBACF;oBAEA,GAAG,CAAC,IAAI,CAAC,SAAS,IAAI,OAAO,EAAE,MAAM,KAAK;oBAC1C,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;gBACtB;;YAEA,OAAO,OAAO,MAAM,CAAC,KAAK,IAAI;wDAC5B,CAAC,GAAG,IAAM,EAAE,SAAS,GAAG,EAAE,SAAS;;QAEvC;+CAAG;QAAC;KAAW;IAGb;;4BAE0B,GAC1B,MAAM,qBAAqB,IAAA,kLAAO;oDAAC;YACjC,MAAM,MAAM,CAAC;YAEb,aAAa,OAAO;4DAAC,CAAC;oBACpB,IAAI,CAAC,EAAE,UAAU,IAAI,EAAE,UAAU,IAAI,GAAG;oBAExC,MAAM,MAAM,IAAA,qMAAiB,EAAC,EAAE,WAAW,IAAI;oBAC/C,IAAI,CAAC,KAAK;oBAEV,MAAM,MAAM,kBAAkB;oBAE9B,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,GAAG;oBAC1B,GAAG,CAAC,IAAI,IAAI,OAAO,EAAE,UAAU;gBACjC;;YAEA,OAAO;QACT;mDAAG;QAAC;KAAa;IAEjB,MAAM,wBAAwB,IAAA,kLAAO;uDAAC;YACtC,MAAM,MAAM,CAAC;YAEb,aAAa,OAAO;+DAAC,CAAC;wBAGP;oBAFb,IAAI,CAAC,EAAE,UAAU,IAAI,EAAE,UAAU,IAAI,GAAG;oBAExC,MAAM,QAAO,iBAAA,EAAE,WAAW,cAAb,qCAAA,eAAe,IAAI;oBAChC,IAAI,CAAC,MAAM;oBAEX,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,GAAG;oBAC5B,GAAG,CAAC,KAAK,IAAI,OAAO,EAAE,UAAU;gBAClC;;YAEA,OAAO;QACT;sDAAG;QAAC;KAAa;IACf;;4BAE0B,GAC1B,MAAM,iBAAiB,IAAA,kLAAO;gDAAC;YAC7B,OAAO,eAAe,GAAG;wDAAC,CAAC,IAAM,CAAC;wBAChC,UAAU,EAAE,QAAQ;wBACpB,WAAW,EAAE,SAAS;wBACtB,OAAO,kBAAkB,CAAC,EAAE,QAAQ,CAAC,IAAI;oBAC3C,CAAC;;QACH;+CAAG;QAAC;QAAgB;KAAmB;IAGzC;;4BAE4B,GAC1B,qBACE,uMAAC;QAAI,WAAU;;0BAEb,uMAAC;gBAAI,WAAU;0BACb,cAAA,uMAAC;oBAAI,WAAU;;sCACb,uMAAC;sCACC,cAAA,uMAAC;gCAAI,WAAU;;kDACb,uMAAC;wCAAI,WAAU;kDACb,cAAA,uMAAC;4CAAK,WAAU;sDAAU;;;;;;;;;;;kDAE5B,uMAAC;kDACC,cAAA,uMAAC;4CAAG,WAAU;sDAAoC;;;;;;;;;;;;;;;;;;;;;;sCAQxD,uMAAC;4BAAI,WAAU;;8CACb,uMAAC;oCACC,SAAS,IAAM,mBAAmB;oCAClC,WAAU;;sDAEV,uMAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,uMAAC;sDAAK;;;;;;;;;;;;8CAER,uMAAC;oCACC,SAAS,IAAM,mBAAmB;oCAClC,WAAU;;sDAEV,uMAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,uMAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQb,iCACC,uMAAC;gBAAI,WAAU;0BACb,cAAA,uMAAC;oBAAI,WAAU;;sCACb,uMAAC;4BAAI,WAAU;;8CACb,uMAAC;;sDACC,uMAAC;4CAAG,WAAU;sDAAmC;;;;;;sDACjD,uMAAC;4CAAE,WAAU;sDAAyB;;;;;;;;;;;;8CAExC,uMAAC;oCACC,SAAS,IAAM,mBAAmB;oCAClC,WAAU;8CAEV,cAAA,uMAAC;wCAAI,WAAU;wCAAU,MAAK;wCAAO,QAAO;wCAAe,SAAQ;kDACjE,cAAA,uMAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;sCAI3E,uMAAC;4BAAI,WAAU;sCACb,cAAA,uMAAC,uLAAgB;gCACf,MAAK;gCACL,cAAc;gCACd,WAAW;oCACT;oCACA,cAAc,CAAC,IAAM,IAAI;oCACzB,mBAAmB;gCACrB;;;;;;;;;;;;;;;;;;;;;;YAOT,iCACC,uMAAC;gBAAI,WAAU;0BACb,cAAA,uMAAC;oBAAI,WAAU;;sCACb,uMAAC;4BAAI,WAAU;;8CACb,uMAAC;;sDACC,uMAAC;4CAAG,WAAU;sDAAmC;;;;;;sDACjD,uMAAC;4CAAE,WAAU;sDAAyB;;;;;;;;;;;;8CAExC,uMAAC;oCACC,SAAS,IAAM,mBAAmB;oCAClC,WAAU;8CAEV,cAAA,uMAAC;wCAAI,WAAU;wCAAU,MAAK;wCAAO,QAAO;wCAAe,SAAQ;kDACjE,cAAA,uMAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;sCAI3E,uMAAC;4BAAI,WAAU;sCACb,cAAA,uMAAC,uLAAgB;gCACf,MAAK;gCACL,cAAc;gCACd,WAAW;oCACT;oCACA,cAAc,CAAC,IAAM,IAAI;oCACzB,mBAAmB;gCACrB;;;;;;;;;;;;;;;;;;;;;;0BAQV,uMAAC;gBAAI,WAAU;;kCACb,uMAAC;wBAAI,WAAU;;0CACb,uMAAC;;;;;0CAED,uMAAC;gCAAI,WAAU;;oCAAyB;oCAC7B,eAAe,MAAM;oCAAC;;;;;;;;;;;;;oBAKlC,eAAe,MAAM,GAAG,kBACvB,uMAAC;wBAAI,WAAU;kCACZ,eAAe,GAAG,CAAC,CAAC;4BACnB,MAAM,SAAS,qBAAqB,EAAE,QAAQ;4BAC9C,qBACI,uMAAC,6LAAkB;gCAEnB,UAAU,EAAE,QAAQ;gCACpB,WAAW,EAAE,SAAS;gCACtB,oBAAoB;gCAClB,uBAAuB;gCACzB,QAAQ;gCACR,UAAU,IAAM,oBAAoB,SAAS,OAAO,EAAE,QAAQ;gCAC9D,OAAO,EAAE,KAAK;+BAPT,EAAE,QAAQ;;;;;wBAUrB;;;;;6CAGF,uMAAC;wBAAI,WAAU;;0CACb,uMAAC;gCAAI,WAAU;0CACb,cAAA,uMAAC;oCAAK,WAAU;8CAAW;;;;;;;;;;;0CAE7B,uMAAC;gCAAG,WAAU;0CAA4C;;;;;;0CAC1D,uMAAC;gCAAE,WAAU;0CAAsB;;;;;;0CACnC,uMAAC;gCAAI,WAAU;;kDACb,uMAAC;wCACC,SAAS,IAAM,mBAAmB;wCAClC,WAAU;kDACX;;;;;;kDAGD,uMAAC;wCACC,SAAS,IAAM,mBAAmB;wCAClC,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcf;GApTwB;;QAIF,kKAAe;;;KAJb","debugId":null}}]
}