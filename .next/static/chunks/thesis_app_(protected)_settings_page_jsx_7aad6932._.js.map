{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/settings/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"../../../lib/supabaseClient\";\r\n\r\nexport default function SettingsPage() {\r\n  const [oldPassword, setOldPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\nconst [userEmail, setUserEmail] = useState(\"\");\r\n\r\n  const handleChangePassword = async (e) => {\r\n    e.preventDefault();\r\n    setMessage(\"\");\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      setMessage(\"❌ New passwords do not match.\");\r\n      return;\r\n    }\r\n\r\n    if (newPassword.length < 8) {\r\n      setMessage(\"❌ Password must be at least 8 characters.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const {\r\n        data: { user },\r\n      } = await supabase.auth.getUser();\r\n\r\n      if (!user?.email) throw new Error(\"User not found.\");\r\n\r\n      // Re-authenticate\r\n      const { error: signInError } =\r\n        await supabase.auth.signInWithPassword({\r\n          email: user.email,\r\n          password: oldPassword,\r\n        });\r\n\r\n      if (signInError) throw new Error(\"Current password is incorrect.\");\r\n\r\n      // Update password\r\n      const { error } = await supabase.auth.updateUser({\r\n        password: newPassword,\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      setMessage(\"✅ Password updated successfully.\");\r\n      setOldPassword(\"\");\r\n      setNewPassword(\"\");\r\n      setConfirmPassword(\"\");\r\n    } catch (err) {\r\n      setMessage(\"❌ \" + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n  const fetchUser = async () => {\r\n    const { data } = await supabase.auth.getUser();\r\n    if (data?.user?.email) {\r\n      setUserEmail(data.user.email);\r\n    }\r\n  };\r\n\r\n  fetchUser();\r\n}, []);\r\n\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      {/* ================= HEADER ================= */}\r\n      <div className=\"w-full rounded-xl bg-gradient-to-r from-emerald-900 to-emerald-700 px-8 py-6 mb-8 flex items-center gap-3\">\r\n        <span className=\"text-white text-xl\">⚙️</span>\r\n        <h1 className=\"text-xl font-semibold text-white\">\r\n          Account Settings\r\n        </h1>\r\n      </div>\r\n\r\n      {/* ================= CONTENT ================= */}\r\n<div className=\"max-w-6xl mx-auto\">\r\n  {/* HEADER */}\r\n  \r\n  <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n    {/* ---------- ACCOUNT INFORMATION ---------- */}\r\n    <div className=\"rounded-2xl bg-gradient-to-br from-emerald-700 to-emerald-800 border border-emerald-600 shadow-sm p-7\">\r\n  <div className=\"flex items-center justify-between mb-8\">\r\n        <div>\r\n          <h2 className=\"text-lg font-semibold text-white\">\r\n  Account Information\r\n</h2>\r\n          \r\n\r\n          <p className=\"text-slate-100 text-sm mt-1\">Your personal and role details</p>\r\n        </div>\r\n        <div className=\"w-10 h-10 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n          <svg className=\"w-5 h-5 text-emerald-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <label className=\"block text-slate-200 mb-1 font-medium\">\r\n  Email\r\n</label>\r\n\r\n          <div className=\"relative\">\r\n            <input\r\n  readOnly\r\n  value={userEmail}\r\n  className=\"w-full rounded-lg bg-white/90 border border-white/30\r\n    px-4 py-2 text-slate-900\"\r\n/>\r\n\r\n            <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\r\n              <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div>\r\n          <label className=\"block text-slate-200 mb-1 font-medium\">\r\n              Role\r\n            </label>\r\n            <div className=\"rounded-xl border border-gray-200 bg-gray-50 px-4 py-3.5\">\r\n              <span className=\"text-gray-900\">Barangay Treasurer</span>\r\n            </div>\r\n          </div>\r\n\r\n                  </div>\r\n\r\n        <div>\r\n          <label className=\"block text-slate-200 mb-1 font-medium\">\r\n            Barangay\r\n          </label>\r\n          <div className=\"relative\">\r\n            <input\r\n              readOnly\r\n              value=\"Barangay Danahao, Clarin, Bohol\"\r\n              className=\"w-full rounded-xl border border-gray-200 bg-gray-50 px-4 py-3.5 text-gray-900 cursor-default\"\r\n            />\r\n            <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\r\n              <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    {/* ---------- CHANGE PASSWORD ---------- */}\r\n   <div className=\"bg-white rounded-2xl border border-slate-200 shadow-sm p-7\">\r\n  <div className=\"flex items-center justify-between mb-8\">\r\n    <div>\r\n      <h2 className=\"text-xl font-semibold text-slate-900\">\r\n        Change Password\r\n      </h2>\r\n      <p className=\"text-slate-500 text-sm mt-1\">\r\n        Update your password for enhanced security\r\n      </p>\r\n    </div>\r\n\r\n    <div className=\"w-10 h-10 rounded-lg bg-emerald-50 flex items-center justify-center\">\r\n      <svg\r\n        className=\"w-5 h-5 text-emerald-600\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        viewBox=\"0 0 24 24\"\r\n      >\r\n        <path\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth={2}\r\n          d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"\r\n        />\r\n      </svg>\r\n    </div>\r\n  </div>\r\n\r\n  <form onSubmit={handleChangePassword} className=\"space-y-6\">\r\n    {/* CURRENT PASSWORD */}\r\n    <div>\r\n      <label className=\"block text-lgfont-medium text-slate-700 mb-2\">\r\n        Current Password\r\n      </label>\r\n      <input\r\n        type=\"password\"\r\n        value={oldPassword}\r\n        onChange={(e) => setOldPassword(e.target.value)}\r\n        required\r\n        className=\"w-full rounded-xl border border-slate-300 px-4 py-3.5\r\n          text-slate-900 bg-white\r\n          focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\r\n          transition\"\r\n        placeholder=\"Enter current password\"\r\n      />\r\n    </div>\r\n\r\n    {/* NEW PASSWORD */}\r\n    <div>\r\n      <label className=\"block text-sm font-medium text-slate-700 mb-2\">\r\n        New Password\r\n      </label>\r\n      <input\r\n        type=\"password\"\r\n        value={newPassword}\r\n        onChange={(e) => setNewPassword(e.target.value)}\r\n        required\r\n        className=\"w-full rounded-xl border border-slate-300 px-4 py-3.5\r\n          text-slate-900 bg-white\r\n          focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\r\n          transition\"\r\n        placeholder=\"Enter new password\"\r\n      />\r\n    </div>\r\n\r\n    {/* CONFIRM PASSWORD */}\r\n    <div>\r\n      <label className=\"block text-sm font-medium text-slate-700 mb-2\">\r\n        Confirm New Password\r\n      </label>\r\n      <input\r\n        type=\"password\"\r\n        value={confirmPassword}\r\n        onChange={(e) => setConfirmPassword(e.target.value)}\r\n        required\r\n        className=\"w-full rounded-xl border border-slate-300 px-4 py-3.5\r\n          text-slate-900 bg-white\r\n          focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\r\n          transition\"\r\n        placeholder=\"Confirm new password\"\r\n      />\r\n    </div>\r\n\r\n    {/* MESSAGE */}\r\n    {message && (\r\n      <div\r\n        className={`p-4 rounded-xl border ${\r\n          message.startsWith(\"✅\")\r\n            ? \"bg-emerald-50 border-emerald-200 text-emerald-800\"\r\n            : \"bg-red-50 border-red-200 text-red-800\"\r\n        }`}\r\n      >\r\n        {message}\r\n      </div>\r\n    )}\r\n\r\n    {/* BUTTON */}\r\n    <button\r\n      type=\"submit\"\r\n      disabled={loading}\r\n      className=\"w-full rounded-xl bg-emerald-600 px-6 py-3.5\r\n        text-white font-medium\r\n        hover:bg-emerald-700\r\n        focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2\r\n        transition disabled:opacity-50\"\r\n    >\r\n      {loading ? \"Updating...\" : \"Update Password\"}\r\n    </button>\r\n\r\n    {/* FOOTER NOTE */}\r\n    <p className=\"text-sm text-slate-500 border-t border-slate-200 pt-5\">\r\n      Use at least 8 characters with a mix of letters, numbers, and symbols.\r\n    </p>\r\n  </form>\r\n</div>\r\n</div> </div> </div> ); }"],"names":[],"mappings":"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","debugId":null}}]
}