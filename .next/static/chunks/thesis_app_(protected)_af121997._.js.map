{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/expensePieChart.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nconst expenseCOLORS = [\r\n  \"#ef4444\", \"#f97316\", \"#eab308\", \"#84cc16\", \"#22c55e\",\r\n  \"#0ea5e9\", \"#6366f1\", \"#a855f7\", \"#ec4899\", \"#14b8a6\"\r\n];\r\n\r\n// --- COA-COMPLIANT EXPENSE CATEGORIZER ---\r\nexport function categorizeExpense(description = \"\") {\r\n  const t = description.toLowerCase();\r\n\r\n  if (\r\n    t.includes(\"hon.\") ||\r\n    t.includes(\"honor\") ||\r\n    t.includes(\"appointed\") ||\r\n    t.includes(\"elected\") ||\r\n    t.includes(\"tanod\") ||\r\n    t.includes(\"bhw\") ||\r\n    t.includes(\"chief\")\r\n  ) return \"PS (Personal Services)\";\r\n\r\n  if (t.includes(\"sk\")) return \"10% SK Fund\";\r\n\r\n  if (\r\n    t.includes(\"fire\") ||\r\n    t.includes(\"safety drill\") ||\r\n    t.includes(\"disaster\") ||\r\n    t.includes(\"rescue\") ||\r\n    t.includes(\"drrm\")\r\n  ) return \"5% BDRRM Fund\";\r\n\r\n  if (\r\n    t.includes(\"women\") ||\r\n    t.includes(\"senior\") ||\r\n    t.includes(\"pwd\") ||\r\n    t.includes(\"nutrition\") ||\r\n    t.includes(\"feeding\") ||\r\n    t.includes(\"deworm\") ||\r\n    t.includes(\"gap\")\r\n  ) return \"GAD Programs\";\r\n\r\n  if (\r\n    t.includes(\"construction\") ||\r\n    t.includes(\"improvement\") ||\r\n    t.includes(\"materials\") ||\r\n    t.includes(\"solar\") ||\r\n    t.includes(\"equipment\") ||\r\n    t.includes(\"road\") ||\r\n    t.includes(\"building\") ||\r\n    t.includes(\"water system\") ||\r\n    t.includes(\"rehab\")\r\n  ) return \"20% BDF / Capital Outlay\";\r\n\r\n  if (\r\n    t.includes(\"travel\") ||\r\n    t.includes(\"seminar\") ||\r\n    t.includes(\"training\") ||\r\n    t.includes(\"supplies\") ||\r\n    t.includes(\"office\") ||\r\n    t.includes(\"water\") ||\r\n    t.includes(\"electric\") ||\r\n    t.includes(\"bond\") ||\r\n    t.includes(\"security\") ||\r\n    t.includes(\"bookkeeper\") ||\r\n    t.includes(\"lumber\") ||\r\n    t.includes(\"fuel\") ||\r\n    t.includes(\"diesel\") ||\r\n    t.includes(\"registration\") ||\r\n    t.includes(\"check book\") ||\r\n    t.includes(\"maintenance\") ||\r\n    t.includes(\"interest\") ||\r\n    t.includes(\"tax\") ||\r\n    t.includes(\"pcf\")\r\n  ) return \"MOOE\";\r\n\r\n  return \"Other / Non-Office\";\r\n}\r\n\r\nexport default function ExpensePieChart({ transactions }) {\r\n  const expenseTx = transactions.filter(t => t.withdrawal > 0);\r\n\r\n  // =========================\r\n  // GROUP EXPENSES\r\n  // =========================\r\n  const grouped = {};\r\n  expenseTx.forEach(t => {\r\n    const category = categorizeExpense(t.description || \"\");\r\n    grouped[category] = (grouped[category] || 0) + Number(t.withdrawal);\r\n  });\r\n\r\n  // =========================\r\n  // BUILD STABLE CHART DATA\r\n  // =========================\r\n  const chartData = Object.entries(grouped).map(\r\n    ([name, value]) => ({ name, value })\r\n  );\r\n\r\n  // =========================\r\n  // STABLE COLOR MAP (KEY FIX)\r\n  // =========================\r\n  const colorMap = {};\r\n  chartData.forEach((item, index) => {\r\n    colorMap[item.name] =\r\n      expenseCOLORS[index % expenseCOLORS.length];\r\n  });\r\n\r\n  return (\r\n<div className=\"w-full flex flex-col items-center gap-8\">\r\n      {/* PIE */}\r\n      <div className=\"w-[260px]\">\r\n        <ResponsiveContainer width=\"100%\" aspect={1}>\r\n          <PieChart>\r\n            <Pie\r\n              data={chartData}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              outerRadius=\"80%\"\r\n              dataKey=\"value\"\r\n              label={false}\r\n              labelLine={false}\r\n            >\r\n              {chartData.map((item) => (\r\n                <Cell\r\n                  key={item.name}\r\n                  fill={colorMap[item.name]}\r\n                />\r\n              ))}\r\n            </Pie>\r\n\r\n            <Tooltip />\r\n          </PieChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n     {/* CUSTOM LEGEND */}\r\n<div className=\"mt-4 w-full max-w-xs space-y-2 flex flex-col items-start text-left\">\r\n  {chartData.map((item) => (\r\n    <div\r\n      key={item.name}\r\n      className=\"flex items-center gap-2 text-m\"\r\n    >\r\n      <span\r\n        className=\"w-3 h-3 rounded-sm\"\r\n        style={{ backgroundColor: colorMap[item.name] }}\r\n      />\r\n      <span className=\"text-gray-700\">\r\n        {item.name}\r\n      </span>\r\n    </div>\r\n  ))}\r\n</div>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/lib/useBudgetData.js"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\nimport { supabase } from \"../../../../lib/supabaseClient\"\r\n\r\nexport default function useBudgetData() {\r\n  const [budgetData, setBudgetData] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  async function fetchBudgetData() {\r\n    setLoading(true)\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"yearly_budget\")\r\n      .select(\"year,total_income\")\r\n      .order(\"year\", { ascending: true })\r\n\r\n    setLoading(false)\r\n    if (error) return console.error(error)\r\n\r\n    setBudgetData(\r\n      data.map(d => ({\r\n        year: Number(d.year),\r\n        totalIncome: Number(d.total_income)\r\n      }))\r\n    )\r\n  }\r\n\r\n  return { budgetData, loading, fetchBudgetData }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;AAFA;;;AAIe,SAAS;;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,mLAAQ,EAAC,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,mLAAQ,EAAC;IAEvC,eAAe;QACb,WAAW;QAEX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,qBACP,KAAK,CAAC,QAAQ;YAAE,WAAW;QAAK;QAEnC,WAAW;QACX,IAAI,OAAO,OAAO,QAAQ,KAAK,CAAC;QAEhC,cACE,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;gBACb,MAAM,OAAO,EAAE,IAAI;gBACnB,aAAa,OAAO,EAAE,YAAY;YACpC,CAAC;IAEL;IAEA,OAAO;QAAE;QAAY;QAAS;IAAgB;AAChD;GAxBwB","debugId":null}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/lib/useBreakdownData.js"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\nimport { supabase } from \"../../../../lib/supabaseClient\"\r\n\r\nexport default function useBreakdownData() {\r\n  const [breakdownData, setBreakdownData] = useState({})\r\n\r\n  async function fetchBreakdownData() {\r\n    const { data, error } = await supabase\r\n      .from(\"barangay_budget_breakdown\")\r\n      .select(\"year, category, subcategory, description, amount\")\r\n\r\n    if (error) return console.error(error)\r\n\r\n    const grouped = {}\r\n\r\n    data.forEach(row => {\r\n      const year = Number(row.year)\r\n      if (!grouped[year]) grouped[year] = { income: {}, appropriations: {} }\r\n\r\n      const cat = row.category?.toLowerCase().includes(\"income\")\r\n        ? \"income\"\r\n        : \"appropriations\"\r\n\r\n      const label = row.subcategory || row.description || \"Uncategorized\"\r\n      const value = Number(String(row.amount).replace(/[^\\d.-]/g, \"\"))\r\n\r\n      grouped[year][cat][label] =\r\n        (grouped[year][cat][label] || 0) + value\r\n    })\r\n\r\n    setBreakdownData(grouped)\r\n  }\r\n\r\n  return { breakdownData, fetchBreakdownData }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;AAFA;;;AAIe,SAAS;;IACtB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,mLAAQ,EAAC,CAAC;IAEpD,eAAe;QACb,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACnC,IAAI,CAAC,6BACL,MAAM,CAAC;QAEV,IAAI,OAAO,OAAO,QAAQ,KAAK,CAAC;QAEhC,MAAM,UAAU,CAAC;QAEjB,KAAK,OAAO,CAAC,CAAA;gBAIC;YAHZ,MAAM,OAAO,OAAO,IAAI,IAAI;YAC5B,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,GAAG;gBAAE,QAAQ,CAAC;gBAAG,gBAAgB,CAAC;YAAE;YAErE,MAAM,MAAM,EAAA,gBAAA,IAAI,QAAQ,cAAZ,oCAAA,cAAc,WAAW,GAAG,QAAQ,CAAC,aAC7C,WACA;YAEJ,MAAM,QAAQ,IAAI,WAAW,IAAI,IAAI,WAAW,IAAI;YACpD,MAAM,QAAQ,OAAO,OAAO,IAAI,MAAM,EAAE,OAAO,CAAC,YAAY;YAE5D,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GACvB,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI;QACvC;QAEA,iBAAiB;IACnB;IAEA,OAAO;QAAE;QAAe;IAAmB;AAC7C;GA/BwB","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/summaryCards.jsx"],"sourcesContent":["export default function SummaryCards({ data }) {\r\n  const total = data.reduce((s, d) => s + d.totalIncome, 0)\r\n  const avg = total / data.length\r\n  const max = Math.max(...data.map(d => d.totalIncome))\r\n  const min = Math.min(...data.map(d => d.totalIncome))\r\n\r\n  const currency = val =>\r\n    new Intl.NumberFormat(\"en-PH\", { style: \"currency\", currency: \"PHP\" }).format(val)\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n      <Card label=\"Total Budget\" value={currency(total)} color=\"indigo\" />\r\n      <Card label=\"Average Budget\" value={currency(avg)} color=\"green\" />\r\n      <Card label=\"Highest Budget\" value={currency(max)} color=\"yellow\" />\r\n      <Card label=\"Lowest Budget\" value={currency(min)} color=\"red\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Card({ label, value, color }) {\r\n  const colors = {\r\n    indigo: \"bg-indigo-50 text-indigo-700\",\r\n    green: \"bg-green-50 text-green-700\",\r\n    yellow: \"bg-yellow-50 text-yellow-700\",\r\n    red: \"bg-red-50 text-red-700\",\r\n  }\r\n\r\n  return (\r\n    <div className={`p-4 rounded-lg text-center ${colors[color]}`}>\r\n      <p className=\"text-sm text-gray-600\">{label}</p>\r\n      <p className=\"text-lg font-semibold\">{value}</p>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAe,SAAS,aAAa,KAAQ;QAAR,EAAE,IAAI,EAAE,GAAR;IACnC,MAAM,QAAQ,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,WAAW,EAAE;IACvD,MAAM,MAAM,QAAQ,KAAK,MAAM;IAC/B,MAAM,MAAM,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW;IACnD,MAAM,MAAM,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW;IAEnD,MAAM,WAAW,CAAA,MACf,IAAI,KAAK,YAAY,CAAC,SAAS;YAAE,OAAO;YAAY,UAAU;QAAM,GAAG,MAAM,CAAC;IAEhF,qBACE,uMAAC;QAAI,WAAU;;0BACb,uMAAC;gBAAK,OAAM;gBAAe,OAAO,SAAS;gBAAQ,OAAM;;;;;;0BACzD,uMAAC;gBAAK,OAAM;gBAAiB,OAAO,SAAS;gBAAM,OAAM;;;;;;0BACzD,uMAAC;gBAAK,OAAM;gBAAiB,OAAO,SAAS;gBAAM,OAAM;;;;;;0BACzD,uMAAC;gBAAK,OAAM;gBAAgB,OAAO,SAAS;gBAAM,OAAM;;;;;;;;;;;;AAG9D;KAjBwB;AAmBxB,SAAS,KAAK,KAAuB;QAAvB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,GAAvB;IACZ,MAAM,SAAS;QACb,QAAQ;QACR,OAAO;QACP,QAAQ;QACR,KAAK;IACP;IAEA,qBACE,uMAAC;QAAI,WAAW,AAAC,8BAA2C,OAAd,MAAM,CAAC,MAAM;;0BACzD,uMAAC;gBAAE,WAAU;0BAAyB;;;;;;0BACtC,uMAAC;gBAAE,WAAU;0BAAyB;;;;;;;;;;;;AAG5C;MAdS","debugId":null}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/forecastChart.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\n\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  CartesianGrid,\r\n  ResponsiveContainer,\r\n  Legend,\r\n  ReferenceLine,\r\n  Area,\r\n  Label\r\n} from \"recharts\";\r\n\r\nexport default function LGUFinancialForecastChart({ historyData, forecastData, lguName = \"Local Government Unit\" }) {\r\nconst [forecastYearsToShow, setForecastYearsToShow] = useState(1);\r\n\r\n  // ---------- DATA PROCESSING ----------\r\n  const actualData = Array.isArray(historyData)\r\n    ? historyData.map(d => ({\r\n        fiscalYear: Number(d.year),\r\n        actualBudget: d.totalIncome ?? 0,\r\n        forecastBudget: null,\r\n      }))\r\n    : [];\r\n\r\n  const lastActualYear = actualData.length > 0\r\n    ? Math.max(...actualData.map(d => d.fiscalYear))\r\n    : null;\r\n\r\nconst forecastMapped = Array.isArray(forecastData)\r\n  ? forecastData\r\n      .filter(f => f.year > lastActualYear)\r\n      .slice(0, forecastYearsToShow) // ðŸ”¥ LIMIT YEARS HERE\r\n      .map(f => ({\r\n        fiscalYear: Number(f.year),\r\n        actualBudget: null,\r\n        forecastBudget: f.value ?? 0,\r\n        projectedGrowth: f.growthRate || null,\r\n      }))\r\n  : [];\r\n\r\n\r\n  const combinedData = [\r\n    ...actualData,\r\n    ...forecastMapped,\r\n  ];\r\n\r\n  const forecastStartYear = forecastMapped?.[0]?.fiscalYear;\r\n  const currentYear = new Date().getFullYear();\r\n\r\n  // Calculate growth metrics\r\n  const getGrowthMetrics = () => {\r\n    if (actualData.length < 2) return null;\r\n    const sorted = [...actualData].sort((a, b) => a.fiscalYear - b.fiscalYear);\r\n    const recent = sorted.slice(-3);\r\n    const avgGrowth = recent.reduce((sum, curr, idx, arr) => {\r\n      if (idx === 0) return 0;\r\n      const prev = arr[idx - 1].actualBudget;\r\n      return sum + ((curr.actualBudget - prev) / prev) * 100;\r\n    }, 0) / (recent.length - 1);\r\n    \r\n    return {\r\n      averageGrowth: avgGrowth.toFixed(1),\r\n      lastActual: actualData[actualData.length - 1]?.actualBudget || 0\r\n    };\r\n  };\r\n\r\n  const growthMetrics = getGrowthMetrics();\r\nconst forecastGrowthRate = (() => {\r\n  if (!growthMetrics || forecastMapped.length === 0) return null;\r\n\r\n  const lastForecast =\r\n    forecastMapped[forecastMapped.length - 1]?.forecastBudget;\r\n\r\n  if (!lastForecast || !growthMetrics.lastActual) return null;\r\n\r\n  return (\r\n    ((lastForecast - growthMetrics.lastActual) /\r\n      growthMetrics.lastActual) *\r\n    100\r\n  ).toFixed(2);\r\n})();\r\n\r\n  // ---------- CUSTOM TOOLTIP ----------\r\nconst CustomTooltip = ({ active, payload, label }) => {\r\n  if (active && payload && payload.length) {\r\n    const isForecast = label > lastActualYear;\r\n    const actual = payload.find(p => p.dataKey === 'actualBudget')?.value;\r\n    const forecast = payload.find(p => p.dataKey === 'forecastBudget')?.value;\r\n\r\n    const growthFromLastActual =\r\n      isForecast && growthMetrics?.lastActual && forecast\r\n        ? ((forecast - growthMetrics.lastActual) / growthMetrics.lastActual) * 100\r\n        : null;\r\n\r\n    return (\r\n      <div className=\"bg-white p-3 border rounded shadow text-sm\">\r\n        <p className=\"font-semibold\">FY {label}</p>\r\n\r\n        {typeof actual === \"number\" && (\r\n  <p className=\"text-blue-600\">\r\n    Actual: â‚±{actual.toLocaleString()}\r\n  </p>\r\n)}\r\n\r\n\r\n        {typeof forecast === \"number\" && (\r\n  <p className=\"text-emerald-600\">\r\n    Forecast: â‚±{forecast.toLocaleString()}\r\n  </p>\r\n)}\r\n\r\n\r\n        {growthFromLastActual !== null && (\r\n          <p className=\"text-xs text-amber-600 mt-1\">\r\n            Growth vs last actual: {growthFromLastActual.toFixed(2)}%\r\n          </p>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\n\r\n  return (\r\n    <div className=\" overflow-hidden\">\r\n    \r\n{/* FORECAST YEAR FILTER */}\r\n<div className=\"flex justify-end mb-4\">\r\n  <div className=\"flex items-center gap-2\">\r\n    <label className=\"text-sm font-medium text-gray-700\">\r\n      Forecast Years:\r\n    </label>\r\n    <select\r\n      value={forecastYearsToShow}\r\n      onChange={(e) => setForecastYearsToShow(Number(e.target.value))}\r\n      className=\"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500\"\r\n    >\r\n      {[1, 2, 3].map(year => (\r\n        <option key={year} value={year}>\r\n          {year} Year{year > 1 ? \"s\" : \"\"}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  </div>\r\n</div>\r\n\r\n      {/* CHART */}\r\n      <div className=\"p-6\">\r\n        <ResponsiveContainer width=\"100%\" height={450}>\r\n          <LineChart\r\n            data={combinedData}\r\n            margin={{ top: 20, right: 30, left: 20, bottom: 20 }}\r\n          >\r\n            <CartesianGrid \r\n              strokeDasharray=\"3 3\" \r\n              stroke=\"#f0f0f0\"\r\n              vertical={false}\r\n            />\r\n            \r\n            {/* X AXIS */}\r\n            <XAxis\r\n              dataKey=\"fiscalYear\"\r\n              type=\"number\"\r\n              domain={['dataMin', 'dataMax']}\r\n              tick={{ fontSize: 13, fill: '#6b7280' }}\r\n              tickFormatter={(value) => ` ${value}`}\r\n              padding={{ left: 20, right: 20 }}\r\n            >\r\n             \r\n            </XAxis>\r\n\r\n            {/* Y AXIS */}\r\n            <YAxis\r\n              tickFormatter={(value) => `â‚±${(value / 1_000_000).toFixed(0)}M`}\r\n              tick={{ fontSize: 13, fill: '#070707' }}\r\n              width={80}\r\n            >\r\n              <Label \r\n                angle={-90}\r\n                value=\"Budget (PHP)\" \r\n                position=\"insideLeft\" \r\n                offset={-10}\r\n                style={{ fill: '#08090a', fontSize: 14, textAnchor: 'middle' }}\r\n              />\r\n            </YAxis>\r\n\r\n            <Tooltip content={<CustomTooltip />} />\r\n\r\n            <Legend \r\n              verticalAlign=\"bottom\" \r\n              height={50}\r\n              iconType=\"circle\"\r\n              iconSize={10}\r\n              wrapperStyle={{ paddingBottom: 20 }}\r\n            />\r\n\r\n            {/* FORECAST START REFERENCE LINE */}\r\n            {forecastStartYear && (\r\n              <ReferenceLine\r\n                x={forecastStartYear}\r\n                stroke=\"#059669\"\r\n                strokeWidth={1.5}\r\n                strokeDasharray=\"5 5\"\r\n              >\r\n                \r\n              </ReferenceLine>\r\n            )}\r\n\r\n            {/* CURRENT YEAR REFERENCE LINE */}\r\n            <ReferenceLine\r\n              x={currentYear}\r\n              stroke=\"#dc2626\"\r\n              strokeWidth={1}\r\n              strokeDasharray=\"3 3\"\r\n            >\r\n              <Label \r\n                value=\"Current Year\" \r\n                position=\"Top\"\r\n                fill=\"#dc2626\"\r\n                fontSize={11}\r\n                offset={5}\r\n              />\r\n            </ReferenceLine>\r\n\r\n          \r\n\r\n            {/* ACTUAL BUDGET LINE */}\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"actualBudget\"\r\n              name=\"Historical Budget\"\r\n              stroke=\"#1e40af\"\r\n              strokeWidth={3}\r\n              dot={{\r\n                r: 5,\r\n                fill: \"#1e40af\",\r\n                strokeWidth: 2,\r\n              }}\r\n           \r\n              connectNulls={true}\r\n            />\r\n\r\n            {/* FORECAST LINE */}\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"forecastBudget\"\r\n              name=\"Projected Budget\"\r\n              stroke=\"#059669\"\r\n              strokeWidth={3}\r\n              strokeDasharray=\"5 5\"\r\n              dot={{\r\n                r: 5,\r\n                fill: \"#059669\",\r\n                strokeWidth: 2,\r\n              }}\r\n              activeDot={{\r\n                r: 8,\r\n                fill: \"#059669\",\r\n                strokeWidth: 3\r\n              }}\r\n              connectNulls={true}\r\n            />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n\r\n        {/* GRADIENT DEFINITIONS */}\r\n        <svg style={{ height: 0 }}>\r\n          <defs>\r\n            <linearGradient id=\"colorActual\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n              <stop offset=\"5%\" stopColor=\"#1e40af\" stopOpacity={0.3}/>\r\n              <stop offset=\"95%\" stopColor=\"#1e40af\" stopOpacity={0}/>\r\n            </linearGradient>\r\n          </defs>\r\n        </svg>\r\n\r\n        {/* FOOTER STATS */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-100\">\r\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n            <p className=\"text-sm text-blue-700 font-medium mb-1\">Historical Period</p>\r\n            <p className=\"text-2xl font-bold text-blue-800\">\r\n              {actualData.length} Years\r\n            </p>\r\n            <p className=\"text-xs text-blue-600 mt-1\">\r\n              FY {actualData[0]?.fiscalYear || 'N/A'} - {lastActualYear || 'N/A'}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"bg-emerald-50 p-4 rounded-lg\">\r\n            <p className=\"text-sm text-emerald-700 font-medium mb-1\">Projection Period</p>\r\n            <p className=\"text-2xl font-bold text-emerald-800\">\r\n              {forecastMapped.length} Years\r\n            </p>\r\n            <p className=\"text-xs text-emerald-600 mt-1\">\r\n              FY {forecastStartYear || 'N/A'} - {forecastMapped[forecastMapped.length - 1]?.fiscalYear || 'N/A'}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n  <p className=\"text-sm text-gray-700 font-medium mb-1\">\r\n    Forecast Growth Rate\r\n  </p>\r\n  <p className=\"text-2xl font-bold text-gray-800\">\r\n    {forecastGrowthRate !== null ? `${forecastGrowthRate}%` : 'N/A'}\r\n  </p>\r\n  <p className=\"text-xs text-gray-600 mt-1\">\r\n    vs last actual year\r\n  </p>\r\n</div>\r\n\r\n        </div>\r\n\r\n        {/* DISCLAIMER */}\r\n        <div className=\"mt-20 text-xs text-gray-500 italic\">\r\n          <p>\r\n            Note: Forecasts are based on historical trends and economic indicators. \r\n            Actual results may vary based on local economic conditions, policy changes, \r\n            and unforeseen circumstances. Prepared by Danahao Barangay Treasury.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 946, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/forecastSummary.jsx"],"sourcesContent":["\"use client\";\r\n\r\nfunction Card({ title, value, color }) {\r\n  const styles = {\r\n    indigo: \"bg-indigo-50 text-indigo-700\",\r\n    green: \"bg-green-50 text-green-700\",\r\n    yellow: \"bg-yellow-50 text-yellow-700\",\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`rounded-lg px-3 py-4 text-center flex flex-col justify-center items-center ${styles[color]}`}\r\n    >\r\n      <p className=\"text-[18px] font-medium text-gray-600 leading-tight\">\r\n        {title}\r\n      </p>\r\n      <p className=\"mt-2 text-base font-semibold\">\r\n        {value}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function ForecastSummary({\r\n  data,\r\n  selectedYear,\r\n  lastActualYear,\r\n  lastActualValue,\r\n}) {\r\n  if (!Array.isArray(data) || data.length === 0) return null;\r\n\r\n  const sorted = [...data].sort((a, b) => a.year - b.year);\r\n\r\n  const selectedForecast = sorted.find(d => d.year === selectedYear);\r\n  if (!selectedForecast || !lastActualValue) return null;\r\n\r\n  const growthRate =\r\n    ((selectedForecast.value - lastActualValue) / lastActualValue) * 100;\r\n\r\n\r\n  const format = (v) =>\r\n    new Intl.NumberFormat(\"en-PH\", {\r\n      style: \"currency\",\r\n      currency: \"PHP\",\r\n    }).format(v);\r\n\r\n return (\r\n  <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4\">\r\n    <Card\r\n      title={`Forecast (${nextYear.year})`}\r\n      value={format(nextYear.value)}\r\n      color=\"indigo\"\r\n    />\r\n\r\n    <Card\r\n      title=\"Next 2â€“5 Year Avg\"\r\n      value={format(avgForecast)}\r\n      color=\"green\"\r\n    />\r\n\r\n    <Card\r\n  title=\"Growth Rate\"\r\n  value={`${Number(growthRate).toLocaleString(\"en-PH\", {\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2,\r\n  })}%`}\r\n  color=\"yellow\"\r\n/>\r\n\r\n  </div>\r\n);\r\n\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAEA,SAAS,KAAK,KAAuB;QAAvB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,GAAvB;IACZ,MAAM,SAAS;QACb,QAAQ;QACR,OAAO;QACP,QAAQ;IACV;IAEA,qBACE,uMAAC;QACC,WAAW,AAAC,8EAA2F,OAAd,MAAM,CAAC,MAAM;;0BAEtG,uMAAC;gBAAE,WAAU;0BACV;;;;;;0BAEH,uMAAC;gBAAE,WAAU;0BACV;;;;;;;;;;;;AAIT;KAnBS;AAqBM,SAAS,gBAAgB,KAKvC;QALuC,EACtC,IAAI,EACJ,YAAY,EACZ,cAAc,EACd,eAAe,EAChB,GALuC;IAMtC,IAAI,CAAC,MAAM,OAAO,CAAC,SAAS,KAAK,MAAM,KAAK,GAAG,OAAO;IAEtD,MAAM,SAAS;WAAI;KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,GAAG,EAAE,IAAI;IAEvD,MAAM,mBAAmB,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK;IACrD,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,OAAO;IAElD,MAAM,aACJ,AAAC,CAAC,iBAAiB,KAAK,GAAG,eAAe,IAAI,kBAAmB;IAGnE,MAAM,SAAS,CAAC,IACd,IAAI,KAAK,YAAY,CAAC,SAAS;YAC7B,OAAO;YACP,UAAU;QACZ,GAAG,MAAM,CAAC;IAEb,qBACC,uMAAC;QAAI,WAAU;;0BACb,uMAAC;gBACC,OAAO,AAAC,aAA0B,OAAd,SAAS,IAAI,EAAC;gBAClC,OAAO,OAAO,SAAS,KAAK;gBAC5B,OAAM;;;;;;0BAGR,uMAAC;gBACC,OAAM;gBACN,OAAO,OAAO;gBACd,OAAM;;;;;;0BAGR,uMAAC;gBACH,OAAM;gBACN,OAAO,AAAC,GAGL,OAHO,OAAO,YAAY,cAAc,CAAC,SAAS;oBACnD,uBAAuB;oBACvB,uBAAuB;gBACzB,IAAG;gBACH,OAAM;;;;;;;;;;;;AAMR;MAjDwB","debugId":null}},
    {"offset": {"line": 1051, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/page.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport { categorizeExpense } from \"../dashboard/components/expensePieChart\";\r\nimport { supabase } from \"../../../lib/supabaseClient\";\r\n\r\nimport {\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip,\r\n} from \"recharts\";\r\n\r\nimport { AlertCircle, BarChart3 } from \"lucide-react\";\r\n\r\n// Hooks\r\nimport useBudgetData from \"./lib/useBudgetData\";\r\nimport useBreakdownData from \"./lib/useBreakdownData\";\r\n\r\n// Components\r\nimport ExpensePieChart from \"../dashboard/components/expensePieChart\";\r\nimport SummaryCards from \"./components/summaryCards\";\r\nimport ForecastChart from \"./components/forecastChart\";\r\nimport ForecastSummary from \"./components/forecastSummary\";\r\n\r\nexport default function TransactionPage() {\r\n\r\n  /* =========================\r\n     BASIC STATE\r\n  ========================= */\r\n  const [session, setSession] = useState(null);\r\n  const [forecastData, setForecastData] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [breakdown, setBreakdown] = useState([]);\r\n\r\n  const { budgetData, loading, fetchBudgetData } = useBudgetData();\r\n  const { fetchBreakdownData } = useBreakdownData();\r\n\r\n  /* =========================\r\n     YEAR SELECTION\r\n  ========================= */\r\n  const [selectedYear, setSelectedYear] = useState(null);\r\n\r\n  /* =========================\r\n     NEXT YEAR FORECAST\r\n  ========================= */\r\n  const nextYearForecast = useMemo(() => {\r\n    if (!forecastData || forecastData.length === 0) return 0;\r\n    return forecastData[0].value;\r\n  }, [forecastData]);\r\n\r\n  /* =========================\r\n     LOAD FORECAST\r\n  ========================= */\r\n  useEffect(() => {\r\n    if (budgetData.length > 0) loadForecast();\r\n  }, [budgetData]);\r\n\r\n  async function loadForecast() {\r\n    try {\r\n      setError(null);\r\n\r\n      const res = await fetch(\"/api/forecast\", { cache: \"no-store\" });\r\n      if (!res.ok) throw new Error(\"Forecast failed\");\r\n\r\n      const data = await res.json();\r\n      const lastYear = Math.max(...budgetData.map(d => d.year));\r\n\r\n      setForecastData(\r\n        data\r\n          .filter(d => d.year > lastYear)\r\n          .map(d => ({\r\n            year: d.year,\r\n            value: Number(d.prediction),\r\n          }))\r\n      );\r\n    } catch {\r\n      setError(\"Failed to load forecast data.\");\r\n    }\r\n  }\r\n\r\n  /* =========================\r\n     FETCH HISTORICAL EXPENSES\r\n  ========================= */\r\n  useEffect(() => {\r\n    const fetchHistoricalExpenses = async () => {\r\n      const { data: bd } = await supabase\r\n        .from(\"barangay_budget_breakdown\")\r\n        .select(\"description, amount\")\r\n        .eq(\"category\", \"Expenses\")\r\n        .gte(\"year\", 2023)\r\n        .lte(\"year\", 2024);\r\n\r\n      const { data: tx } = await supabase\r\n        .from(\"transactions\")\r\n        .select(\"description, withdrawal\")\r\n        .gte(\"date\", \"2025-01-01\")\r\n        .lte(\"date\", \"2025-12-31\");\r\n\r\n      const breakdownExpenses = (bd || []).map(r => ({\r\n        description: r.description,\r\n        amount: Number(r.amount),\r\n      }));\r\n\r\n      const transactionExpenses = (tx || [])\r\n        .filter(t => t.withdrawal > 0)\r\n        .map(t => ({\r\n          description: t.description,\r\n          amount: Number(t.withdrawal),\r\n        }));\r\n\r\n      setBreakdown([\r\n        ...breakdownExpenses,\r\n        ...transactionExpenses,\r\n      ]);\r\n    };\r\n\r\n    fetchHistoricalExpenses();\r\n  }, []);\r\n\r\n  /* =========================\r\n     EXPENSE SOURCE\r\n  ========================= */\r\n  const expenseSourceData = useMemo(() => {\r\n    if (forecastData.some(f => f.year >= 2026)) {\r\n      return breakdown;\r\n    }\r\n    return [];\r\n  }, [forecastData, breakdown]);\r\n\r\n  /* =========================\r\n     EXPENSE STATS\r\n  ========================= */\r\n  const expenseStats = useMemo(() => {\r\n    const stats = {};\r\n\r\n    expenseSourceData.forEach(item => {\r\n      const category = categorizeExpense(item.description);\r\n      const subcategory = item.description;\r\n\r\n      if (!stats[category]) {\r\n        stats[category] = { total: 0, items: {} };\r\n      }\r\n\r\n      stats[category].total += item.amount;\r\n      stats[category].items[subcategory] =\r\n        (stats[category].items[subcategory] || 0) + item.amount;\r\n    });\r\n\r\n    return stats;\r\n  }, [expenseSourceData]);\r\n\r\n  /* =========================\r\n     UTILIZATION RATIOS\r\n  ========================= */\r\n  const utilizationRatios = useMemo(() => {\r\n    const ratios = {};\r\n    const totalExpenses = Object.values(expenseStats)\r\n      .reduce((s, c) => s + c.total, 0);\r\n\r\n    if (totalExpenses === 0) return {};\r\n\r\n    Object.entries(expenseStats).forEach(([category, data]) => {\r\n      ratios[category] = data.total / totalExpenses;\r\n    });\r\n\r\n    return ratios;\r\n  }, [expenseStats]);\r\n\r\n  /* =========================\r\n     MULTI-YEAR ALLOCATIONS\r\n  ========================= */\r\n  const multiYearSuggestedAllocations = useMemo(() => {\r\n    if (!forecastData.length) return [];\r\n\r\n    return forecastData\r\n      .map(forecast => {\r\n        const total = Number(forecast.value);\r\n        if (!Number.isFinite(total) || total <= 0) return null;\r\n\r\n        return {\r\n          year: forecast.year,\r\n          allocations: Object.entries(utilizationRatios).map(\r\n            ([category, ratio]) => ({\r\n              name: category,\r\n              percentage: +(ratio * 100).toFixed(2),\r\n              amount: total * ratio,\r\n              description: \"Based on historical expense utilization\",\r\n            })\r\n          ),\r\n        };\r\n      })\r\n      .filter(Boolean);\r\n  }, [forecastData, utilizationRatios]);\r\n\r\n  /* =========================\r\n     SELECTED YEAR\r\n  ========================= */\r\nconst selectedYearAllocation = useMemo(() => {\r\n  if (!selectedYear) return null;\r\n  return multiYearSuggestedAllocations.find(\r\n    y => y.year === selectedYear\r\n  );\r\n}, [multiYearSuggestedAllocations, selectedYear]);\r\n\r\nconst allocationData = selectedYearAllocation?.allocations || [];\r\n\r\nconst allocationTotal = allocationData.reduce(\r\n  (sum, item) => sum + item.amount,\r\n  0\r\n);\r\n\r\nuseEffect(() => {\r\n  if (forecastData.length && !selectedYear) {\r\n    setSelectedYear(forecastData[0].year);\r\n  }\r\n}, [forecastData, selectedYear]);\r\n\r\n  /* =========================\r\n     AUTH\r\n  ========================= */\r\n  useEffect(() => {\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session);\r\n      if (session) {\r\n        fetchBudgetData();\r\n        fetchBreakdownData();\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  /* =========================\r\n     DEBUG\r\n  ========================= */\r\n  console.log(\"Forecast value:\", nextYearForecast);\r\n  console.log(\"Utilization ratios:\", utilizationRatios);\r\n  console.log(\"Breakdown length:\", breakdown.length);\r\n  console.log(\"Expense source data:\", expenseSourceData);\r\n  console.log(\"Expense stats:\", expenseStats);\r\n\r\n\r\n/* ---------------- UI ---------------- */\r\nreturn (\r\n  <div className=\"min-h-screen w-full bg-slate-50 overflow-x-hidden\">\r\n  <div className=\"mx-auto w-full max-w-[1600px] px-4 sm:px-6 lg:px-8 py-6\">\r\n\r\n\r\n      \r\n      {/* HEADER SECTION */}\r\n      <div className=\"mb-8\">\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\r\n<div className=\"px-8 py-6 bg-gradient-to-r from-emerald-700 to-emerald-600\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                  <div className=\"h-10 w-10 bg-white/10 rounded-lg flex items-center justify-center backdrop-blur-sm\">\r\n                    <span className=\"text-white text-lg\">ðŸ“ˆ</span>\r\n                  </div>\r\n                  <div>\r\n                    <h1 className=\"text-2xl font-bold text-white tracking-tight\">\r\n                      Forecasting Analysis\r\n                    </h1>\r\n                    \r\n                  </div>\r\n                </div>\r\n                \r\n              </div>\r\n              <div className=\"flex gap-3\">\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n        \r\n        </div>\r\n      </div>\r\n\r\n      {/* ERROR STATE */}\r\n      {error && (\r\n        <div className=\"mb-6\">\r\n          <div className=\"bg-white border border-red-200 rounded-lg shadow-sm\">\r\n            <div className=\"px-6 py-4 flex items-start gap-3\">\r\n              <div className=\"mt-0.5\">\r\n                <AlertCircle className=\"text-red-500 h-5 w-5 flex-shrink-0\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h4 className=\"text-sm font-semibold text-red-800\">Forecast Error</h4>\r\n                <p className=\"text-sm text-red-600 mt-1\">{error}</p>\r\n              </div>\r\n              <button className=\"text-sm text-red-600 hover:text-red-800 font-medium\">\r\n                Retry\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* LOADING STATE */}\r\n      {loading && (\r\n        <div className=\"mb-6\">\r\n          <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm\">\r\n            <div className=\"p-16 text-center\">\r\n              <div className=\"inline-flex flex-col items-center\">\r\n                <div className=\"animate-spin rounded-full h-10 w-10 border-3 border-slate-200 border-t-emerald-600 mb-4\"></div>\r\n                <p className=\"text-slate-700 font-medium mb-2\">Loading forecast analytics...</p>\r\n                <p className=\"text-sm text-slate-500\">Processing historical data and generating insights</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* MAIN CONTENT */}\r\n      {forecastData.length > 0 && (\r\n        <>\r\n          {/* CHARTS SECTION */}\r\n          <div className=\"mb-8\">\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\r\n              \r\n              {/* MAIN FORECAST CHART */}\r\n              <div className=\"xl:col-span-2\">\r\n                <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm h-full\">\r\n                  <div className=\"px-6 py-4 border-b border-slate-100 flex items-center justify-between\">\r\n                    <div>\r\n                      <h2 className=\"text-lg font-semibold text-slate-900\">\r\n                        Budget Forecast Analysis\r\n                      </h2>\r\n                     \r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                     \r\n                    </div>\r\n                  </div>\r\n                  <div className=\"p-6\">\r\n                    <div className=\"h-96\">\r\n                      <ForecastChart\r\n                        historyData={budgetData}\r\n                        forecastData={forecastData}\r\n                      />\r\n                    </div>\r\n                    <div className=\"mt-6\">\r\n  <ForecastSummary\r\n  data={forecastData}\r\n  selectedYear={selectedYear}\r\n  lastActualYear={Math.max(...budgetData.map(b => b.year))}\r\n  lastActualValue={\r\n    budgetData.find(b => b.year === Math.max(...budgetData.map(b => b.year)))\r\n      ?.amount\r\n  }\r\n/>\r\n\r\n</div>\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n{/* RECOMMENDATIONS SECTION */}\r\n          <div className=\"mb-8\">\r\n            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm\">\r\n       \r\n\r\n                  {/* ALLOCATION VISUALIZATION */}\r\n                  <div className=\"lg:col-span-1\">\r\n                    <div className=\"bg-gradient-to-b from-slate-50 to-white rounded-lg border border-slate-200 p-6 h-full\">\r\n                      <h3 className=\"text-base font-semibold text-slate-900 mb-15\">\r\n                        Proposed Allocation\r\n                      </h3>\r\n                      \r\n                      {/* PIE CHART */}\r\n                      <div className=\"mb-8\">\r\n                        <ResponsiveContainer width=\"100%\" height={220}>\r\n                          <PieChart>\r\n                            <Pie\r\n  data={allocationData}\r\n  dataKey=\"amount\"\r\n  nameKey=\"name\"\r\n\r\n                              cx=\"50%\"\r\n                              cy=\"50%\"\r\n                              outerRadius={80}\r\n                              innerRadius={35}\r\n                              label={false}\r\n                              stroke=\"#ffffff\"\r\n                              strokeWidth={3}\r\n                            >\r\n                              {allocationData.map((_, index) => (\r\n                                <Cell\r\n                                  key={index}\r\n                                  fill={[\r\n                                    \"#0ea5e9\", // PS - sky blue\r\n                                    \"#ef4444\", // MOOE - red\r\n                                    \"#f59e0b\", // BDF - amber\r\n                                    \"#6366f1\", // BDRRM - indigo\r\n                                    \"#8b5cf6\", // SK - violet\r\n                                    \"#64748b\", // Other - slate\r\n                                  ][index]}\r\n                                />\r\n                              ))}\r\n                            </Pie>\r\n                            <Tooltip\r\n                              formatter={(value) => [`â‚±${Number(value).toLocaleString()}`, 'Allocation']}\r\n                              contentStyle={{\r\n                                backgroundColor: 'white',\r\n                                border: '1px solid #e2e8f0',\r\n                                borderRadius: '8px',\r\n                                padding: '12px',\r\n                                fontSize: '12px'\r\n                              }}\r\n                            />\r\n                          </PieChart>\r\n                        </ResponsiveContainer>\r\n                      </div>\r\n<select\r\n  value={selectedYear ?? \"\"}\r\n  onChange={(e) => setSelectedYear(Number(e.target.value))}\r\n  className=\"mb-4 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm\"\r\n>\r\n  {forecastData.map((f, index) => (\r\n    <option key={f.year} value={f.year}>\r\n        {f.year}\r\n    </option>\r\n  ))}\r\n</select>\r\n\r\n                      {/* ALLOCATION DETAILS */}\r\n                      <div className=\"space-y-4\">\r\n                        <div className=\"flex items-center justify-between text-sm\">\r\n  <span className=\"text-slate-700 font-medium\">\r\n    Predicted Budget ({selectedYear})\r\n  </span>\r\n  <span className=\"text-slate-900 font-bold\">\r\n    â‚±{allocationData\r\n      .reduce((sum, item) => sum + item.amount, 0)\r\n      .toLocaleString(\"en-PH\", { minimumFractionDigits: 2 })}\r\n  </span>\r\n</div>\r\n\r\n                        \r\n                        <div className=\"space-y-3\">\r\n                          {allocationData.map((item, index) => (\r\n                            <div key={item.name} className=\"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-100\">\r\n                              <div className=\"flex items-center gap-3\">\r\n                                <div\r\n                                  className=\"h-3 w-3 rounded-full flex-shrink-0\"\r\n                                  style={{\r\n                                    backgroundColor: [\r\n                                      \"#0ea5e9\", \"#ef4444\", \"#f59e0b\", \r\n                                      \"#6366f1\", \"#8b5cf6\", \"#64748b\"\r\n                                    ][index],\r\n                                  }}\r\n                                />\r\n                                <span className=\"text-sm font-medium text-slate-700\">{item.name}</span>\r\n                              </div>\r\n                              <div className=\"text-right\">\r\n                                <div className=\"text-sm font-semibold text-slate-900\">\r\nâ‚±{Number(item.amount).toLocaleString(\"en-PH\", {\r\n  minimumFractionDigits: 2,\r\n  maximumFractionDigits: 2\r\n})}\r\n                                </div>\r\n                                <div className=\"text-xs text-slate-500\">\r\n{(\r\n  (item.amount /\r\n    allocationData.reduce((sum, i) => sum + i.amount, 0)) *\r\n  100\r\n).toFixed(1)}%\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n             \r\n              \r\n            </div>\r\n          </div>\r\n\r\n          \r\n         \r\n     \r\n\r\n         \r\n        </>\r\n      )}\r\n\r\n      {/* EMPTY STATE */}\r\n      {!loading && budgetData.length === 0 && (\r\n        <div className=\"text-center py-16\">\r\n          <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm p-12 max-w-2xl mx-auto\">\r\n            <div className=\"mx-auto h-20 w-20 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full flex items-center justify-center mb-6\">\r\n              <BarChart3 className=\"h-10 w-10 text-slate-500\" />\r\n            </div>\r\n            <h3 className=\"text-xl font-semibold text-slate-900 mb-3\">\r\n              No Budget Data Available\r\n            </h3>\r\n            <p className=\"text-slate-600 mb-8 max-w-md mx-auto\">\r\n              Upload historical budget data to generate AI-powered forecasts and strategic recommendations\r\n            </p>\r\n            <div className=\"flex gap-4 justify-center\">\r\n              <button className=\"px-6 py-3 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200\">\r\n                View Sample Report\r\n              </button>\r\n              <button className=\"px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg font-medium hover:from-emerald-700 hover:to-teal-700\">\r\n                <span className=\"flex items-center gap-2\">\r\n                  <span>ðŸ“¤</span>\r\n                  <span>Upload Budget Data</span>\r\n                </span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  </div>\r\n);\r\n\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}