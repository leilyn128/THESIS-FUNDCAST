{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/ui/card.jsx"],"sourcesContent":["export function Card({ className = \"\", children, ...props }) {\r\n  return (\r\n    <div\r\n      className={`rounded-xl border bg-white shadow-sm ${className}`}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function CardHeader({ className = \"\", children, ...props }) {\r\n  return (\r\n    <div\r\n      className={`p-4 border-b bg-white/70 backdrop-blur-sm ${className}`}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function CardTitle({ className = \"\", children, ...props }) {\r\n  return (\r\n    <h2\r\n      className={`text-lg font-semibold leading-none tracking-tight ${className}`}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </h2>\r\n  );\r\n}\r\n\r\nexport function CardContent({ className = \"\", children, ...props }) {\r\n  return (\r\n    <div className={`p-4 ${className}`} {...props}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,SAAS,KAAK,KAAsC;QAAtC,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,GAAtC;IACnB,qBACE,uMAAC;QACC,WAAW,AAAC,wCAAiD,OAAV;QAClD,GAAG,KAAK;kBAER;;;;;;AAGP;KATgB;AAWT,SAAS,WAAW,KAAsC;QAAtC,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,GAAtC;IACzB,qBACE,uMAAC;QACC,WAAW,AAAC,6CAAsD,OAAV;QACvD,GAAG,KAAK;kBAER;;;;;;AAGP;MATgB;AAWT,SAAS,UAAU,KAAsC;QAAtC,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,GAAtC;IACxB,qBACE,uMAAC;QACC,WAAW,AAAC,qDAA8D,OAAV;QAC/D,GAAG,KAAK;kBAER;;;;;;AAGP;MATgB;AAWT,SAAS,YAAY,KAAsC;QAAtC,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,GAAtC;IAC1B,qBACE,uMAAC;QAAI,WAAW,AAAC,OAAgB,OAAV;QAAc,GAAG,KAAK;kBAC1C;;;;;;AAGP;MANgB","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/components/ui/card.jsx"],"sourcesContent":["export function Card({ children }) {\r\n  return <div className=\"bg-white rounded-xl shadow\">{children}</div>\r\n}\r\n\r\nexport function CardContent({ children, className }) {\r\n  return <div className={className}>{children}</div>\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAO,SAAS,KAAK,KAAY;QAAZ,EAAE,QAAQ,EAAE,GAAZ;IACnB,qBAAO,uMAAC;QAAI,WAAU;kBAA8B;;;;;;AACtD;KAFgB;AAIT,SAAS,YAAY,KAAuB;QAAvB,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAvB;IAC1B,qBAAO,uMAAC;QAAI,WAAW;kBAAY;;;;;;AACrC;MAFgB","debugId":null}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/cashflowChart.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\nimport { CardContent } from \"@/components/ui/card\";\r\n\r\n// Helper to format currency\r\nconst formatCurrency = (value) =>\r\n  `â‚±${new Intl.NumberFormat(\"en-PH\").format(value)}`;\r\n\r\n// Custom tooltip to show all values\r\nconst CustomTooltip = ({ active, payload, label }) => {\r\n  if (active && payload && payload.length) {\r\n    const data = payload.reduce((acc, item) => {\r\n      acc[item.name] = item.value;\r\n      return acc;\r\n    }, {});\r\n    return (\r\n      <div className=\"bg-white border p-2 shadow rounded text-sm\">\r\n        <p className=\"font-semibold mb-1\">{label}</p>\r\n        <p>Income: {formatCurrency(data[\"Income\"] || 0)}</p>\r\n        <p>Expense: {formatCurrency(data[\"Expense\"] || 0)}</p>\r\n        <p>Net: {formatCurrency(data[\"Monthly Surplus / Deficit\"] || 0)}</p>\r\n        <p>Running Balance: {formatCurrency(data[\"Running Balance\"] || 0)}</p>\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default function CashflowChart({ data = [] }) {\r\n  // Use data directly; `net` and `balance` are already in `chartData`\r\n  const processedData = data.map((item) => ({\r\n    ...item,\r\n    income: item.income || 0,\r\n    expense: item.expense || 0,\r\n    net: item.net || 0,\r\n    balance: item.balance || 0,\r\n  }));\r\n\r\n  // Summary totals\r\n  const totalIncome = processedData.reduce((sum, i) => sum + i.income, 0);\r\n  const totalExpense = processedData.reduce((sum, i) => sum + i.expense, 0);\r\n  const runningBalance = processedData.length > 0\r\n  ? processedData[processedData.length - 1].balance\r\n  : 0;\r\n  return (\r\n    <CardContent className=\"p-4\">\r\n      {/* Summary */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-lg font-semibold\">Monthly Income vs Expense</h2>\r\n      </div>\r\n\r\n      {/* Chart */}\r\n      <ResponsiveContainer width=\"100%\" height={600}>\r\n        <LineChart data={processedData} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"month\" />\r\n          <YAxis tickFormatter={(v) => `${v / 1000}k`} />\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Legend />\r\n          <Line type=\"monotone\" dataKey=\"income\" stroke=\"#16a34a\" name=\"Income\" />\r\n          <Line type=\"monotone\" dataKey=\"expense\" stroke=\"#dc2626\" name=\"Expense\" />\r\n          <Line type=\"monotone\" dataKey=\"net\" stroke=\"#2563eb\" name=\"Monthly Surplus / Deficit\" />\r\n          <Line type=\"monotone\" dataKey=\"balance\" stroke=\"#9333ea\" name=\"Running Balance\" strokeWidth={2} />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </CardContent>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAZA;;;;AAcA,4BAA4B;AAC5B,MAAM,iBAAiB,CAAC,QACtB,AAAC,IAAgD,OAA7C,IAAI,KAAK,YAAY,CAAC,SAAS,MAAM,CAAC;AAE5C,oCAAoC;AACpC,MAAM,gBAAgB;QAAC,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE;IAC/C,IAAI,UAAU,WAAW,QAAQ,MAAM,EAAE;QACvC,MAAM,OAAO,QAAQ,MAAM,CAAC,CAAC,KAAK;YAChC,GAAG,CAAC,KAAK,IAAI,CAAC,GAAG,KAAK,KAAK;YAC3B,OAAO;QACT,GAAG,CAAC;QACJ,qBACE,uMAAC;YAAI,WAAU;;8BACb,uMAAC;oBAAE,WAAU;8BAAsB;;;;;;8BACnC,uMAAC;;wBAAE;wBAAS,eAAe,IAAI,CAAC,SAAS,IAAI;;;;;;;8BAC7C,uMAAC;;wBAAE;wBAAU,eAAe,IAAI,CAAC,UAAU,IAAI;;;;;;;8BAC/C,uMAAC;;wBAAE;wBAAM,eAAe,IAAI,CAAC,4BAA4B,IAAI;;;;;;;8BAC7D,uMAAC;;wBAAE;wBAAkB,eAAe,IAAI,CAAC,kBAAkB,IAAI;;;;;;;;;;;;;IAGrE;IACA,OAAO;AACT;KAjBM;AAmBS,SAAS,cAAc,KAAa;QAAb,EAAE,OAAO,EAAE,EAAE,GAAb;IACpC,oEAAoE;IACpE,MAAM,gBAAgB,KAAK,GAAG,CAAC,CAAC,OAAS,CAAC;YACxC,GAAG,IAAI;YACP,QAAQ,KAAK,MAAM,IAAI;YACvB,SAAS,KAAK,OAAO,IAAI;YACzB,KAAK,KAAK,GAAG,IAAI;YACjB,SAAS,KAAK,OAAO,IAAI;QAC3B,CAAC;IAED,iBAAiB;IACjB,MAAM,cAAc,cAAc,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IACrE,MAAM,eAAe,cAAc,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,OAAO,EAAE;IACvE,MAAM,iBAAiB,cAAc,MAAM,GAAG,IAC5C,aAAa,CAAC,cAAc,MAAM,GAAG,EAAE,CAAC,OAAO,GAC/C;IACF,qBACE,uMAAC,qJAAW;QAAC,WAAU;;0BAErB,uMAAC;gBAAI,WAAU;0BACb,cAAA,uMAAC;oBAAG,WAAU;8BAAwB;;;;;;;;;;;0BAIxC,uMAAC,uMAAmB;gBAAC,OAAM;gBAAO,QAAQ;0BACxC,cAAA,uMAAC,+KAAS;oBAAC,MAAM;oBAAe,QAAQ;wBAAE,KAAK;wBAAI,OAAO;wBAAI,MAAM;wBAAG,QAAQ;oBAAE;;sCAC/E,uMAAC,2LAAa;4BAAC,iBAAgB;;;;;;sCAC/B,uMAAC,2KAAK;4BAAC,SAAQ;;;;;;sCACf,uMAAC,2KAAK;4BAAC,eAAe,CAAC,IAAM,AAAC,GAAW,OAAT,IAAI,MAAK;;;;;;sCACzC,uMAAC,+KAAO;4BAAC,uBAAS,uMAAC;;;;;;;;;;sCACnB,uMAAC,6KAAM;;;;;sCACP,uMAAC,yKAAI;4BAAC,MAAK;4BAAW,SAAQ;4BAAS,QAAO;4BAAU,MAAK;;;;;;sCAC7D,uMAAC,yKAAI;4BAAC,MAAK;4BAAW,SAAQ;4BAAU,QAAO;4BAAU,MAAK;;;;;;sCAC9D,uMAAC,yKAAI;4BAAC,MAAK;4BAAW,SAAQ;4BAAM,QAAO;4BAAU,MAAK;;;;;;sCAC1D,uMAAC,yKAAI;4BAAC,MAAK;4BAAW,SAAQ;4BAAU,QAAO;4BAAU,MAAK;4BAAkB,aAAa;;;;;;;;;;;;;;;;;;;;;;;AAKvG;MAvCwB","debugId":null}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/useCashflowData.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"../../../../lib/supabaseClient\";\r\n\r\nexport function useCashflowData(year) {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [chartData, setChartData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (year) fetchCashflow();\r\n  }, [year]);\r\n\r\n  const fetchCashflow = async () => {\r\n    setLoading(true);\r\n\r\n    const startDate = `${year}-01-01`;\r\n    const endDate = `${year}-12-31`;\r\n\r\n    // 1ï¸âƒ£ Fetch transactions FOR SELECTED YEAR ONLY\r\n    const { data, error } = await supabase\r\n      .from(\"transactions\")\r\n      .select(\"*\")\r\n      .gte(\"date\", startDate)\r\n      .lte(\"date\", endDate)\r\n      .order(\"date\", { ascending: true });\r\n\r\n    if (error) {\r\n      console.error(\"âŒ Supabase fetch error:\", error.message);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // 2ï¸âƒ£ Clean numeric values\r\n    const mapped = (data || [])\r\n      .filter((row) => row.date)\r\n      .map((row) => ({\r\n        ...row,\r\n        deposit: Number(String(row.deposit || \"0\").replace(/[â‚±, ]/g, \"\")),\r\n        withdrawal: Number(String(row.withdrawal || \"0\").replace(/[â‚±, ]/g, \"\")),\r\n        balance: Number(String(row.balance || \"0\").replace(/[â‚±, ]/g, \"\")),\r\n\r\n        // OPTIONAL: normalize categories (safe)\r\n        incomeCategory: row.income_category || row.category || null,\r\n        expenseCategory: row.expense_category || row.category || null,\r\n      }));\r\n\r\n    setTransactions(mapped);\r\n\r\n    // 3ï¸âƒ£ Aggregate per month\r\n    const grouped = {};\r\n\r\n    mapped.forEach((t) => {\r\n      const d = new Date(t.date);\r\n      const monthKey = d.toLocaleString(\"default\", {\r\n        month: \"short\",\r\n        year: \"numeric\",\r\n      });\r\n\r\n      if (!grouped[monthKey]) {\r\n        grouped[monthKey] = {\r\n          month: monthKey,\r\n          income: 0,\r\n          expense: 0,\r\n          balance: 0,\r\n        };\r\n      }\r\n\r\n      grouped[monthKey].income += t.deposit || 0;\r\n      grouped[monthKey].expense += t.withdrawal || 0;\r\n\r\n      // last balance of the month\r\n      grouped[monthKey].balance = t.balance || grouped[monthKey].balance;\r\n    });\r\n\r\n    const monthlyArray = Object.values(grouped)\r\n      .sort((a, b) => new Date(a.month) - new Date(b.month))\r\n      .map((g) => ({\r\n        ...g,\r\n        net: g.income - g.expense,\r\n      }));\r\n\r\n    setChartData(monthlyArray);\r\n    setLoading(false);\r\n  };\r\n\r\n  return {\r\n    transactions,\r\n    chartData,\r\n    loading,\r\n    refetch: fetchCashflow,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAKO,SAAS,gBAAgB,IAAI;;IAClC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,mLAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,mLAAQ,EAAC,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,mLAAQ,EAAC;IAEvC,IAAA,oLAAS;qCAAC;YACR,IAAI,MAAM;QACZ;oCAAG;QAAC;KAAK;IAET,MAAM,gBAAgB;QACpB,WAAW;QAEX,MAAM,YAAY,AAAC,GAAO,OAAL,MAAK;QAC1B,MAAM,UAAU,AAAC,GAAO,OAAL,MAAK;QAExB,gDAAgD;QAChD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACnC,IAAI,CAAC,gBACL,MAAM,CAAC,KACP,GAAG,CAAC,QAAQ,WACZ,GAAG,CAAC,QAAQ,SACZ,KAAK,CAAC,QAAQ;YAAE,WAAW;QAAK;QAEnC,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,2BAA2B,MAAM,OAAO;YACtD,WAAW;YACX;QACF;QAEA,2BAA2B;QAC3B,MAAM,SAAS,CAAC,QAAQ,EAAE,EACvB,MAAM,CAAC,CAAC,MAAQ,IAAI,IAAI,EACxB,GAAG,CAAC,CAAC,MAAQ,CAAC;gBACb,GAAG,GAAG;gBACN,SAAS,OAAO,OAAO,IAAI,OAAO,IAAI,KAAK,OAAO,CAAC,UAAU;gBAC7D,YAAY,OAAO,OAAO,IAAI,UAAU,IAAI,KAAK,OAAO,CAAC,UAAU;gBACnE,SAAS,OAAO,OAAO,IAAI,OAAO,IAAI,KAAK,OAAO,CAAC,UAAU;gBAE7D,wCAAwC;gBACxC,gBAAgB,IAAI,eAAe,IAAI,IAAI,QAAQ,IAAI;gBACvD,iBAAiB,IAAI,gBAAgB,IAAI,IAAI,QAAQ,IAAI;YAC3D,CAAC;QAEH,gBAAgB;QAEhB,0BAA0B;QAC1B,MAAM,UAAU,CAAC;QAEjB,OAAO,OAAO,CAAC,CAAC;YACd,MAAM,IAAI,IAAI,KAAK,EAAE,IAAI;YACzB,MAAM,WAAW,EAAE,cAAc,CAAC,WAAW;gBAC3C,OAAO;gBACP,MAAM;YACR;YAEA,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;gBACtB,OAAO,CAAC,SAAS,GAAG;oBAClB,OAAO;oBACP,QAAQ;oBACR,SAAS;oBACT,SAAS;gBACX;YACF;YAEA,OAAO,CAAC,SAAS,CAAC,MAAM,IAAI,EAAE,OAAO,IAAI;YACzC,OAAO,CAAC,SAAS,CAAC,OAAO,IAAI,EAAE,UAAU,IAAI;YAE7C,4BAA4B;YAC5B,OAAO,CAAC,SAAS,CAAC,OAAO,GAAG,EAAE,OAAO,IAAI,OAAO,CAAC,SAAS,CAAC,OAAO;QACpE;QAEA,MAAM,eAAe,OAAO,MAAM,CAAC,SAChC,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,KAAK,IAAI,IAAI,KAAK,EAAE,KAAK,GACnD,GAAG,CAAC,CAAC,IAAM,CAAC;gBACX,GAAG,CAAC;gBACJ,KAAK,EAAE,MAAM,GAAG,EAAE,OAAO;YAC3B,CAAC;QAEH,aAAa;QACb,WAAW;IACb;IAEA,OAAO;QACL;QACA;QACA;QACA,SAAS;IACX;AACF;GAxFgB","debugId":null}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/kpiCards.jsx"],"sourcesContent":["import {\r\n  ArrowUpIcon,\r\n  ArrowDownIcon,\r\n  BanknotesIcon,\r\n  ChartBarIcon,\r\n  CurrencyDollarIcon\r\n} from \"@heroicons/react/24/outline\";\r\n\r\nexport default function KPICards({ totals }) {\r\n  const {\r\n    beginningBalance = 0,\r\n    totalIncome = 0,\r\n    totalExpense = 0,\r\n    runningBalance = 0,\r\n    monthlySurplus = 0,\r\n  } = totals;\r\n\r\n  const cards = [\r\n    {\r\n      title: \"Beginning Balance\",\r\n      value: `â‚±${Number(beginningBalance).toLocaleString()}`,\r\n      icon: CurrencyDollarIcon,\r\n      color: \"text-blue-600\",\r\n      bg: \"bg-blue-100\"\r\n    },\r\n    {\r\n      title: \"Income\",\r\n      value: `â‚±${Number(totalIncome).toLocaleString()}`,\r\n      icon: ArrowUpIcon,\r\n      color: \"text-green-600\",\r\n      bg: \"bg-green-100\"\r\n    },\r\n    {\r\n      title: \"Expense\",\r\n      value: `â‚±${Number(totalExpense).toLocaleString()}`,\r\n      icon: ArrowDownIcon,\r\n      color: \"text-red-600\",\r\n      bg: \"bg-red-100\"\r\n    },\r\n    {\r\n      title: \"Running Balance\",\r\n      value: `â‚±${Number(runningBalance).toLocaleString()}`,\r\n      icon: BanknotesIcon,\r\n      color: \"text-purple-600\",\r\n      bg: \"bg-purple-100\"\r\n    },\r\n    {\r\n      title: \"Monthly Surplus\",\r\n      value: `â‚±${Number(monthlySurplus).toLocaleString()}`,\r\n      icon: ChartBarIcon,\r\n      color: monthlySurplus >= 0 ? \"text-green-600\" : \"text-red-600\",\r\n      bg: monthlySurplus >= 0 ? \"bg-green-100\" : \"bg-red-100\"\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-6\">\r\n      {cards.map((card, index) => (\r\n        <div key={index} className=\"flex items-center p-4 bg-white rounded-xl shadow-sm border\">\r\n          <div className={`p-3 rounded-full ${card.bg} ${card.color} mr-4`}>\r\n            <card.icon className=\"h-6 w-6\" />\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm text-gray-500\">{card.title}</p>\r\n            <p className=\"text-xl font-semibold\">{card.value}</p>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAQe,SAAS,SAAS,KAAU;QAAV,EAAE,MAAM,EAAE,GAAV;IAC/B,MAAM,EACJ,mBAAmB,CAAC,EACpB,cAAc,CAAC,EACf,eAAe,CAAC,EAChB,iBAAiB,CAAC,EAClB,iBAAiB,CAAC,EACnB,GAAG;IAEJ,MAAM,QAAQ;QACZ;YACE,OAAO;YACP,OAAO,AAAC,IAA6C,OAA1C,OAAO,kBAAkB,cAAc;YAClD,MAAM,sQAAkB;YACxB,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,OAAO,AAAC,IAAwC,OAArC,OAAO,aAAa,cAAc;YAC7C,MAAM,iPAAW;YACjB,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,OAAO,AAAC,IAAyC,OAAtC,OAAO,cAAc,cAAc;YAC9C,MAAM,uPAAa;YACnB,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,OAAO,AAAC,IAA2C,OAAxC,OAAO,gBAAgB,cAAc;YAChD,MAAM,uPAAa;YACnB,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,OAAO,AAAC,IAA2C,OAAxC,OAAO,gBAAgB,cAAc;YAChD,MAAM,oPAAY;YAClB,OAAO,kBAAkB,IAAI,mBAAmB;YAChD,IAAI,kBAAkB,IAAI,iBAAiB;QAC7C;KACD;IAED,qBACE,uMAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,uMAAC;gBAAgB,WAAU;;kCACzB,uMAAC;wBAAI,WAAW,AAAC,oBAA8B,OAAX,KAAK,EAAE,EAAC,KAAc,OAAX,KAAK,KAAK,EAAC;kCACxD,cAAA,uMAAC,KAAK,IAAI;4BAAC,WAAU;;;;;;;;;;;kCAEvB,uMAAC;;0CACC,uMAAC;gCAAE,WAAU;0CAAyB,KAAK,KAAK;;;;;;0CAChD,uMAAC;gCAAE,WAAU;0CAAyB,KAAK,KAAK;;;;;;;;;;;;;eAN1C;;;;;;;;;;AAYlB;KA9DwB","debugId":null}},
    {"offset": {"line": 568, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/incomePieChart.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nconst incomeCOLORS = [\r\n  \"#22c55e\", \"#0ea5e9\", \"#6366f1\", \"#14b8a6\",\r\n  \"#84cc16\", \"#eab308\", \"#f97316\", \"#ef4444\"\r\n];\r\n\r\n// --- AUTO CATEGORIZER FOR INCOME ---\r\nexport function categorizeIncome(description = \"\") {\r\n  const t = description.toLowerCase();\r\n \r\n\r\n\r\n  if (t.includes(\"clearance\") || t.includes(\"certification\")) {\r\n    return \"Clearance & Certification fees\";\r\n  }\r\n\r\n  if (\r\n    t.includes(\"business\") ||\r\n    t.includes(\"fees/income\") ||\r\n    t.includes(\"other income\")\r\n  ) {\r\n    return \"Other business fees/income\";\r\n  }\r\n\r\n  if (t.includes(\"rental\")) return \"Rental fees\";\r\n  if (t.includes(\"interest\")) return \"Interest income\";\r\n\r\n  if (t.includes(\"real property tax\") || t.includes(\"rpt\")) {\r\n    return \"Real Property Tax\";\r\n  }\r\n\r\n  if (t.includes(\"community tax\")) {\r\n    return \"Community Tax\";\r\n  }\r\n\r\n  if (t.includes(\"subsidy\")) {\r\n    return \"Subsidy from other LGUs\";\r\n  }\r\n\r\n  if (\r\n    t.includes(\"nta\") ||\r\n    t.includes(\"nta released\") ||\r\n    t.includes(\"National Taxation Allocation\")\r\n  ) {\r\n    return \"National Taxation Allocation (NTA)\";\r\n  }\r\n\r\n  return \"Other Income\";\r\n}\r\n\r\nexport default function IncomePieChart({ transactions }) {\r\n  // Only deposits\r\n  const incomeTx = transactions.filter(t => t.deposit > 0);\r\n\r\n  // =========================\r\n  // GROUP INCOME\r\n  // =========================\r\n  const grouped = {};\r\n  incomeTx.forEach(t => {\r\n    const category = categorizeIncome(t.description || \"\");\r\n    grouped[category] = (grouped[category] || 0) + Number(t.deposit);\r\n  });\r\n\r\n  // =========================\r\n  // BUILD CHART DATA\r\n  // =========================\r\n  const chartData = Object.entries(grouped).map(\r\n    ([name, value]) => ({ name, value })\r\n  );\r\n\r\n  // =========================\r\n  // STABLE COLOR MAP (KEY FIX)\r\n  // =========================\r\n  const colorMap = {};\r\n  chartData.forEach((item, index) => {\r\n    colorMap[item.name] =\r\n      incomeCOLORS[index % incomeCOLORS.length];\r\n  });\r\n\r\n  return (\r\n<div className=\"w-full flex flex-col items-center gap-8\">\r\n\r\n      {/* PIE */}\r\n      <div className=\"w-[260px]\">\r\n        <ResponsiveContainer width=\"100%\" aspect={1}>\r\n          <PieChart>\r\n            <Pie\r\n              data={chartData}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              outerRadius=\"80%\"\r\n              dataKey=\"value\"\r\n              label={false}\r\n              labelLine={false}\r\n            >\r\n              {chartData.map((item) => (\r\n                <Cell\r\n                  key={item.name}\r\n                  fill={colorMap[item.name]}\r\n                />\r\n              ))}\r\n            </Pie>\r\n\r\n            <Tooltip />\r\n          </PieChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n      {/* âœ… CUSTOM LEGEND (NO DUPLICATES, MATCHING COLORS) */}\r\n<div className=\"mt-4 w-full max-w-xs space-y-2 flex flex-col items-start text-left\">\r\n        {chartData.map((item) => (\r\n          <div\r\n            key={item.name}\r\n            className=\"flex items-center gap-2 text-m\"\r\n          >\r\n            <span\r\n              className=\"w-3 h-3 rounded-sm\"\r\n              style={{ backgroundColor: colorMap[item.name] }}\r\n            />\r\n            <span className=\"text-gray-700\">\r\n              {item.name}\r\n            </span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAUA,MAAM,eAAe;IACnB;IAAW;IAAW;IAAW;IACjC;IAAW;IAAW;IAAW;CAClC;AAGM,SAAS;QAAiB,cAAA,iEAAc;IAC7C,MAAM,IAAI,YAAY,WAAW;IAIjC,IAAI,EAAE,QAAQ,CAAC,gBAAgB,EAAE,QAAQ,CAAC,kBAAkB;QAC1D,OAAO;IACT;IAEA,IACE,EAAE,QAAQ,CAAC,eACX,EAAE,QAAQ,CAAC,kBACX,EAAE,QAAQ,CAAC,iBACX;QACA,OAAO;IACT;IAEA,IAAI,EAAE,QAAQ,CAAC,WAAW,OAAO;IACjC,IAAI,EAAE,QAAQ,CAAC,aAAa,OAAO;IAEnC,IAAI,EAAE,QAAQ,CAAC,wBAAwB,EAAE,QAAQ,CAAC,QAAQ;QACxD,OAAO;IACT;IAEA,IAAI,EAAE,QAAQ,CAAC,kBAAkB;QAC/B,OAAO;IACT;IAEA,IAAI,EAAE,QAAQ,CAAC,YAAY;QACzB,OAAO;IACT;IAEA,IACE,EAAE,QAAQ,CAAC,UACX,EAAE,QAAQ,CAAC,mBACX,EAAE,QAAQ,CAAC,iCACX;QACA,OAAO;IACT;IAEA,OAAO;AACT;AAEe,SAAS,eAAe,KAAgB;QAAhB,EAAE,YAAY,EAAE,GAAhB;IACrC,gBAAgB;IAChB,MAAM,WAAW,aAAa,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,GAAG;IAEtD,4BAA4B;IAC5B,eAAe;IACf,4BAA4B;IAC5B,MAAM,UAAU,CAAC;IACjB,SAAS,OAAO,CAAC,CAAA;QACf,MAAM,WAAW,iBAAiB,EAAE,WAAW,IAAI;QACnD,OAAO,CAAC,SAAS,GAAG,CAAC,OAAO,CAAC,SAAS,IAAI,CAAC,IAAI,OAAO,EAAE,OAAO;IACjE;IAEA,4BAA4B;IAC5B,mBAAmB;IACnB,4BAA4B;IAC5B,MAAM,YAAY,OAAO,OAAO,CAAC,SAAS,GAAG,CAC3C;YAAC,CAAC,MAAM,MAAM;eAAM;YAAE;YAAM;QAAM;;IAGpC,4BAA4B;IAC5B,6BAA6B;IAC7B,4BAA4B;IAC5B,MAAM,WAAW,CAAC;IAClB,UAAU,OAAO,CAAC,CAAC,MAAM;QACvB,QAAQ,CAAC,KAAK,IAAI,CAAC,GACjB,YAAY,CAAC,QAAQ,aAAa,MAAM,CAAC;IAC7C;IAEA,qBACF,uMAAC;QAAI,WAAU;;0BAGT,uMAAC;gBAAI,WAAU;0BACb,cAAA,uMAAC,uMAAmB;oBAAC,OAAM;oBAAO,QAAQ;8BACxC,cAAA,uMAAC,6KAAQ;;0CACP,uMAAC,mKAAG;gCACF,MAAM;gCACN,IAAG;gCACH,IAAG;gCACH,aAAY;gCACZ,SAAQ;gCACR,OAAO;gCACP,WAAW;0CAEV,UAAU,GAAG,CAAC,CAAC,qBACd,uMAAC,yKAAI;wCAEH,MAAM,QAAQ,CAAC,KAAK,IAAI,CAAC;uCADpB,KAAK,IAAI;;;;;;;;;;0CAMpB,uMAAC,+KAAO;;;;;;;;;;;;;;;;;;;;;0BAMpB,uMAAC;gBAAI,WAAU;0BACN,UAAU,GAAG,CAAC,CAAC,qBACd,uMAAC;wBAEC,WAAU;;0CAEV,uMAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,iBAAiB,QAAQ,CAAC,KAAK,IAAI,CAAC;gCAAC;;;;;;0CAEhD,uMAAC;gCAAK,WAAU;0CACb,KAAK,IAAI;;;;;;;uBARP,KAAK,IAAI;;;;;;;;;;;;;;;;AAe1B;KA7EwB","debugId":null}},
    {"offset": {"line": 749, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/expensePieChart.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nconst expenseCOLORS = [\r\n  \"#ef4444\", \"#f97316\", \"#eab308\", \"#84cc16\", \"#22c55e\",\r\n  \"#0ea5e9\", \"#6366f1\", \"#a855f7\", \"#ec4899\", \"#14b8a6\"\r\n];\r\n\r\n// --- COA-COMPLIANT EXPENSE CATEGORIZER ---\r\nexport function categorizeExpense(description = \"\") {\r\n  const t = description.toLowerCase();\r\n\r\n  if (\r\n    t.includes(\"hon.\") ||\r\n    t.includes(\"honor\") ||\r\n    t.includes(\"appointed\") ||\r\n    t.includes(\"elected\") ||\r\n    t.includes(\"tanod\") ||\r\n    t.includes(\"bhw\") ||\r\n    t.includes(\"chief\")\r\n  ) return \"PS (Personal Services)\";\r\n\r\n  if (t.includes(\"sk\")) return \"10% SK Fund\";\r\n\r\n  if (\r\n    t.includes(\"fire\") ||\r\n    t.includes(\"safety drill\") ||\r\n    t.includes(\"disaster\") ||\r\n    t.includes(\"rescue\") ||\r\n    t.includes(\"drrm\")\r\n  ) return \"5% BDRRM Fund\";\r\n\r\n  if (\r\n    t.includes(\"women\") ||\r\n    t.includes(\"senior\") ||\r\n    t.includes(\"pwd\") ||\r\n    t.includes(\"nutrition\") ||\r\n    t.includes(\"feeding\") ||\r\n    t.includes(\"deworm\") ||\r\n    t.includes(\"gap\")\r\n  ) return \"GAD Programs\";\r\n\r\n  if (\r\n    t.includes(\"construction\") ||\r\n    t.includes(\"improvement\") ||\r\n    t.includes(\"materials\") ||\r\n    t.includes(\"solar\") ||\r\n    t.includes(\"equipment\") ||\r\n    t.includes(\"road\") ||\r\n    t.includes(\"building\") ||\r\n    t.includes(\"water system\") ||\r\n    t.includes(\"rehab\")\r\n  ) return \"20% BDF / Capital Outlay\";\r\n\r\n  if (\r\n    t.includes(\"travel\") ||\r\n    t.includes(\"seminar\") ||\r\n    t.includes(\"training\") ||\r\n    t.includes(\"supplies\") ||\r\n    t.includes(\"office\") ||\r\n    t.includes(\"water\") ||\r\n    t.includes(\"electric\") ||\r\n    t.includes(\"bond\") ||\r\n    t.includes(\"security\") ||\r\n    t.includes(\"bookkeeper\") ||\r\n    t.includes(\"lumber\") ||\r\n    t.includes(\"fuel\") ||\r\n    t.includes(\"diesel\") ||\r\n    t.includes(\"registration\") ||\r\n    t.includes(\"check book\") ||\r\n    t.includes(\"maintenance\") ||\r\n    t.includes(\"interest\") ||\r\n    t.includes(\"tax\") ||\r\n    t.includes(\"pcf\")\r\n  ) return \"MOOE\";\r\n\r\n  return \"Other / Non-Office\";\r\n}\r\n\r\nexport default function ExpensePieChart({ transactions }) {\r\n  const expenseTx = transactions.filter(t => t.withdrawal > 0);\r\n\r\n  // =========================\r\n  // GROUP EXPENSES\r\n  // =========================\r\n  const grouped = {};\r\n  expenseTx.forEach(t => {\r\n    const category = categorizeExpense(t.description || \"\");\r\n    grouped[category] = (grouped[category] || 0) + Number(t.withdrawal);\r\n  });\r\n\r\n  // =========================\r\n  // BUILD STABLE CHART DATA\r\n  // =========================\r\n  const chartData = Object.entries(grouped).map(\r\n    ([name, value]) => ({ name, value })\r\n  );\r\n\r\n  // =========================\r\n  // STABLE COLOR MAP (KEY FIX)\r\n  // =========================\r\n  const colorMap = {};\r\n  chartData.forEach((item, index) => {\r\n    colorMap[item.name] =\r\n      expenseCOLORS[index % expenseCOLORS.length];\r\n  });\r\n\r\n  return (\r\n<div className=\"w-full flex flex-col items-center gap-8\">\r\n      {/* PIE */}\r\n      <div className=\"w-[260px]\">\r\n        <ResponsiveContainer width=\"100%\" aspect={1}>\r\n          <PieChart>\r\n            <Pie\r\n              data={chartData}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              outerRadius=\"80%\"\r\n              dataKey=\"value\"\r\n              label={false}\r\n              labelLine={false}\r\n            >\r\n              {chartData.map((item) => (\r\n                <Cell\r\n                  key={item.name}\r\n                  fill={colorMap[item.name]}\r\n                />\r\n              ))}\r\n            </Pie>\r\n\r\n            <Tooltip />\r\n          </PieChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n     {/* CUSTOM LEGEND */}\r\n<div className=\"mt-4 w-full max-w-xs space-y-2 flex flex-col items-start text-left\">\r\n  {chartData.map((item) => (\r\n    <div\r\n      key={item.name}\r\n      className=\"flex items-center gap-2 text-m\"\r\n    >\r\n      <span\r\n        className=\"w-3 h-3 rounded-sm\"\r\n        style={{ backgroundColor: colorMap[item.name] }}\r\n      />\r\n      <span className=\"text-gray-700\">\r\n        {item.name}\r\n      </span>\r\n    </div>\r\n  ))}\r\n</div>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 917, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/breakdownChart.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport IncomePieChart from \"./incomePieChart\";\r\nimport ExpensePieChart from \"./expensePieChart\";\r\n\r\nexport default function BreakdownChart({ transactions }) {\r\n  const [mode, setMode] = useState(\"income\");\r\n\r\n  // --- LABELS FOR LEGENDS ---\r\n  const incomeLabels = [\r\n    \"Internal Revenue allotment (IRA)\",\r\n    \"Interest income\",\r\n    \"Other Income\",\r\n    \"Rental fees\",\r\n    \"Clearance & Certification fees\",\r\n    \"Other business fees/income\",\r\n    \"Community Tax\",\r\n    \"Real Property Tax\",\r\n    \"Subsidy from other LGUs\"\r\n  ];\r\n\r\n  const expenseLabels = [\r\n    \"PS (Personal Services)\",\r\n    \"MOOE\",\r\n    \"20% BDF / Capital Outlay\",\r\n    \"5% BDRRM Fund\",\r\n    \"Other / Non-Office\"\r\n  ];\r\n\r\n  // --- COLORS (must match your pie charts) ---\r\n const incomeCOLORS = [\r\n  \"#22c55e\", \"#0ea5e9\", \"#6366f1\", \"#14b8a6\",\r\n  \"#84cc16\", \"#eab308\", \"#f97316\", \"#ef4444\"\r\n];\r\n\r\nconst expenseCOLORS = [\r\n  \"#ef4444\", \"#f97316\", \"#eab308\", \"#84cc16\", \"#22c55e\",\r\n  \"#0ea5e9\", \"#6366f1\", \"#a855f7\", \"#ec4899\", \"#14b8a6\"\r\n];\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"rounded-xl border border-emerald-200 bg-white shadow-md p-4\">\r\n\r\n      {/* HEADER */}\r\n      <div className=\"flex items-center justify-between border-b pb-2 mb-3\">\r\n        <h2 className=\"text-emerald-700 font-semibold text-sm\">\r\n          Category Breakdown\r\n        </h2>\r\n\r\n        <select\r\n          value={mode}\r\n          onChange={(e) => setMode(e.target.value)}\r\n          className=\"border rounded-md px-2 py-1 text-sm\"\r\n        >\r\n          <option value=\"income\">Income</option>\r\n          <option value=\"expense\">Expense</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* --- PIE CHART --- */}\r\n      <div className=\"w-full flex justify-center\">\r\n        {mode === \"income\" ? (\r\n          <IncomePieChart transactions={transactions} />\r\n        ) : (\r\n          <ExpensePieChart transactions={transactions} />\r\n        )}\r\n      </div>\r\n\r\n  \r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS,eAAe,KAAgB;QAAhB,EAAE,YAAY,EAAE,GAAhB;;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,mLAAQ,EAAC;IAEjC,6BAA6B;IAC7B,MAAM,eAAe;QACnB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,gBAAgB;QACpB;QACA;QACA;QACA;QACA;KACD;IAED,8CAA8C;IAC/C,MAAM,eAAe;QACpB;QAAW;QAAW;QAAW;QACjC;QAAW;QAAW;QAAW;KAClC;IAED,MAAM,gBAAgB;QACpB;QAAW;QAAW;QAAW;QAAW;QAC5C;QAAW;QAAW;QAAW;QAAW;KAC7C;IAKC,qBACE,uMAAC;QAAI,WAAU;;0BAGb,uMAAC;gBAAI,WAAU;;kCACb,uMAAC;wBAAG,WAAU;kCAAyC;;;;;;kCAIvD,uMAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACvC,WAAU;;0CAEV,uMAAC;gCAAO,OAAM;0CAAS;;;;;;0CACvB,uMAAC;gCAAO,OAAM;0CAAU;;;;;;;;;;;;;;;;;;0BAK5B,uMAAC;gBAAI,WAAU;0BACZ,SAAS,yBACR,uMAAC,0LAAc;oBAAC,cAAc;;;;;yCAE9B,uMAAC,2LAAe;oBAAC,cAAc;;;;;;;;;;;;;;;;;AAQzC;GAtEwB;KAAA","debugId":null}},
    {"offset": {"line": 1062, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card\";\r\nimport CashflowChart from \"./components/cashflowChart.jsx\";\r\nimport { useCashflowData } from \"./components/useCashflowData\";\r\nimport KPICards from \"./components/kpiCards\";\r\nimport BreakdownChart from \"./components/breakdownChart\";\r\n\r\nexport default function Page() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  \r\n\r\n  \r\n\r\n  // =========================\r\n  // YEAR SETUP (2025 ONWARDS)\r\n  // =========================\r\n  const START_YEAR = 2025;\r\n  const currentYear = new Date().getFullYear();\r\n\r\n  // Generate years from 2025 â†’ currentYear + 5\r\n  const years = Array.from(\r\n    { length: currentYear - START_YEAR + 6 },\r\n    (_, i) => START_YEAR + i\r\n  );\r\n\r\n  // Year from URL or fallback to latest available\r\n  const yearFromUrl = Number(searchParams.get(\"year\"));\r\n  const defaultYear = years.includes(yearFromUrl)\r\n    ? yearFromUrl\r\n    : currentYear >= START_YEAR\r\n    ? currentYear\r\n    : START_YEAR;\r\n\r\n  const [selectedYear, setSelectedYear] = useState(defaultYear);\r\n\r\n  // Keep state synced with URL\r\n  useEffect(() => {\r\n    if (yearFromUrl && yearFromUrl !== selectedYear) {\r\n      setSelectedYear(yearFromUrl);\r\n    }\r\n  }, [yearFromUrl]);\r\n\r\n  const recalculateBalances = (txns) => {\r\n  let runningBalance = 0;\r\n\r\n  return txns.map((t, index) => {\r\n    // Beginning balance (first row, deposit-only)\r\n    if (index === 0 && t.deposit > 0 && !t.withdrawal) {\r\n      runningBalance = t.deposit;\r\n      return { ...t, balance: runningBalance };\r\n    }\r\n\r\n    runningBalance += (t.deposit || 0) - (t.withdrawal || 0);\r\n    return { ...t, balance: runningBalance };\r\n  });\r\n};\r\n\r\n  // =========================\r\n  // DATA FETCH\r\n  // =========================\r\n  const {\r\n    transactions: fetchedTransactions,\r\n    chartData,\r\n    loading,\r\n  } = useCashflowData(selectedYear);\r\n\r\n  const [transactions, setTransactions] = useState([]);\r\n\r\nuseEffect(() => {\r\n  if (!fetchedTransactions) return;\r\n\r\n  // ðŸ”¹ 2025 = legacy data (DO NOT TOUCH balances)\r\n  if (selectedYear === 2025) {\r\n    setTransactions(fetchedTransactions);\r\n    return;\r\n  }\r\n\r\n  // ðŸ”¹ 2026+ = new accounting rules\r\n  const recalculated = recalculateBalances(fetchedTransactions);\r\n  setTransactions(recalculated);\r\n\r\n}, [fetchedTransactions, selectedYear]);\r\n\r\n\r\n  // =========================\r\n  // KPI CALCULATIONS\r\n  // =========================\r\n  const totalIncome =\r\n    chartData?.reduce((a, r) => a + (r.income || 0), 0) || 0;\r\n\r\n  const totalExpense =\r\n    chartData?.reduce((a, r) => a + (r.expense || 0), 0) || 0;\r\n\r\n  const beginningBalance =\r\n  transactions.find(\r\n    (t, i) => i === 0 && t.deposit > 0 && !t.withdrawal\r\n  )?.balance || 0;\r\n\r\nconst runningBalance =\r\n  transactions.length > 0\r\n    ? transactions[transactions.length - 1].balance\r\n    : 0;\r\n\r\n  const lastMonth = chartData.length\r\n    ? chartData[chartData.length - 1]\r\n    : null;\r\n\r\n  const monthlySurplus = lastMonth\r\n    ? (lastMonth.income || 0) - (lastMonth.expense || 0)\r\n    : 0;\r\n\r\n  const totals = {\r\n    beginningBalance,\r\n    totalIncome,\r\n    totalExpense,\r\n    runningBalance,\r\n    monthlySurplus,\r\n  };\r\n\r\n  // =========================\r\n  // LOADING STATE\r\n  // =========================\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex min-h-screen items-center justify-center bg-slate-50\">\r\n        <p className=\"text-sm text-slate-500 animate-pulse\">\r\n          Loading financial dashboardâ€¦\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // =========================\r\n  // UI\r\n  // =========================\r\n  return (\r\n    <div className=\"w-full\">\r\n\r\n      {/* HEADER */}\r\n      <header className=\"mb-6\">\r\n        <div className=\"flex items-center justify-between rounded-2xl bg-gradient-to-r from-emerald-800 via-emerald-700 to-emerald-600 px-6 py-5 shadow-sm\">\r\n          <h1 className=\"text-2xl md:text-3xl font-semibold text-white\">\r\n            Cash Flow Overview\r\n          </h1>\r\n\r\n          {/* YEAR FILTER (2025 ONWARDS, AUTO, URL-SYNCED) */}\r\n          <select\r\n  value={selectedYear}\r\n  onChange={(e) => {\r\n    const year = Number(e.target.value);\r\n    router.push(`?year=${year}`); // âœ… THIS IS THE KEY\r\n  }}\r\n  className=\"rounded-lg bg-white px-3 py-1 text-sm font-medium text-slate-800 shadow\"\r\n>\r\n  {years.map((year) => (\r\n    <option key={year} value={year}>\r\n      {year}\r\n    </option>\r\n  ))}\r\n</select>\r\n\r\n        </div>\r\n      </header>\r\n\r\n      {/* KPI SECTION */}\r\n      <section className=\"space-y-4\">\r\n        <KPICards totals={totals} />\r\n      </section>\r\n\r\n      {/* ANALYTICS GRID */}\r\n      <section className=\"grid grid-cols-1 xl:grid-cols-4 gap-5 mt-5\">\r\n\r\n        {/* MAIN CHART */}\r\n        <div className=\"xl:col-span-3\">\r\n          <Card className=\"rounded-2xl border border-slate-500 shadow-sm bg-white\">\r\n            <CardHeader className=\"border-b border-slate-500 bg-slate-50\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"h-2 w-2 rounded-full bg-emerald-500\" />\r\n                <CardTitle className=\"text-xl font-semibold text-slate-800\">\r\n                  Monthly Income vs Expense ({selectedYear})\r\n                </CardTitle>\r\n              </div>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"p-5\">\r\n              <div className=\"h-[650px]\">\r\n                <CashflowChart data={chartData} />\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* CATEGORY BREAKDOWN */}\r\n        <BreakdownChart transactions={transactions} />\r\n\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}