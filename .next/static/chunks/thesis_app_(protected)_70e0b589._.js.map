{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/lib/useBudgetData.js"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\nimport { supabase } from \"../../../../lib/supabaseClient\"\r\n\r\nexport default function useBudgetData() {\r\n  const [budgetData, setBudgetData] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  async function fetchBudgetData() {\r\n    setLoading(true)\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"yearly_budget\")\r\n      .select(\"year,total_income\")\r\n      .order(\"year\", { ascending: true })\r\n\r\n    setLoading(false)\r\n    if (error) return console.error(error)\r\n\r\n    setBudgetData(\r\n      data.map(d => ({\r\n        year: Number(d.year),\r\n        totalIncome: Number(d.total_income)\r\n      }))\r\n    )\r\n  }\r\n\r\n  return { budgetData, loading, fetchBudgetData }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;AAFA;;;AAIe,SAAS;;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,mLAAQ,EAAC,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,mLAAQ,EAAC;IAEvC,eAAe;QACb,WAAW;QAEX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,qBACP,KAAK,CAAC,QAAQ;YAAE,WAAW;QAAK;QAEnC,WAAW;QACX,IAAI,OAAO,OAAO,QAAQ,KAAK,CAAC;QAEhC,cACE,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;gBACb,MAAM,OAAO,EAAE,IAAI;gBACnB,aAAa,OAAO,EAAE,YAAY;YACpC,CAAC;IAEL;IAEA,OAAO;QAAE;QAAY;QAAS;IAAgB;AAChD;GAxBwB","debugId":null}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/lib/useBreakdownData.js"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\nimport { supabase } from \"../../../../lib/supabaseClient\"\r\n\r\nexport default function useBreakdownData() {\r\n  const [breakdownData, setBreakdownData] = useState({})\r\n\r\n  async function fetchBreakdownData() {\r\n    const { data, error } = await supabase\r\n      .from(\"barangay_budget_breakdown\")\r\n      .select(\"year, category, subcategory, description, amount\")\r\n\r\n    if (error) return console.error(error)\r\n\r\n    const grouped = {}\r\n\r\n    data.forEach(row => {\r\n      const year = Number(row.year)\r\n      if (!grouped[year]) grouped[year] = { income: {}, appropriations: {} }\r\n\r\n      const cat = row.category?.toLowerCase().includes(\"income\")\r\n        ? \"income\"\r\n        : \"appropriations\"\r\n\r\n      const label = row.subcategory || row.description || \"Uncategorized\"\r\n      const value = Number(String(row.amount).replace(/[^\\d.-]/g, \"\"))\r\n\r\n      grouped[year][cat][label] =\r\n        (grouped[year][cat][label] || 0) + value\r\n    })\r\n\r\n    setBreakdownData(grouped)\r\n  }\r\n\r\n  return { breakdownData, fetchBreakdownData }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;AAFA;;;AAIe,SAAS;;IACtB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,mLAAQ,EAAC,CAAC;IAEpD,eAAe;QACb,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACnC,IAAI,CAAC,6BACL,MAAM,CAAC;QAEV,IAAI,OAAO,OAAO,QAAQ,KAAK,CAAC;QAEhC,MAAM,UAAU,CAAC;QAEjB,KAAK,OAAO,CAAC,CAAA;gBAIC;YAHZ,MAAM,OAAO,OAAO,IAAI,IAAI;YAC5B,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,GAAG;gBAAE,QAAQ,CAAC;gBAAG,gBAAgB,CAAC;YAAE;YAErE,MAAM,MAAM,EAAA,gBAAA,IAAI,QAAQ,cAAZ,oCAAA,cAAc,WAAW,GAAG,QAAQ,CAAC,aAC7C,WACA;YAEJ,MAAM,QAAQ,IAAI,WAAW,IAAI,IAAI,WAAW,IAAI;YACpD,MAAM,QAAQ,OAAO,OAAO,IAAI,MAAM,EAAE,OAAO,CAAC,YAAY;YAE5D,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GACvB,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI;QACvC;QAEA,iBAAiB;IACnB;IAEA,OAAO;QAAE;QAAe;IAAmB;AAC7C;GA/BwB","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/expensePieChart.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nconst expenseCOLORS = [\r\n  \"#ef4444\", \"#f97316\", \"#eab308\", \"#84cc16\", \"#22c55e\",\r\n  \"#0ea5e9\", \"#6366f1\", \"#a855f7\", \"#ec4899\", \"#14b8a6\"\r\n];\r\n\r\n// --- COA-COMPLIANT EXPENSE CATEGORIZER ---\r\nexport function categorizeExpense(description = \"\") {\r\n  const t = description.toLowerCase();\r\n\r\n  if (\r\n    t.includes(\"hon.\") ||\r\n    t.includes(\"honor\") ||\r\n    t.includes(\"appointed\") ||\r\n    t.includes(\"elected\") ||\r\n    t.includes(\"tanod\") ||\r\n    t.includes(\"bhw\") ||\r\n    t.includes(\"chief\")\r\n  ) return \"PS (Personal Services)\";\r\n\r\n  if (t.includes(\"sk\")) return \"10% SK Fund\";\r\n\r\n  if (\r\n    t.includes(\"fire\") ||\r\n    t.includes(\"safety drill\") ||\r\n    t.includes(\"disaster\") ||\r\n    t.includes(\"rescue\") ||\r\n    t.includes(\"drrm\")\r\n  ) return \"5% BDRRM Fund\";\r\n\r\n  if (\r\n    t.includes(\"women\") ||\r\n    t.includes(\"senior\") ||\r\n    t.includes(\"pwd\") ||\r\n    t.includes(\"nutrition\") ||\r\n    t.includes(\"feeding\") ||\r\n    t.includes(\"deworm\") ||\r\n    t.includes(\"gap\")\r\n  ) return \"GAD Programs\";\r\n\r\n  if (\r\n    t.includes(\"construction\") ||\r\n    t.includes(\"improvement\") ||\r\n    t.includes(\"materials\") ||\r\n    t.includes(\"solar\") ||\r\n    t.includes(\"equipment\") ||\r\n    t.includes(\"road\") ||\r\n    t.includes(\"building\") ||\r\n    t.includes(\"water system\") ||\r\n    t.includes(\"rehab\")\r\n  ) return \"20% BDF / Capital Outlay\";\r\n\r\n  if (\r\n    t.includes(\"travel\") ||\r\n    t.includes(\"seminar\") ||\r\n    t.includes(\"training\") ||\r\n    t.includes(\"supplies\") ||\r\n    t.includes(\"office\") ||\r\n    t.includes(\"water\") ||\r\n    t.includes(\"electric\") ||\r\n    t.includes(\"bond\") ||\r\n    t.includes(\"security\") ||\r\n    t.includes(\"bookkeeper\") ||\r\n    t.includes(\"lumber\") ||\r\n    t.includes(\"fuel\") ||\r\n    t.includes(\"diesel\") ||\r\n    t.includes(\"registration\") ||\r\n    t.includes(\"check book\") ||\r\n    t.includes(\"maintenance\") ||\r\n    t.includes(\"interest\") ||\r\n    t.includes(\"tax\") ||\r\n    t.includes(\"pcf\")\r\n  ) return \"MOOE\";\r\n\r\n  return \"Other / Non-Office\";\r\n}\r\n\r\nexport default function ExpensePieChart({ transactions }) {\r\n  const expenseTx = transactions.filter(t => t.withdrawal > 0);\r\n\r\n  // =========================\r\n  // GROUP EXPENSES\r\n  // =========================\r\n  const grouped = {};\r\n  expenseTx.forEach(t => {\r\n    const category = categorizeExpense(t.description || \"\");\r\n    grouped[category] = (grouped[category] || 0) + Number(t.withdrawal);\r\n  });\r\n\r\n  // =========================\r\n  // BUILD STABLE CHART DATA\r\n  // =========================\r\n  const chartData = Object.entries(grouped).map(\r\n    ([name, value]) => ({ name, value })\r\n  );\r\n\r\n  // =========================\r\n  // STABLE COLOR MAP (KEY FIX)\r\n  // =========================\r\n  const colorMap = {};\r\n  chartData.forEach((item, index) => {\r\n    colorMap[item.name] =\r\n      expenseCOLORS[index % expenseCOLORS.length];\r\n  });\r\n\r\n  return (\r\n<div className=\"w-full flex flex-col items-center gap-8\">\r\n      {/* PIE */}\r\n      <div className=\"w-[260px]\">\r\n        <ResponsiveContainer width=\"100%\" aspect={1}>\r\n          <PieChart>\r\n            <Pie\r\n              data={chartData}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              outerRadius=\"80%\"\r\n              dataKey=\"value\"\r\n              label={false}\r\n              labelLine={false}\r\n            >\r\n              {chartData.map((item) => (\r\n                <Cell\r\n                  key={item.name}\r\n                  fill={colorMap[item.name]}\r\n                />\r\n              ))}\r\n            </Pie>\r\n\r\n            <Tooltip />\r\n          </PieChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n     {/* CUSTOM LEGEND */}\r\n<div className=\"mt-4 w-full max-w-xs space-y-2 flex flex-col items-start text-left\">\r\n  {chartData.map((item) => (\r\n    <div\r\n      key={item.name}\r\n      className=\"flex items-center gap-2 text-m\"\r\n    >\r\n      <span\r\n        className=\"w-3 h-3 rounded-sm\"\r\n        style={{ backgroundColor: colorMap[item.name] }}\r\n      />\r\n      <span className=\"text-gray-700\">\r\n        {item.name}\r\n      </span>\r\n    </div>\r\n  ))}\r\n</div>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAUA,MAAM,gBAAgB;IACpB;IAAW;IAAW;IAAW;IAAW;IAC5C;IAAW;IAAW;IAAW;IAAW;CAC7C;AAGM,SAAS;QAAkB,cAAA,iEAAc;IAC9C,MAAM,IAAI,YAAY,WAAW;IAEjC,IACE,EAAE,QAAQ,CAAC,WACX,EAAE,QAAQ,CAAC,YACX,EAAE,QAAQ,CAAC,gBACX,EAAE,QAAQ,CAAC,cACX,EAAE,QAAQ,CAAC,YACX,EAAE,QAAQ,CAAC,UACX,EAAE,QAAQ,CAAC,UACX,OAAO;IAET,IAAI,EAAE,QAAQ,CAAC,OAAO,OAAO;IAE7B,IACE,EAAE,QAAQ,CAAC,WACX,EAAE,QAAQ,CAAC,mBACX,EAAE,QAAQ,CAAC,eACX,EAAE,QAAQ,CAAC,aACX,EAAE,QAAQ,CAAC,SACX,OAAO;IAET,IACE,EAAE,QAAQ,CAAC,YACX,EAAE,QAAQ,CAAC,aACX,EAAE,QAAQ,CAAC,UACX,EAAE,QAAQ,CAAC,gBACX,EAAE,QAAQ,CAAC,cACX,EAAE,QAAQ,CAAC,aACX,EAAE,QAAQ,CAAC,QACX,OAAO;IAET,IACE,EAAE,QAAQ,CAAC,mBACX,EAAE,QAAQ,CAAC,kBACX,EAAE,QAAQ,CAAC,gBACX,EAAE,QAAQ,CAAC,YACX,EAAE,QAAQ,CAAC,gBACX,EAAE,QAAQ,CAAC,WACX,EAAE,QAAQ,CAAC,eACX,EAAE,QAAQ,CAAC,mBACX,EAAE,QAAQ,CAAC,UACX,OAAO;IAET,IACE,EAAE,QAAQ,CAAC,aACX,EAAE,QAAQ,CAAC,cACX,EAAE,QAAQ,CAAC,eACX,EAAE,QAAQ,CAAC,eACX,EAAE,QAAQ,CAAC,aACX,EAAE,QAAQ,CAAC,YACX,EAAE,QAAQ,CAAC,eACX,EAAE,QAAQ,CAAC,WACX,EAAE,QAAQ,CAAC,eACX,EAAE,QAAQ,CAAC,iBACX,EAAE,QAAQ,CAAC,aACX,EAAE,QAAQ,CAAC,WACX,EAAE,QAAQ,CAAC,aACX,EAAE,QAAQ,CAAC,mBACX,EAAE,QAAQ,CAAC,iBACX,EAAE,QAAQ,CAAC,kBACX,EAAE,QAAQ,CAAC,eACX,EAAE,QAAQ,CAAC,UACX,EAAE,QAAQ,CAAC,QACX,OAAO;IAET,OAAO;AACT;AAEe,SAAS,gBAAgB,KAAgB;QAAhB,EAAE,YAAY,EAAE,GAAhB;IACtC,MAAM,YAAY,aAAa,MAAM,CAAC,CAAA,IAAK,EAAE,UAAU,GAAG;IAE1D,4BAA4B;IAC5B,iBAAiB;IACjB,4BAA4B;IAC5B,MAAM,UAAU,CAAC;IACjB,UAAU,OAAO,CAAC,CAAA;QAChB,MAAM,WAAW,kBAAkB,EAAE,WAAW,IAAI;QACpD,OAAO,CAAC,SAAS,GAAG,CAAC,OAAO,CAAC,SAAS,IAAI,CAAC,IAAI,OAAO,EAAE,UAAU;IACpE;IAEA,4BAA4B;IAC5B,0BAA0B;IAC1B,4BAA4B;IAC5B,MAAM,YAAY,OAAO,OAAO,CAAC,SAAS,GAAG,CAC3C;YAAC,CAAC,MAAM,MAAM;eAAM;YAAE;YAAM;QAAM;;IAGpC,4BAA4B;IAC5B,6BAA6B;IAC7B,4BAA4B;IAC5B,MAAM,WAAW,CAAC;IAClB,UAAU,OAAO,CAAC,CAAC,MAAM;QACvB,QAAQ,CAAC,KAAK,IAAI,CAAC,GACjB,aAAa,CAAC,QAAQ,cAAc,MAAM,CAAC;IAC/C;IAEA,qBACF,uMAAC;QAAI,WAAU;;0BAET,uMAAC;gBAAI,WAAU;0BACb,cAAA,uMAAC,uMAAmB;oBAAC,OAAM;oBAAO,QAAQ;8BACxC,cAAA,uMAAC,6KAAQ;;0CACP,uMAAC,mKAAG;gCACF,MAAM;gCACN,IAAG;gCACH,IAAG;gCACH,aAAY;gCACZ,SAAQ;gCACR,OAAO;gCACP,WAAW;0CAEV,UAAU,GAAG,CAAC,CAAC,qBACd,uMAAC,yKAAI;wCAEH,MAAM,QAAQ,CAAC,KAAK,IAAI,CAAC;uCADpB,KAAK,IAAI;;;;;;;;;;0CAMpB,uMAAC,+KAAO;;;;;;;;;;;;;;;;;;;;;0BAMpB,uMAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC,qBACd,uMAAC;wBAEC,WAAU;;0CAEV,uMAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,iBAAiB,QAAQ,CAAC,KAAK,IAAI,CAAC;gCAAC;;;;;;0CAEhD,uMAAC;gCAAK,WAAU;0CACb,KAAK,IAAI;;;;;;;uBARP,KAAK,IAAI;;;;;;;;;;;;;;;;AAgBpB;KA5EwB","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/summaryCards.jsx"],"sourcesContent":["export default function SummaryCards({ data }) {\r\n  const total = data.reduce((s, d) => s + d.totalIncome, 0)\r\n  const avg = total / data.length\r\n  const max = Math.max(...data.map(d => d.totalIncome))\r\n  const min = Math.min(...data.map(d => d.totalIncome))\r\n\r\n  const currency = val =>\r\n    new Intl.NumberFormat(\"en-PH\", { style: \"currency\", currency: \"PHP\" }).format(val)\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n      <Card label=\"Total Budget\" value={currency(total)} color=\"indigo\" />\r\n      <Card label=\"Average Budget\" value={currency(avg)} color=\"green\" />\r\n      <Card label=\"Highest Budget\" value={currency(max)} color=\"yellow\" />\r\n      <Card label=\"Lowest Budget\" value={currency(min)} color=\"red\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Card({ label, value, color }) {\r\n  const colors = {\r\n    indigo: \"bg-indigo-50 text-indigo-700\",\r\n    green: \"bg-green-50 text-green-700\",\r\n    yellow: \"bg-yellow-50 text-yellow-700\",\r\n    red: \"bg-red-50 text-red-700\",\r\n  }\r\n\r\n  return (\r\n    <div className={`p-4 rounded-lg text-center ${colors[color]}`}>\r\n      <p className=\"text-sm text-gray-600\">{label}</p>\r\n      <p className=\"text-lg font-semibold\">{value}</p>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAe,SAAS,aAAa,KAAQ;QAAR,EAAE,IAAI,EAAE,GAAR;IACnC,MAAM,QAAQ,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,WAAW,EAAE;IACvD,MAAM,MAAM,QAAQ,KAAK,MAAM;IAC/B,MAAM,MAAM,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW;IACnD,MAAM,MAAM,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW;IAEnD,MAAM,WAAW,CAAA,MACf,IAAI,KAAK,YAAY,CAAC,SAAS;YAAE,OAAO;YAAY,UAAU;QAAM,GAAG,MAAM,CAAC;IAEhF,qBACE,uMAAC;QAAI,WAAU;;0BACb,uMAAC;gBAAK,OAAM;gBAAe,OAAO,SAAS;gBAAQ,OAAM;;;;;;0BACzD,uMAAC;gBAAK,OAAM;gBAAiB,OAAO,SAAS;gBAAM,OAAM;;;;;;0BACzD,uMAAC;gBAAK,OAAM;gBAAiB,OAAO,SAAS;gBAAM,OAAM;;;;;;0BACzD,uMAAC;gBAAK,OAAM;gBAAgB,OAAO,SAAS;gBAAM,OAAM;;;;;;;;;;;;AAG9D;KAjBwB;AAmBxB,SAAS,KAAK,KAAuB;QAAvB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,GAAvB;IACZ,MAAM,SAAS;QACb,QAAQ;QACR,OAAO;QACP,QAAQ;QACR,KAAK;IACP;IAEA,qBACE,uMAAC;QAAI,WAAW,AAAC,8BAA2C,OAAd,MAAM,CAAC,MAAM;;0BACzD,uMAAC;gBAAE,WAAU;0BAAyB;;;;;;0BACtC,uMAAC;gBAAE,WAAU;0BAAyB;;;;;;;;;;;;AAG5C;MAdS","debugId":null}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/forecastChart.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\n\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  CartesianGrid,\r\n  ResponsiveContainer,\r\n  Legend,\r\n  ReferenceLine,\r\n  Area,\r\n  Label\r\n} from \"recharts\";\r\n\r\nexport default function LGUFinancialForecastChart({ historyData, forecastData, lguName = \"Local Government Unit\" }) {\r\nconst [forecastYearsToShow, setForecastYearsToShow] = useState(1);\r\n\r\n  // ---------- DATA PROCESSING ----------\r\n  const actualData = Array.isArray(historyData)\r\n    ? historyData.map(d => ({\r\n        fiscalYear: Number(d.year),\r\n        actualBudget: d.totalIncome ?? 0,\r\n        forecastBudget: null,\r\n      }))\r\n    : [];\r\n\r\n  const lastActualYear = actualData.length > 0\r\n    ? Math.max(...actualData.map(d => d.fiscalYear))\r\n    : null;\r\n\r\nconst forecastMapped = Array.isArray(forecastData)\r\n  ? forecastData\r\n      .filter(f => f.year > lastActualYear)\r\n      .slice(0, forecastYearsToShow) // ðŸ”¥ LIMIT YEARS HERE\r\n      .map(f => ({\r\n        fiscalYear: Number(f.year),\r\n        actualBudget: null,\r\n        forecastBudget: f.value ?? 0,\r\n        projectedGrowth: f.growthRate || null,\r\n      }))\r\n  : [];\r\n\r\n\r\n  const combinedData = [\r\n    ...actualData,\r\n    ...forecastMapped,\r\n  ];\r\n\r\n  const forecastStartYear = forecastMapped?.[0]?.fiscalYear;\r\n  const currentYear = new Date().getFullYear();\r\n\r\n  // Calculate growth metrics\r\n  const getGrowthMetrics = () => {\r\n    if (actualData.length < 2) return null;\r\n    const sorted = [...actualData].sort((a, b) => a.fiscalYear - b.fiscalYear);\r\n    const recent = sorted.slice(-3);\r\n    const avgGrowth = recent.reduce((sum, curr, idx, arr) => {\r\n      if (idx === 0) return 0;\r\n      const prev = arr[idx - 1].actualBudget;\r\n      return sum + ((curr.actualBudget - prev) / prev) * 100;\r\n    }, 0) / (recent.length - 1);\r\n    \r\n    return {\r\n      averageGrowth: avgGrowth.toFixed(1),\r\n      lastActual: actualData[actualData.length - 1]?.actualBudget || 0\r\n    };\r\n  };\r\n\r\n  const growthMetrics = getGrowthMetrics();\r\n\r\n  // ---------- CUSTOM TOOLTIP ----------\r\n  const CustomTooltip = ({ active, payload, label }) => {\r\n    if (active && payload && payload.length) {\r\n      const isForecast = label > lastActualYear;\r\n      const actual = payload.find(p => p.dataKey === 'actualBudget')?.value;\r\n      const forecast = payload.find(p => p.dataKey === 'forecastBudget')?.value;\r\n      \r\n      return (\r\n        <div className=\"bg-white p-4 border border-gray-200 shadow-lg rounded-lg\">\r\n          <p className=\"font-semibold text-gray-800 mb-2\">\r\n          </p>\r\n          {actual && (\r\n            <p className=\"text-blue-600 mb-1\">\r\n              <span className=\"font-medium\">Actual Budget: </span>\r\n              â‚±{Number(actual).toLocaleString('en-PH', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n            </p>\r\n          )}\r\n          {forecast && (\r\n            <div>\r\n              <p className=\"text-emerald-600 mb-1\">\r\n                <span className=\"font-medium\">Projected Budget: </span>\r\n                â‚±{Number(forecast).toLocaleString('en-PH', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n              </p>\r\n             \r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\" overflow-hidden\">\r\n    \r\n{/* FORECAST YEAR FILTER */}\r\n<div className=\"flex justify-end mb-4\">\r\n  <div className=\"flex items-center gap-2\">\r\n    <label className=\"text-sm font-medium text-gray-700\">\r\n      Forecast Years:\r\n    </label>\r\n    <select\r\n      value={forecastYearsToShow}\r\n      onChange={(e) => setForecastYearsToShow(Number(e.target.value))}\r\n      className=\"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500\"\r\n    >\r\n      {[1, 2, 3].map(year => (\r\n        <option key={year} value={year}>\r\n          {year} Year{year > 1 ? \"s\" : \"\"}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  </div>\r\n</div>\r\n\r\n      {/* CHART */}\r\n      <div className=\"p-6\">\r\n        <ResponsiveContainer width=\"100%\" height={450}>\r\n          <LineChart\r\n            data={combinedData}\r\n            margin={{ top: 20, right: 30, left: 20, bottom: 20 }}\r\n          >\r\n            <CartesianGrid \r\n              strokeDasharray=\"3 3\" \r\n              stroke=\"#f0f0f0\"\r\n              vertical={false}\r\n            />\r\n            \r\n            {/* X AXIS */}\r\n            <XAxis\r\n              dataKey=\"fiscalYear\"\r\n              type=\"number\"\r\n              domain={['dataMin', 'dataMax']}\r\n              tick={{ fontSize: 13, fill: '#6b7280' }}\r\n              tickFormatter={(value) => ` ${value}`}\r\n              padding={{ left: 20, right: 20 }}\r\n            >\r\n             \r\n            </XAxis>\r\n\r\n            {/* Y AXIS */}\r\n            <YAxis\r\n              tickFormatter={(value) => `â‚±${(value / 1_000_000).toFixed(0)}M`}\r\n              tick={{ fontSize: 13, fill: '#070707' }}\r\n              width={80}\r\n            >\r\n              <Label \r\n                angle={-90}\r\n                value=\"Budget (PHP)\" \r\n                position=\"insideLeft\" \r\n                offset={-10}\r\n                style={{ fill: '#08090a', fontSize: 14, textAnchor: 'middle' }}\r\n              />\r\n            </YAxis>\r\n\r\n            <Tooltip content={<CustomTooltip />} />\r\n\r\n            <Legend \r\n              verticalAlign=\"bottom\" \r\n              height={50}\r\n              iconType=\"circle\"\r\n              iconSize={10}\r\n              wrapperStyle={{ paddingBottom: 20 }}\r\n            />\r\n\r\n            {/* FORECAST START REFERENCE LINE */}\r\n            {forecastStartYear && (\r\n              <ReferenceLine\r\n                x={forecastStartYear}\r\n                stroke=\"#059669\"\r\n                strokeWidth={1.5}\r\n                strokeDasharray=\"5 5\"\r\n              >\r\n                \r\n              </ReferenceLine>\r\n            )}\r\n\r\n            {/* CURRENT YEAR REFERENCE LINE */}\r\n            <ReferenceLine\r\n              x={currentYear}\r\n              stroke=\"#dc2626\"\r\n              strokeWidth={1}\r\n              strokeDasharray=\"3 3\"\r\n            >\r\n              <Label \r\n                value=\"Current Year\" \r\n                position=\"Top\"\r\n                fill=\"#dc2626\"\r\n                fontSize={11}\r\n                offset={5}\r\n              />\r\n            </ReferenceLine>\r\n\r\n          \r\n\r\n            {/* ACTUAL BUDGET LINE */}\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"actualBudget\"\r\n              name=\"Historical Budget\"\r\n              stroke=\"#1e40af\"\r\n              strokeWidth={3}\r\n              dot={{\r\n                r: 5,\r\n                fill: \"#1e40af\",\r\n                strokeWidth: 2,\r\n              }}\r\n           \r\n              connectNulls={true}\r\n            />\r\n\r\n            {/* FORECAST LINE */}\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"forecastBudget\"\r\n              name=\"Projected Budget\"\r\n              stroke=\"#059669\"\r\n              strokeWidth={3}\r\n              strokeDasharray=\"5 5\"\r\n              dot={{\r\n                r: 5,\r\n                fill: \"#059669\",\r\n                strokeWidth: 2,\r\n              }}\r\n              activeDot={{\r\n                r: 8,\r\n                fill: \"#059669\",\r\n                strokeWidth: 3\r\n              }}\r\n              connectNulls={true}\r\n            />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n\r\n        {/* GRADIENT DEFINITIONS */}\r\n        <svg style={{ height: 0 }}>\r\n          <defs>\r\n            <linearGradient id=\"colorActual\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n              <stop offset=\"5%\" stopColor=\"#1e40af\" stopOpacity={0.3}/>\r\n              <stop offset=\"95%\" stopColor=\"#1e40af\" stopOpacity={0}/>\r\n            </linearGradient>\r\n          </defs>\r\n        </svg>\r\n\r\n        {/* FOOTER STATS */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-100\">\r\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n            <p className=\"text-sm text-blue-700 font-medium mb-1\">Historical Period</p>\r\n            <p className=\"text-2xl font-bold text-blue-800\">\r\n              {actualData.length} Years\r\n            </p>\r\n            <p className=\"text-xs text-blue-600 mt-1\">\r\n              FY {actualData[0]?.fiscalYear || 'N/A'} - {lastActualYear || 'N/A'}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"bg-emerald-50 p-4 rounded-lg\">\r\n            <p className=\"text-sm text-emerald-700 font-medium mb-1\">Projection Period</p>\r\n            <p className=\"text-2xl font-bold text-emerald-800\">\r\n              {forecastMapped.length} Years\r\n            </p>\r\n            <p className=\"text-xs text-emerald-600 mt-1\">\r\n              FY {forecastStartYear || 'N/A'} - {forecastMapped[forecastMapped.length - 1]?.fiscalYear || 'N/A'}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n            <p className=\"text-sm text-gray-700 font-medium mb-1\">\r\n              Avg. Growth Rate\r\n            </p>\r\n            <p className=\"text-2xl font-bold text-gray-800\">\r\n              {growthMetrics ? `${growthMetrics.averageGrowth}%` : 'N/A'}\r\n            </p>\r\n            <p className=\"text-xs text-gray-600 mt-1\">\r\n              Based on last 3 fiscal years\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* DISCLAIMER */}\r\n        <div className=\"mt-20 text-xs text-gray-500 italic\">\r\n          <p>\r\n            Note: Forecasts are based on historical trends and economic indicators. \r\n            Actual results may vary based on local economic conditions, policy changes, \r\n            and unforeseen circumstances. Prepared by {lguName} Planning and Development Office.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 954, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/forecastSummary.jsx"],"sourcesContent":["\"use client\";\r\n\r\nexport default function ForecastSummary({ data }) {\r\n  if (!Array.isArray(data) || data.length === 0) {\r\n    return (\r\n      <p className=\"text-sm text-gray-500 text-center\">\r\n        Forecast not available yet.\r\n      </p>\r\n    );\r\n  }\r\n\r\n  const sorted = [...data]\r\n    .filter(d => typeof d.value === \"number\" && !isNaN(d.value))\r\n    .sort((a, b) => a.year - b.year);\r\n\r\n  if (sorted.length === 0) {\r\n    return (\r\n      <p className=\"text-sm text-gray-500 text-center\">\r\n        Forecast not available yet.\r\n      </p>\r\n    );\r\n  }\r\n\r\n  const nextYear = sorted[0];\r\n  const firstFive = sorted.slice(0, Math.min(5, sorted.length));\r\n\r\n  const avgForecast =\r\n    firstFive.reduce((sum, e) => sum + e.value, 0) / firstFive.length;\r\n\r\n  const growthRate =\r\n    firstFive.length > 1\r\n      ? ((firstFive[firstFive.length - 1].value - firstFive[0].value) /\r\n          firstFive[0].value) *\r\n        100\r\n      : 0;\r\n\r\n  const format = (v) =>\r\n    new Intl.NumberFormat(\"en-PH\", {\r\n      style: \"currency\",\r\n      currency: \"PHP\",\r\n    }).format(v);\r\n\r\n    \r\nreturn (\r\n<div className=\"grid grid-cols-1 gap-4 mt-2\">\r\n    <Card\r\n      title={`Next Year Forecast (${nextYear.year})`}\r\n      value={format(nextYear.value)}\r\n      color=\"indigo\"\r\n    />\r\n\r\n    <Card\r\n      title=\"Next 2â€“5 Year Avg\"\r\n      value={format(avgForecast)}\r\n      color=\"green\"\r\n    />\r\n\r\n    <Card\r\n      title=\"Growth Rate\"\r\n      value={`${growthRate.toFixed(2)}%`}\r\n      color=\"yellow\"\r\n    />\r\n  </div>\r\n);\r\n}\r\n\r\nfunction Card({ title, value, color }) {\r\n  const styles = {\r\n    indigo: \"bg-indigo-50 text-indigo-700\",\r\n    green: \"bg-green-50 text-green-700\",\r\n    yellow: \"bg-yellow-50 text-yellow-700\",\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`rounded-lg px-3 py-4 text-center flex flex-col justify-center items-center ${styles[color]}`}\r\n    >\r\n      <p className=\"text-[18px] font-medium text-gray-600 leading-tight\">\r\n        {title}\r\n      </p>\r\n      <p className=\"mt-2 text-base font-semibold\">\r\n        {value}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS,gBAAgB,KAAQ;QAAR,EAAE,IAAI,EAAE,GAAR;IACtC,IAAI,CAAC,MAAM,OAAO,CAAC,SAAS,KAAK,MAAM,KAAK,GAAG;QAC7C,qBACE,uMAAC;YAAE,WAAU;sBAAoC;;;;;;IAIrD;IAEA,MAAM,SAAS;WAAI;KAAK,CACrB,MAAM,CAAC,CAAA,IAAK,OAAO,EAAE,KAAK,KAAK,YAAY,CAAC,MAAM,EAAE,KAAK,GACzD,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,GAAG,EAAE,IAAI;IAEjC,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,qBACE,uMAAC;YAAE,WAAU;sBAAoC;;;;;;IAIrD;IAEA,MAAM,WAAW,MAAM,CAAC,EAAE;IAC1B,MAAM,YAAY,OAAO,KAAK,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,OAAO,MAAM;IAE3D,MAAM,cACJ,UAAU,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE,KAAK,UAAU,MAAM;IAEnE,MAAM,aACJ,UAAU,MAAM,GAAG,IACf,AAAC,CAAC,SAAS,CAAC,UAAU,MAAM,GAAG,EAAE,CAAC,KAAK,GAAG,SAAS,CAAC,EAAE,CAAC,KAAK,IAC1D,SAAS,CAAC,EAAE,CAAC,KAAK,GACpB,MACA;IAEN,MAAM,SAAS,CAAC,IACd,IAAI,KAAK,YAAY,CAAC,SAAS;YAC7B,OAAO;YACP,UAAU;QACZ,GAAG,MAAM,CAAC;IAGd,qBACA,uMAAC;QAAI,WAAU;;0BACX,uMAAC;gBACC,OAAO,AAAC,uBAAoC,OAAd,SAAS,IAAI,EAAC;gBAC5C,OAAO,OAAO,SAAS,KAAK;gBAC5B,OAAM;;;;;;0BAGR,uMAAC;gBACC,OAAM;gBACN,OAAO,OAAO;gBACd,OAAM;;;;;;0BAGR,uMAAC;gBACC,OAAM;gBACN,OAAO,AAAC,GAAwB,OAAtB,WAAW,OAAO,CAAC,IAAG;gBAChC,OAAM;;;;;;;;;;;;AAIZ;KA9DwB;AAgExB,SAAS,KAAK,KAAuB;QAAvB,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,GAAvB;IACZ,MAAM,SAAS;QACb,QAAQ;QACR,OAAO;QACP,QAAQ;IACV;IAEA,qBACE,uMAAC;QACC,WAAW,AAAC,8EAA2F,OAAd,MAAM,CAAC,MAAM;;0BAEtG,uMAAC;gBAAE,WAAU;0BACV;;;;;;0BAEH,uMAAC;gBAAE,WAAU;0BACV;;;;;;;;;;;;AAIT;MAnBS","debugId":null}},
    {"offset": {"line": 1076, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/page.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useMemo } from \"react\";\r\n\r\nimport { supabase } from \"../../../lib/supabaseClient\"\r\nimport {\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip,\r\n} from \"recharts\";\r\n\r\nimport {\r\n  AlertCircle,\r\n  BarChart3,\r\n} from \"lucide-react\";\r\n// Hooks\r\nimport useBudgetData from \"./lib/useBudgetData\"\r\nimport useBreakdownData from \"./lib/useBreakdownData\"\r\nimport ExpensePieChart from \"../dashboard/components/expensePieChart\";\r\n\r\n// Components\r\nimport SummaryCards from \"./components/summaryCards\"\r\nimport ForecastChart from \"./components/forecastChart\"\r\nimport ForecastSummary from \"./components/forecastSummary\"\r\n\r\nexport default function TransactionPage() {\r\n  const [session, setSession] = useState(null)\r\n  const [forecastData, setForecastData] = useState([])\r\n  const nextYearForecast = useMemo(() => {\r\n  if (!forecastData || forecastData.length === 0) return 0;\r\n  return forecastData[0].value; // first forecasted year\r\n}, [forecastData]);\r\n\r\n  const [error, setError] = useState(null)\r\n\r\n  const { budgetData, loading, fetchBudgetData } = useBudgetData()\r\n  const { fetchBreakdownData } = useBreakdownData()\r\n  const forecastTransactions = forecastData; // or mapped forecast rows\r\n\r\nconst [breakdown, setBreakdown] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (budgetData.length > 0) loadForecast()\r\n  }, [budgetData])\r\n\r\n  async function loadForecast() {\r\n  try {\r\n    setError(null)\r\n\r\n    const res = await fetch(\"/api/forecast\", { cache: \"no-store\" })\r\n    if (!res.ok) throw new Error(\"Forecast failed\")\r\n\r\n    const data = await res.json()\r\n\r\n    const lastYear = Math.max(...budgetData.map(d => d.year))\r\n\r\n    setForecastData(\r\n      data\r\n        .filter(d => d.year > lastYear)\r\n        .map(d => ({\r\n          year: d.year,\r\n          value: Number(d.prediction), // âœ… single locked value\r\n        }))\r\n    )\r\n  } catch {\r\n    setError(\"Failed to load forecast data.\")\r\n  }\r\n}\r\n\r\n\r\n  useEffect(() => {\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session)\r\n      if (session) {\r\n        fetchBudgetData()\r\n        fetchBreakdownData()\r\n      }\r\n    })\r\n  }, [])\r\n\r\n\r\n  const nextYearForecastYear = useMemo(() => {\r\n  const currentYear = new Date().getFullYear();\r\n  return currentYear + 1;\r\n}, []);\r\nuseEffect(() => {\r\n  if (nextYearForecastYear !== 2026) return;\r\n\r\n  const fetchHistoricalExpenses = async () => {\r\n    const { data, error } = await supabase\r\n      .from(\"barangay_budget_breakdown\")\r\n      .select(\"year, category, description, amount\")\r\n      .eq(\"category\", \"Expenses\")\r\n      .gte(\"year\", 2023)\r\n      .lte(\"year\", 2024);\r\n\r\n    if (!error) {\r\n     setBreakdown(\r\n  data.map(r => ({\r\n    category: \"Expenses\",          // âœ… REQUIRED\r\n    description: r.description,\r\n    amount: Number(r.amount),\r\n  }))\r\n);\r\n\r\n    }\r\n  };\r\n\r\n  fetchHistoricalExpenses();\r\n}, [nextYearForecastYear]);\r\n\r\n\r\nconst expenseSourceData = useMemo(() => {\r\n  const recommendationYear = Number(nextYearForecastYear);\r\n\r\n  if (recommendationYear === 2026) {\r\n    return breakdown;\r\n  }\r\n\r\n  return budgetData\r\n    .filter(t => t.withdrawal > 0)\r\n    .map(t => ({\r\n      description: t.description,\r\n      amount: Number(t.withdrawal),\r\n    }));\r\n}, [nextYearForecastYear, breakdown, budgetData]);\r\n\r\n\r\nconst expenseStats = useMemo(() => {\r\n  const stats = {};\r\n\r\n  expenseSourceData.forEach(item => {\r\n    const category = categorizeExpense(item.description);\r\n    const subcategory = item.description;\r\n\r\n    if (!stats[category]) {\r\n      stats[category] = { total: 0, items: {} };\r\n    }\r\n\r\n    stats[category].total += item.amount;\r\n\r\n    stats[category].items[subcategory] =\r\n      (stats[category].items[subcategory] || 0) + item.amount;\r\n  });\r\n\r\n  return stats;\r\n}, [expenseSourceData]);\r\n\r\n\r\nconst utilizationRatios = useMemo(() => {\r\n  const ratios = {};\r\n  const totalExpenses = Object.values(expenseStats)\r\n    .reduce((s, c) => s + c.total, 0);\r\n\r\n  if (totalExpenses === 0) return {};\r\n\r\n  Object.entries(expenseStats).forEach(([category, data]) => {\r\n    ratios[category] = data.total / totalExpenses;\r\n  });\r\n\r\n  return ratios;\r\n}, [expenseStats]);\r\n\r\nconst suggestedAllocationData = useMemo(() => {\r\n  const total = Number(nextYearForecast);\r\n  if (!Number.isFinite(total) || total <= 0) return [];\r\n\r\n  return Object.entries(utilizationRatios).map(\r\n    ([category, ratio]) => ({\r\n      name: category,\r\n      percentage: +(ratio * 100).toFixed(2),\r\n      amount: total * ratio,\r\n      description: \"Based on actual historical spending\",\r\n    })\r\n  );\r\n}, [nextYearForecast, utilizationRatios]);\r\n\r\nconst detailedExpenseBreakdown = useMemo(() => {\r\n  return Object.entries(expenseStats).map(\r\n    ([category, data]) => ({\r\n      category,\r\n      total: data.total,\r\n      items: Object.entries(data.items).map(\r\n        ([name, amount]) => ({\r\n          name,\r\n          amount,\r\n        })\r\n      ),\r\n    })\r\n  );\r\n}, [expenseStats]);\r\nconsole.log(\"Forecast value:\", nextYearForecast);\r\nconsole.log(\"Utilization ratios:\", utilizationRatios);\r\nconsole.log(\"Breakdown length:\", breakdown.length);\r\nconsole.log(\"Expense source data:\", expenseSourceData);\r\nconsole.log(\"Expense stats:\", expenseStats);\r\n\r\n/* ---------------- UI ---------------- */\r\nreturn (\r\n  <div className=\"min-h-screen w-full bg-slate-50 overflow-x-hidden\">\r\n  <div className=\"mx-auto w-full max-w-[1600px] px-4 sm:px-6 lg:px-8 py-6\">\r\n\r\n\r\n      \r\n      {/* HEADER SECTION */}\r\n      <div className=\"mb-8\">\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\r\n<div className=\"px-8 py-6 bg-gradient-to-r from-emerald-700 to-emerald-600\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                  <div className=\"h-10 w-10 bg-white/10 rounded-lg flex items-center justify-center backdrop-blur-sm\">\r\n                    <span className=\"text-white text-lg\">ðŸ“ˆ</span>\r\n                  </div>\r\n                  <div>\r\n                    <h1 className=\"text-2xl font-bold text-white tracking-tight\">\r\n                      Forecasting Analysis\r\n                    </h1>\r\n                    \r\n                  </div>\r\n                </div>\r\n                \r\n              </div>\r\n              <div className=\"flex gap-3\">\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n        \r\n        </div>\r\n      </div>\r\n\r\n      {/* ERROR STATE */}\r\n      {error && (\r\n        <div className=\"mb-6\">\r\n          <div className=\"bg-white border border-red-200 rounded-lg shadow-sm\">\r\n            <div className=\"px-6 py-4 flex items-start gap-3\">\r\n              <div className=\"mt-0.5\">\r\n                <AlertCircle className=\"text-red-500 h-5 w-5 flex-shrink-0\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h4 className=\"text-sm font-semibold text-red-800\">Forecast Error</h4>\r\n                <p className=\"text-sm text-red-600 mt-1\">{error}</p>\r\n              </div>\r\n              <button className=\"text-sm text-red-600 hover:text-red-800 font-medium\">\r\n                Retry\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* LOADING STATE */}\r\n      {loading && (\r\n        <div className=\"mb-6\">\r\n          <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm\">\r\n            <div className=\"p-16 text-center\">\r\n              <div className=\"inline-flex flex-col items-center\">\r\n                <div className=\"animate-spin rounded-full h-10 w-10 border-3 border-slate-200 border-t-emerald-600 mb-4\"></div>\r\n                <p className=\"text-slate-700 font-medium mb-2\">Loading forecast analytics...</p>\r\n                <p className=\"text-sm text-slate-500\">Processing historical data and generating insights</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* MAIN CONTENT */}\r\n      {forecastData.length > 0 && (\r\n        <>\r\n          {/* CHARTS SECTION */}\r\n          <div className=\"mb-8\">\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\r\n              \r\n              {/* MAIN FORECAST CHART */}\r\n              <div className=\"xl:col-span-2\">\r\n                <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm h-full\">\r\n                  <div className=\"px-6 py-4 border-b border-slate-100 flex items-center justify-between\">\r\n                    <div>\r\n                      <h2 className=\"text-lg font-semibold text-slate-900\">\r\n                        Budget Forecast Analysis\r\n                      </h2>\r\n                     \r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                     \r\n                    </div>\r\n                  </div>\r\n                  <div className=\"p-6\">\r\n                    <div className=\"h-96\">\r\n                      <ForecastChart\r\n                        historyData={budgetData}\r\n                        forecastData={forecastData}\r\n                      />\r\n                    </div>\r\n                    \r\n                  </div>\r\n                </div>\r\n              </div>\r\n{/* RECOMMENDATIONS SECTION */}\r\n          <div className=\"mb-8\">\r\n            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm\">\r\n              {suggestedAllocationData.length === 0 ? (\r\n  <p className=\"text-sm text-gray-500\">\r\n    No allocation data available\r\n  </p>\r\n) : (\r\n  <div className=\"space-y-3\">\r\n    {suggestedAllocationData.map(item => (\r\n      <div\r\n        key={item.name}\r\n        className=\"flex justify-between items-center text-sm\"\r\n      >\r\n        <div>\r\n          <p className=\"font-medium\">{item.name}</p>\r\n          <p className=\"text-xs text-gray-500\">\r\n            {item.percentage}% allocation\r\n          </p>\r\n        </div>\r\n\r\n        <p className=\"font-semibold text-green-700\">\r\n          â‚±{item.amount.toLocaleString(\"en-PH\", {\r\n            minimumFractionDigits: 2,\r\n          })}\r\n        </p>\r\n      </div>\r\n    ))}\r\n  </div>\r\n)}\r\n\r\n\r\n             \r\n               \r\n              \r\n              \r\n       \r\n\r\n              \r\n\r\n                  {/* ALLOCATION VISUALIZATION */}\r\n                  <div className=\"lg:col-span-1\">\r\n                    <div className=\"bg-gradient-to-b from-slate-50 to-white rounded-lg border border-slate-200 p-6 h-full\">\r\n                      <h3 className=\"text-base font-semibold text-slate-900 mb-15\">\r\n                        Proposed Allocation\r\n                      </h3>\r\n                      \r\n                      {/* PIE CHART */}\r\n                      <div className=\"mb-8\">\r\n                        <ResponsiveContainer width=\"100%\" height={220}>\r\n                          <PieChart>\r\n                            <Pie\r\n  data={suggestedAllocationData}\r\n  dataKey=\"amount\"\r\n  nameKey=\"name\"\r\n\r\n                              cx=\"50%\"\r\n                              cy=\"50%\"\r\n                              outerRadius={80}\r\n                              innerRadius={35}\r\n                              label={false}\r\n                              stroke=\"#ffffff\"\r\n                              strokeWidth={3}\r\n                            >\r\n                              {suggestedAllocationData.map((_, index) => (\r\n                                <Cell\r\n                                  key={index}\r\n                                  fill={[\r\n                                    \"#0ea5e9\", // PS - sky blue\r\n                                    \"#ef4444\", // MOOE - red\r\n                                    \"#f59e0b\", // BDF - amber\r\n                                    \"#6366f1\", // BDRRM - indigo\r\n                                    \"#8b5cf6\", // SK - violet\r\n                                    \"#64748b\", // Other - slate\r\n                                  ][index]}\r\n                                />\r\n                              ))}\r\n                            </Pie>\r\n                            <Tooltip\r\n                              formatter={(value) => [`â‚±${Number(value).toLocaleString()}`, 'Allocation']}\r\n                              contentStyle={{\r\n                                backgroundColor: 'white',\r\n                                border: '1px solid #e2e8f0',\r\n                                borderRadius: '8px',\r\n                                padding: '12px',\r\n                                fontSize: '12px'\r\n                              }}\r\n                            />\r\n                          </PieChart>\r\n                        </ResponsiveContainer>\r\n                      </div>\r\n\r\n                      {/* ALLOCATION DETAILS */}\r\n                      <div className=\"space-y-4\">\r\n                        <div className=\"flex items-center justify-between text-sm\">\r\n                          <span className=\"text-slate-700 font-medium\">Predicted Budget</span>\r\n                          <span className=\"text-slate-900 font-bold\">\r\nâ‚±{suggestedAllocationData\r\n  .reduce((sum, item) => sum + item.amount, 0)\r\n  .toLocaleString(\"en-PH\", { minimumFractionDigits: 2 })}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"space-y-3\">\r\n                          {suggestedAllocationData.map((item, index) => (\r\n                            <div key={item.name} className=\"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-100\">\r\n                              <div className=\"flex items-center gap-3\">\r\n                                <div\r\n                                  className=\"h-3 w-3 rounded-full flex-shrink-0\"\r\n                                  style={{\r\n                                    backgroundColor: [\r\n                                      \"#0ea5e9\", \"#ef4444\", \"#f59e0b\", \r\n                                      \"#6366f1\", \"#8b5cf6\", \"#64748b\"\r\n                                    ][index],\r\n                                  }}\r\n                                />\r\n                                <span className=\"text-sm font-medium text-slate-700\">{item.name}</span>\r\n                              </div>\r\n                              <div className=\"text-right\">\r\n                                <div className=\"text-sm font-semibold text-slate-900\">\r\nâ‚±{Number(item.amount).toLocaleString(\"en-PH\", {\r\n  minimumFractionDigits: 2,\r\n  maximumFractionDigits: 2\r\n})}\r\n                                </div>\r\n                                <div className=\"text-xs text-slate-500\">\r\n{(\r\n  (item.amount /\r\n    suggestedAllocationData.reduce((sum, i) => sum + i.amount, 0)) *\r\n  100\r\n).toFixed(1)}%\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n             \r\n              \r\n            </div>\r\n          </div>\r\n\r\n          \r\n         \r\n     \r\n\r\n         \r\n        </>\r\n      )}\r\n\r\n      {/* EMPTY STATE */}\r\n      {!loading && budgetData.length === 0 && (\r\n        <div className=\"text-center py-16\">\r\n          <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm p-12 max-w-2xl mx-auto\">\r\n            <div className=\"mx-auto h-20 w-20 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full flex items-center justify-center mb-6\">\r\n              <BarChart3 className=\"h-10 w-10 text-slate-500\" />\r\n            </div>\r\n            <h3 className=\"text-xl font-semibold text-slate-900 mb-3\">\r\n              No Budget Data Available\r\n            </h3>\r\n            <p className=\"text-slate-600 mb-8 max-w-md mx-auto\">\r\n              Upload historical budget data to generate AI-powered forecasts and strategic recommendations\r\n            </p>\r\n            <div className=\"flex gap-4 justify-center\">\r\n              <button className=\"px-6 py-3 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200\">\r\n                View Sample Report\r\n              </button>\r\n              <button className=\"px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg font-medium hover:from-emerald-700 hover:to-teal-700\">\r\n                <span className=\"flex items-center gap-2\">\r\n                  <span>ðŸ“¤</span>\r\n                  <span>Upload Budget Data</span>\r\n                </span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  </div>\r\n);\r\n\r\n/* ===== ENHANCED STAT CARD COMPONENT ===== */\r\nfunction StatCard({ title, value, icon, trend }) {\r\n  return (\r\n    <div className=\"group\">\r\n      <div className=\"p-4 hover:bg-slate-50 rounded-lg transition-colors\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"h-12 w-12 rounded-lg bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center text-slate-600\">\r\n            <span className=\"text-lg\">{icon}</span>\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <p className=\"text-sm text-slate-500 font-medium\">{title}</p>\r\n            <p className=\"text-xl font-bold text-slate-900 mt-1\">{value}</p>\r\n            {trend && (\r\n              <div className=\"flex items-center gap-2 mt-2\">\r\n                <span className={`text-xs font-medium px-2 py-0.5 rounded-full ${\r\n                  trend.positive ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'\r\n                }`}>\r\n                  {trend.positive ? 'â†‘' : 'â†“'} {trend.value}\r\n                </span>\r\n                <span className=\"text-xs text-slate-500\">vs last period</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}}"],"names":[],"mappings":"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","debugId":null}}]
}