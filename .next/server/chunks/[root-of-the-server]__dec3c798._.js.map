{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/api/forecast/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { spawn } from \"child_process\";\r\nimport path from \"path\";\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const body = await request.json();\r\n\r\n   const python = spawn('python', [\r\n  path.join(__dirname, \"..\", \"..\", \"forecast\", \"model.py\")  // Use path.join to build the correct absolute path\r\n]);\r\n\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const python = spawn(\"python\", [pyPath], {\r\n        stdio: [\"pipe\", \"pipe\", \"pipe\"]\r\n      });\r\n\r\n      python.stdin.write(JSON.stringify(body));\r\n      python.stdin.end();\r\n\r\n      let output = \"\";\r\n      let error_output = \"\";\r\n\r\n      python.stdout.on(\"data\", (data) => {\r\n        output += data.toString();\r\n      });\r\n\r\n      python.stderr.on(\"data\", (data) => {\r\n  console.log(\"PYTHON ERROR:\", data.toString());\r\n  error_output += data.toString();\r\n});\r\n\r\n\r\n      python.on(\"close\", () => {\r\n        if (error_output) {\r\n          console.error(\"PYTHON ERROR:\", error_output);\r\n          return resolve(NextResponse.json([], { status: 200 }));\r\n        }\r\n\r\n        try {\r\n          const parsed = JSON.parse(output);\r\n\r\n          if (!Array.isArray(parsed)) {\r\n            console.error(\"FORECAST NOT ARRAY:\", parsed);\r\n            return resolve(NextResponse.json([], { status: 200 }));\r\n          }\r\n\r\n          resolve(NextResponse.json(parsed, { status: 200 }));\r\n        } catch (e) {\r\n          console.error(\"JSON PARSE FAILED:\", e, \"RAW:\", output);\r\n          resolve(NextResponse.json([], { status: 200 }));\r\n        }\r\n      });\r\n    });\r\n  } catch (err) {\r\n    console.error(\"API ERROR:\", err);\r\n    return NextResponse.json([], { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAEhC,MAAM,SAAS,IAAA,4HAAK,EAAC,UAAU;YAChC,4GAAI,CAAC,IAAI,oEAAY,MAAM,MAAM,YAAY,YAAa,mDAAmD;SAC9G;QAGG,OAAO,IAAI,QAAQ,CAAC,SAAS;YAC3B,MAAM,SAAS,IAAA,4HAAK,EAAC,UAAU;gBAAC;aAAO,EAAE;gBACvC,OAAO;oBAAC;oBAAQ;oBAAQ;iBAAO;YACjC;YAEA,OAAO,KAAK,CAAC,KAAK,CAAC,KAAK,SAAS,CAAC;YAClC,OAAO,KAAK,CAAC,GAAG;YAEhB,IAAI,SAAS;YACb,IAAI,eAAe;YAEnB,OAAO,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC;gBACxB,UAAU,KAAK,QAAQ;YACzB;YAEA,OAAO,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC;gBAC9B,QAAQ,GAAG,CAAC,iBAAiB,KAAK,QAAQ;gBAC1C,gBAAgB,KAAK,QAAQ;YAC/B;YAGM,OAAO,EAAE,CAAC,SAAS;gBACjB,IAAI,cAAc;oBAChB,QAAQ,KAAK,CAAC,iBAAiB;oBAC/B,OAAO,QAAQ,0JAAY,CAAC,IAAI,CAAC,EAAE,EAAE;wBAAE,QAAQ;oBAAI;gBACrD;gBAEA,IAAI;oBACF,MAAM,SAAS,KAAK,KAAK,CAAC;oBAE1B,IAAI,CAAC,MAAM,OAAO,CAAC,SAAS;wBAC1B,QAAQ,KAAK,CAAC,uBAAuB;wBACrC,OAAO,QAAQ,0JAAY,CAAC,IAAI,CAAC,EAAE,EAAE;4BAAE,QAAQ;wBAAI;oBACrD;oBAEA,QAAQ,0JAAY,CAAC,IAAI,CAAC,QAAQ;wBAAE,QAAQ;oBAAI;gBAClD,EAAE,OAAO,GAAG;oBACV,QAAQ,KAAK,CAAC,sBAAsB,GAAG,QAAQ;oBAC/C,QAAQ,0JAAY,CAAC,IAAI,CAAC,EAAE,EAAE;wBAAE,QAAQ;oBAAI;gBAC9C;YACF;QACF;IACF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,0JAAY,CAAC,IAAI,CAAC,EAAE,EAAE;YAAE,QAAQ;QAAI;IAC7C;AACF","debugId":null}}]
}