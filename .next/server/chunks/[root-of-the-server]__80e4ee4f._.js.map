{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/api/forecast/route.js"],"sourcesContent":["const { spawn } = require('child_process');\r\nconst path = require('path');\r\nconst { NextResponse } = require('next/server');\r\n\r\nexport async function POST(request) {\r\n  return new Promise((resolve, reject) => {\r\n    // Define the correct path to model.py file\r\n    const pyPath = path.join(__dirname, \"..\", \"..\", \"forecast\", \"model.py\");\r\n\r\n    // Set cwd to the directory where model.py exists\r\n    const cwd = path.join(__dirname, \"..\", \"..\", \"forecast\");  // this points to the 'forecast' folder\r\n\r\n    // Spawn the Python process with the correct working directory\r\nconst pythonPath = \"C:\\\\Users\\\\ALDEGS09\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python313\\\\python.exe\";\r\nconst python = spawn(pythonPath, [pyPath], {\r\n  stdio: [\"pipe\", \"pipe\", \"pipe\"],\r\n  cwd: cwd  // Ensure Python is running in the correct folder\r\n});\r\n\r\n\r\n    // Collect the output from Python\r\n    let output = '';\r\n    python.stdout.on(\"data\", (data) => {\r\n      output += data.toString();\r\n    });\r\n\r\n    // Collect error data\r\n    python.stderr.on(\"data\", (data) => {\r\n      console.error(`stderr: ${data.toString()}`);\r\n    });\r\n\r\n    // When the Python process finishes\r\n    python.on(\"close\", (code) => {\r\n      if (code !== 0) {\r\n        console.error(`Python process exited with code ${code}`);\r\n        return resolve(NextResponse.json({ error: \"Python process failed\" }, { status: 500 }));\r\n      }\r\n\r\n      // Try parsing the Python output\r\n      try {\r\n        const parsedOutput = JSON.parse(output);\r\n        resolve(NextResponse.json(parsedOutput, { status: 200 }));\r\n      } catch (error) {\r\n        console.error(\"Error parsing Python output:\", error);\r\n        resolve(NextResponse.json({ error: \"Failed to parse Python output\" }, { status: 500 }));\r\n      }\r\n    });\r\n\r\n    // Handle errors from the Python process\r\n    python.on(\"error\", (error) => {\r\n      console.error(\"Error spawning Python process:\", error);\r\n      resolve(NextResponse.json({ error: \"Failed to spawn Python process\" }, { status: 500 }));\r\n    });\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,MAAM,EAAE,KAAK,EAAE;AACf,MAAM;AACN,MAAM,EAAE,YAAY,EAAE;AAEf,eAAe,KAAK,OAAO;IAChC,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,2CAA2C;QAC3C,MAAM,SAAS,KAAK,IAAI,oEAAY,MAAM,MAAM,YAAY;QAE5D,iDAAiD;QACjD,MAAM,MAAM,KAAK,IAAI,oEAAY,MAAM,MAAM,aAAc,uCAAuC;QAElG,8DAA8D;QAClE,MAAM,aAAa;QACnB,MAAM,SAAS,MAAM,YAAY;YAAC;SAAO,EAAE;YACzC,OAAO;gBAAC;gBAAQ;gBAAQ;aAAO;YAC/B,KAAK,IAAK,iDAAiD;QAC7D;QAGI,iCAAiC;QACjC,IAAI,SAAS;QACb,OAAO,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC;YACxB,UAAU,KAAK,QAAQ;QACzB;QAEA,qBAAqB;QACrB,OAAO,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC;YACxB,QAAQ,KAAK,CAAC,CAAC,QAAQ,EAAE,KAAK,QAAQ,IAAI;QAC5C;QAEA,mCAAmC;QACnC,OAAO,EAAE,CAAC,SAAS,CAAC;YAClB,IAAI,SAAS,GAAG;gBACd,QAAQ,KAAK,CAAC,CAAC,gCAAgC,EAAE,MAAM;gBACvD,OAAO,QAAQ,aAAa,IAAI,CAAC;oBAAE,OAAO;gBAAwB,GAAG;oBAAE,QAAQ;gBAAI;YACrF;YAEA,gCAAgC;YAChC,IAAI;gBACF,MAAM,eAAe,KAAK,KAAK,CAAC;gBAChC,QAAQ,aAAa,IAAI,CAAC,cAAc;oBAAE,QAAQ;gBAAI;YACxD,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,QAAQ,aAAa,IAAI,CAAC;oBAAE,OAAO;gBAAgC,GAAG;oBAAE,QAAQ;gBAAI;YACtF;QACF;QAEA,wCAAwC;QACxC,OAAO,EAAE,CAAC,SAAS,CAAC;YAClB,QAAQ,KAAK,CAAC,kCAAkC;YAChD,QAAQ,aAAa,IAAI,CAAC;gBAAE,OAAO;YAAiC,GAAG;gBAAE,QAAQ;YAAI;QACvF;IACF;AACF","debugId":null}}]
}