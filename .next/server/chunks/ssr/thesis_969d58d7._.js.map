{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/components/ui/card.jsx"],"sourcesContent":["export function Card({ children }) {\r\n  return <div className=\"bg-white rounded-xl shadow\">{children}</div>\r\n}\r\n\r\nexport function CardContent({ children, className }) {\r\n  return <div className={className}>{children}</div>\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAO,SAAS,KAAK,EAAE,QAAQ,EAAE;IAC/B,qBAAO,wPAAC;QAAI,WAAU;kBAA8B;;;;;;AACtD;AAEO,SAAS,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE;IACjD,qBAAO,wPAAC;QAAI,WAAW;kBAAY;;;;;;AACrC","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/cashflowChart.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\nimport { CardContent } from \"@/components/ui/card\";\r\n\r\n// Helper to format currency\r\nconst formatCurrency = (value) =>\r\n  `₱${new Intl.NumberFormat(\"en-PH\").format(value)}`;\r\n\r\n// Custom tooltip to show all values\r\nconst CustomTooltip = ({ active, payload, label }) => {\r\n  if (active && payload && payload.length) {\r\n    const data = payload.reduce((acc, item) => {\r\n      acc[item.name] = item.value;\r\n      return acc;\r\n    }, {});\r\n    return (\r\n      <div className=\"bg-white border p-2 shadow rounded text-sm\">\r\n        <p className=\"font-semibold mb-1\">{label}</p>\r\n        <p>Income: {formatCurrency(data[\"Income\"] || 0)}</p>\r\n        <p>Expense: {formatCurrency(data[\"Expense\"] || 0)}</p>\r\n        <p>Net: {formatCurrency(data[\"Monthly Surplus / Deficit\"] || 0)}</p>\r\n        <p>Running Balance: {formatCurrency(data[\"Running Balance\"] || 0)}</p>\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default function CashflowChart({ data = [] }) {\r\n  // Use data directly; `net` and `balance` are already in `chartData`\r\n  const processedData = data.map((item) => ({\r\n    ...item,\r\n    income: item.income || 0,\r\n    expense: item.expense || 0,\r\n    net: item.net || 0,\r\n    balance: item.balance || 0,\r\n  }));\r\n\r\n  // Summary totals\r\n  const totalIncome = processedData.reduce((sum, i) => sum + i.income, 0);\r\n  const totalExpense = processedData.reduce((sum, i) => sum + i.expense, 0);\r\n  const runningBalance = processedData.length > 0\r\n  ? processedData[processedData.length - 1].balance\r\n  : 0;\r\n  return (\r\n    <CardContent className=\"p-4\">\r\n      {/* Summary */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-lg font-semibold\">Monthly Income vs Expense</h2>\r\n        <div className=\"text-right\">\r\n          <p className=\"text-sm text-gray-500\">Total Income</p>\r\n          <p className=\"text-xl font-bold text-green-600\">{formatCurrency(totalIncome)}</p>\r\n\r\n          <p className=\"text-sm text-gray-500\">Total Expense</p>\r\n          <p className=\"text-lg font-semibold text-red-600\">{formatCurrency(totalExpense)}</p>\r\n\r\n          <p className=\"text-sm text-gray-500\">Running Balance</p>\r\n          <p className={`text-lg font-semibold ${runningBalance >= 0 ? \"text-blue-600\" : \"text-red-600\"}`}>\r\n            {formatCurrency(runningBalance)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chart */}\r\n      <ResponsiveContainer width=\"100%\" height={320}>\r\n        <LineChart data={processedData} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"month\" />\r\n          <YAxis tickFormatter={(v) => `${v / 1000}k`} />\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Legend />\r\n          <Line type=\"monotone\" dataKey=\"income\" stroke=\"#16a34a\" name=\"Income\" />\r\n          <Line type=\"monotone\" dataKey=\"expense\" stroke=\"#dc2626\" name=\"Expense\" />\r\n          <Line type=\"monotone\" dataKey=\"net\" stroke=\"#2563eb\" name=\"Monthly Surplus / Deficit\" />\r\n          <Line type=\"monotone\" dataKey=\"balance\" stroke=\"#9333ea\" name=\"Running Balance\" strokeWidth={2} />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </CardContent>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/transactionTable.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\n\r\n// Format numbers as Philippine Peso\r\nconst currency = (val) => {\r\n  const amount = val || 0;\r\n  return new Intl.NumberFormat(\"en-PH\", {\r\n    style: \"currency\",\r\n    currency: \"PHP\",\r\n    minimumFractionDigits: 2,\r\n  }).format(amount);\r\n};\r\n\r\nexport default function TransactionTable({\r\n  transactions,\r\n  loading,\r\n  onAddTransaction,\r\n  onEditTransaction,\r\n  onDeleteTransaction,\r\n  setTransactions,\r\n}) {\r\n  const [form, setForm] = useState({\r\n    date: \"\",\r\n    description: \"\",\r\n    deposit: \"\",\r\n    withdrawal: \"\",\r\n  });\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [rowForm, setRowForm] = useState({});\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const calculateBalances = (list) => {\r\n    let runningBalance = 0;\r\n    return list.map((t) => {\r\n      runningBalance += (t.deposit || 0) - (t.withdrawal || 0);\r\n      return { ...t, balance: runningBalance };\r\n    });\r\n  };\r\n  const handleEditClick = (t) => {\r\n  setEditingId(t.id);\r\n  setRowForm({\r\n    date: t.date,\r\n    description: t.description,\r\n    deposit: t.deposit,\r\n    withdrawal: t.withdrawal,\r\n  });\r\n};\r\n\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n  e.preventDefault();\r\n  if (!form.date || (!form.deposit && !form.withdrawal)) {\r\n    alert(\"Enter a date and at least deposit or withdrawal.\");\r\n    return;\r\n  }\r\n\r\n  const newTransaction = {\r\n    ...form,\r\n    deposit: Number(form.deposit || 0),\r\n    withdrawal: Number(form.withdrawal || 0),\r\n    id: Date.now(), // temporary ID\r\n  };\r\n\r\n  // Sort newest → oldest ONLY for display\r\n  const updated = [newTransaction, ...transactions].sort(\r\n    (a, b) => new Date(b.date) - new Date(a.date)\r\n  );\r\n\r\n  // ❌ Remove this (causes your error)\r\n  // onEditTransaction?.(updatedTransaction, id);\r\n\r\n  // ✅ Keep this\r\n  onAddTransaction?.(newTransaction);\r\n\r\n  setForm({ date: \"\", description: \"\", deposit: \"\", withdrawal: \"\" });\r\n  setShowForm(false);\r\n};\r\n\r\n\r\nconst handleSave = (id) => {\r\n  if (!rowForm.date || (!rowForm.deposit && !rowForm.withdrawal)) {\r\n    alert(\"Enter a date and at least deposit or withdrawal.\");\r\n    return;\r\n  }\r\n\r\n  const updatedTransaction = {\r\n    ...rowForm,\r\n    deposit: Number(rowForm.deposit || 0),\r\n    withdrawal: Number(rowForm.withdrawal || 0),\r\n  };\r\n\r\n  // ✅ Only call parent to update DB and recalc balances\r\n  onEditTransaction(updatedTransaction, id);\r\n\r\n  setEditingId(null);\r\n  setRowForm({});\r\n};\r\n\r\n\r\n  const handleDelete = (id) => {\r\n    const updated = transactions.filter((t) => t.id !== id);\r\n    onDeleteTransaction?.(id);\r\n  };\r\n\r\n\r\n  const sortedTransactions = [...transactions].sort((a, b) => {\r\n  const dateCompare = new Date(b.date) - new Date(a.date);\r\n  if (dateCompare !== 0) return dateCompare;\r\n\r\n  // If same date → sort by ID (newest first)\r\n  return (b.id ?? 0) - (a.id ?? 0);\r\n});\r\n\r\n  \r\n\r\n  return (\r\n    <Card>\r\n      <CardContent className=\"space-y-4\">\r\n        <h2 className=\"text-lg font-semibold mb-3\">Transaction Records</h2>\r\n\r\n        <button\r\n          onClick={() => setShowForm((prev) => !prev)}\r\n          className=\"bg-blue-600 text-white rounded p-2 text-sm hover:bg-blue-700 transition mb-2\"\r\n        >\r\n          {showForm ? \"Hide Form\" : \"Add Transaction\"}\r\n        </button>\r\n\r\n        {showForm && (\r\n          <form\r\n            onSubmit={handleSubmit}\r\n            className=\"grid grid-cols-1 md:grid-cols-5 gap-2 items-end border-b border-gray-200 pb-4\"\r\n          >\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700\">Date</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"date\"\r\n                value={form.date}\r\n                onChange={handleChange}\r\n                className=\"mt-1 block w-full border rounded p-2 text-sm\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700\">Description</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"description\"\r\n                value={form.description}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., Reimbursement\"\r\n                className=\"mt-1 block w-full border rounded p-2 text-sm\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700\">Deposit (₱)</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"deposit\"\r\n                value={form.deposit}\r\n                onChange={handleChange}\r\n                min=\"0\"\r\n                className=\"mt-1 block w-full border rounded p-2 text-sm text-right\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700\">Withdrawal (₱)</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"withdrawal\"\r\n                value={form.withdrawal}\r\n                onChange={handleChange}\r\n                min=\"0\"\r\n                className=\"mt-1 block w-full border rounded p-2 text-sm text-right\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"w-full bg-blue-600 text-white rounded p-2 text-sm hover:bg-blue-700 transition\"\r\n              >\r\n                Add\r\n              </button>\r\n            </div>\r\n          </form>\r\n        )}\r\n\r\n        {loading ? (\r\n          <p>Loading...</p>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full border border-gray-300 text-sm\">\r\n              <thead className=\"bg-gray-100 text-gray-700 uppercase\">\r\n                <tr>\r\n                  <th className=\"border p-2 text-left\">Date</th>\r\n                  <th className=\"border p-2 text-left\">Description</th>\r\n                  <th className=\"border p-2 text-right\">Deposit (₱)</th>\r\n                  <th className=\"border p-2 text-right\">Withdrawal (₱)</th>\r\n                  <th className=\"border p-2 text-right\">Balance (₱)</th>\r\n                  <th className=\"border p-2 text-center\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {sortedTransactions.map((t, index) => (\r\n                  <tr key={t.id ?? index} className=\"bg-white hover:bg-gray-100\">\r\n                    {editingId === t.id ? (\r\n                      <>\r\n                        <td className=\"border p-2\">\r\n                          <input\r\n                            type=\"date\"\r\n                            value={rowForm.date}\r\n                            onChange={(e) =>\r\n                              setRowForm({ ...rowForm, date: e.target.value })\r\n                            }\r\n                            className=\"border rounded p-1 text-sm w-full\"\r\n                          />\r\n                        </td>\r\n                        <td className=\"border p-2\">\r\n                          <input\r\n                            type=\"text\"\r\n                            value={rowForm.description}\r\n                            onChange={(e) =>\r\n                              setRowForm({ ...rowForm, description: e.target.value })\r\n                            }\r\n                            className=\"border rounded p-1 text-sm w-full\"\r\n                          />\r\n                        </td>\r\n                        <td className=\"border p-2 text-right\">\r\n                          <input\r\n                            type=\"number\"\r\n                            value={rowForm.deposit}\r\n                            onChange={(e) =>\r\n                              setRowForm({ ...rowForm, deposit: e.target.value })\r\n                            }\r\n                            className=\"border rounded p-1 text-sm w-full text-right\"\r\n                          />\r\n                        </td>\r\n                        <td className=\"border p-2 text-right\">\r\n                          <input\r\n                            type=\"number\"\r\n                            value={rowForm.withdrawal}\r\n                            onChange={(e) =>\r\n                              setRowForm({ ...rowForm, withdrawal: e.target.value })\r\n                            }\r\n                            className=\"border rounded p-1 text-sm w-full text-right\"\r\n                          />\r\n                        </td>\r\n                        <td className=\"border p-2 text-right font-semibold text-blue-700\">\r\n                          {currency(t.balance)}\r\n                        </td>\r\n                        <td className=\"border p-2 text-center space-x-1\">\r\n                          <button\r\n                            onClick={() => handleSave(t.id)}\r\n                            className=\"bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700 text-xs\"\r\n                          >\r\n                            Save\r\n                          </button>\r\n                          <button\r\n                            onClick={() => setEditingId(null)}\r\n                            className=\"bg-gray-400 text-white px-2 py-1 rounded hover:bg-gray-500 text-xs\"\r\n                          >\r\n                            Cancel\r\n                          </button>\r\n                        </td>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <td className=\"border p-2\">\r\n                          {new Date(t.date).toLocaleDateString(\"en-PH\", {\r\n                            month: \"short\",\r\n                            day: \"numeric\",\r\n                            year: \"numeric\",\r\n                          })}\r\n                        </td>\r\n                        <td className=\"border p-2\">{t.description}</td>\r\n                        <td className=\"border p-2 text-right\">{currency(t.deposit)}</td>\r\n                        <td className=\"border p-2 text-right text-red-600\">\r\n                          {currency(t.withdrawal)}\r\n                        </td>\r\n                        <td className=\"border p-2 text-right font-semibold text-blue-700\">\r\n                          {currency(t.balance)}\r\n                        </td>\r\n                        <td className=\"border p-2 text-center space-x-1\">\r\n                          <button\r\n                            onClick={() => handleEditClick(t)}\r\n                            className=\"bg-yellow-400 text-white px-2 py-1 rounded hover:bg-yellow-500 text-xs\"\r\n                          >\r\n                            Edit\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDelete(t.id)}\r\n                            className=\"bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700 text-xs\"\r\n                          >\r\n                            Delete\r\n                          </button>\r\n                        </td>\r\n                      </>\r\n                    )}\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 901, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/toggleButton.jsx"],"sourcesContent":["\"use client\";\r\n\r\nexport default function ToggleButton({\r\n  showTable,\r\n  setShowTable,\r\n  showAddForm,\r\n  setShowAddForm,\r\n}) {\r\n  return (\r\n    <div className=\"flex gap-2 mb-4\">\r\n      <button\r\n        onClick={() => setShowTable(!showTable)}\r\n        className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\r\n      >\r\n        {showTable ? \"Hide Transactions\" : \"Show Transactions\"}\r\n      </button>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS,aAAa,EACnC,SAAS,EACT,YAAY,EACZ,WAAW,EACX,cAAc,EACf;IACC,qBACE,wPAAC;QAAI,WAAU;kBACb,cAAA,wPAAC;YACC,SAAS,IAAM,aAAa,CAAC;YAC7B,WAAU;sBAET,YAAY,sBAAsB;;;;;;;;;;;AAK3C","debugId":null}},
    {"offset": {"line": 930, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/useCashflowData.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"../../../../lib/supabaseClient\";\r\n\r\nexport function useCashflowData() {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [chartData, setChartData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchCashflow();\r\n  }, []);\r\n\r\n  const fetchCashflow = async () => {\r\n    setLoading(true);\r\n\r\n    // 1️⃣ Fetch transactions from Supabase\r\n    const { data, error } = await supabase\r\n      .from(\"transactions\")\r\n      .select(\"*\")\r\n      .order(\"date\", { ascending: true});\r\n\r\n    if (error) {\r\n      console.error(\"❌ Supabase fetch error:\", error.message);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // 2️⃣ Clean deposit and withdrawal values\r\n    const mapped = (data || [])\r\n      .filter((row) => row.date)\r\n      .map((row) => ({\r\n        ...row,\r\n        deposit: Number(String(row.deposit || \"0\").replace(/[₱, ]/g, \"\")),\r\n        withdrawal: Number(String(row.withdrawal || \"0\").replace(/[₱, ]/g, \"\")),\r\n        balance: Number(String(row.balance || \"0\").replace(/[₱, ]/g, \"\")), // use Supabase balance\r\n      }));\r\n\r\n    // 3️⃣ Save raw transactions for table\r\n    setTransactions(mapped);\r\n\r\n    // 4️⃣ Aggregate chart data per month\r\n    const grouped = {};\r\n\r\n    mapped.forEach((t) => {\r\n      const d = new Date(t.date);\r\n      const monthKey = `${d.toLocaleString(\"default\", { month: \"short\" })} ${d.getFullYear()}`;\r\n\r\n      if (!grouped[monthKey])\r\n        grouped[monthKey] = { month: monthKey, income: 0, expense: 0, balance: 0 };\r\n\r\n      grouped[monthKey].income += t.deposit || 0;\r\n      grouped[monthKey].expense += t.withdrawal || 0;\r\n\r\n      // Take the last transaction's Supabase balance in the month\r\n      grouped[monthKey].balance = t.balance || grouped[monthKey].balance;\r\n    });\r\n\r\n    const monthlyArray = Object.values(grouped)\r\n      .sort((a, b) => new Date(`${a.month}`) - new Date(`${b.month}`))\r\n      .map((g) => ({ ...g, net: g.income - g.expense }));\r\n\r\n    setChartData(monthlyArray);\r\n    setLoading(false);\r\n  };\r\n\r\n  return { transactions, chartData, loading,  refetch: fetchCashflow};\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKO,SAAS;IACd,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,2NAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2NAAQ,EAAC,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2NAAQ,EAAC;IAEvC,IAAA,4NAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,WAAW;QAEX,uCAAuC;QACvC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAQ,CACnC,IAAI,CAAC,gBACL,MAAM,CAAC,KACP,KAAK,CAAC,QAAQ;YAAE,WAAW;QAAI;QAElC,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,2BAA2B,MAAM,OAAO;YACtD,WAAW;YACX;QACF;QAEA,0CAA0C;QAC1C,MAAM,SAAS,CAAC,QAAQ,EAAE,EACvB,MAAM,CAAC,CAAC,MAAQ,IAAI,IAAI,EACxB,GAAG,CAAC,CAAC,MAAQ,CAAC;gBACb,GAAG,GAAG;gBACN,SAAS,OAAO,OAAO,IAAI,OAAO,IAAI,KAAK,OAAO,CAAC,UAAU;gBAC7D,YAAY,OAAO,OAAO,IAAI,UAAU,IAAI,KAAK,OAAO,CAAC,UAAU;gBACnE,SAAS,OAAO,OAAO,IAAI,OAAO,IAAI,KAAK,OAAO,CAAC,UAAU;YAC/D,CAAC;QAEH,sCAAsC;QACtC,gBAAgB;QAEhB,qCAAqC;QACrC,MAAM,UAAU,CAAC;QAEjB,OAAO,OAAO,CAAC,CAAC;YACd,MAAM,IAAI,IAAI,KAAK,EAAE,IAAI;YACzB,MAAM,WAAW,GAAG,EAAE,cAAc,CAAC,WAAW;gBAAE,OAAO;YAAQ,GAAG,CAAC,EAAE,EAAE,WAAW,IAAI;YAExF,IAAI,CAAC,OAAO,CAAC,SAAS,EACpB,OAAO,CAAC,SAAS,GAAG;gBAAE,OAAO;gBAAU,QAAQ;gBAAG,SAAS;gBAAG,SAAS;YAAE;YAE3E,OAAO,CAAC,SAAS,CAAC,MAAM,IAAI,EAAE,OAAO,IAAI;YACzC,OAAO,CAAC,SAAS,CAAC,OAAO,IAAI,EAAE,UAAU,IAAI;YAE7C,4DAA4D;YAC5D,OAAO,CAAC,SAAS,CAAC,OAAO,GAAG,EAAE,OAAO,IAAI,OAAO,CAAC,SAAS,CAAC,OAAO;QACpE;QAEA,MAAM,eAAe,OAAO,MAAM,CAAC,SAChC,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,GAAG,EAAE,KAAK,EAAE,IAAI,IAAI,KAAK,GAAG,EAAE,KAAK,EAAE,GAC7D,GAAG,CAAC,CAAC,IAAM,CAAC;gBAAE,GAAG,CAAC;gBAAE,KAAK,EAAE,MAAM,GAAG,EAAE,OAAO;YAAC,CAAC;QAElD,aAAa;QACb,WAAW;IACb;IAEA,OAAO;QAAE;QAAc;QAAW;QAAU,SAAS;IAAa;AACpE","debugId":null}},
    {"offset": {"line": 1002, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/kpiCards.jsx"],"sourcesContent":["import { ArrowUpIcon, ArrowDownIcon, BanknotesIcon, ChartBarIcon, CurrencyDollarIcon } from \"@heroicons/react/24/outline\";\r\n\r\nexport default function KPICards({ totals }) {\r\n  const {\r\n    beginningBalance = 0,\r\n    totalIncome = 0,\r\n    totalExpense = 0,\r\n    runningBalance = 0,\r\n    monthlySurplus = 0,\r\n  } = totals;\r\n\r\n  const cards = [\r\n    {\r\n      title: \"Beginning Balance\",\r\n      value: `₱${Number(beginningBalance).toLocaleString()}`,\r\n      icon: CurrencyDollarIcon,\r\n      color: \"text-blue-600\",\r\n      bg: \"bg-blue-100\"\r\n    },\r\n    {\r\n      title: \"Income (2025)\",\r\n      value: `₱${Number(totalIncome).toLocaleString()}`,\r\n      icon: ArrowUpIcon,\r\n      color: \"text-green-600\",\r\n      bg: \"bg-green-100\"\r\n    },\r\n    {\r\n      title: \"Expense (2025)\",\r\n      value: `₱${Number(totalExpense).toLocaleString()}`,\r\n      icon: ArrowDownIcon,\r\n      color: \"text-red-600\",\r\n      bg: \"bg-red-100\"\r\n    },\r\n    {\r\n      title: \"Running Balance\",\r\n      value: `₱${Number(runningBalance).toLocaleString()}`,\r\n      icon: BanknotesIcon,\r\n      color: \"text-purple-600\",\r\n      bg: \"bg-purple-100\"\r\n    },\r\n    {\r\n      title: \"Monthly Surplus\",\r\n      value: `₱${Number(monthlySurplus).toLocaleString()}`,\r\n      icon: ChartBarIcon,\r\n      color: monthlySurplus >= 0 ? \"text-green-600\" : \"text-red-600\",\r\n      bg: monthlySurplus >= 0 ? \"bg-green-100\" : \"bg-red-100\"\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-6\">\r\n      {cards.map((card, index) => (\r\n        <div key={index} className=\"flex items-center p-4 bg-white rounded-xl shadow-sm border\">\r\n          <div className={`p-3 rounded-full ${card.bg} ${card.color} mr-4`}>\r\n            <card.icon className=\"h-6 w-6\" />\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm text-gray-500\">{card.title}</p>\r\n            <p className=\"text-xl font-semibold\">{card.value}</p>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAEe,SAAS,SAAS,EAAE,MAAM,EAAE;IACzC,MAAM,EACJ,mBAAmB,CAAC,EACpB,cAAc,CAAC,EACf,eAAe,CAAC,EAChB,iBAAiB,CAAC,EAClB,iBAAiB,CAAC,EACnB,GAAG;IAEJ,MAAM,QAAQ;QACZ;YACE,OAAO;YACP,OAAO,CAAC,CAAC,EAAE,OAAO,kBAAkB,cAAc,IAAI;YACtD,MAAM,mQAAkB;YACxB,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,OAAO,CAAC,CAAC,EAAE,OAAO,aAAa,cAAc,IAAI;YACjD,MAAM,8OAAW;YACjB,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,OAAO,CAAC,CAAC,EAAE,OAAO,cAAc,cAAc,IAAI;YAClD,MAAM,oPAAa;YACnB,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,OAAO,CAAC,CAAC,EAAE,OAAO,gBAAgB,cAAc,IAAI;YACpD,MAAM,oPAAa;YACnB,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,OAAO,CAAC,CAAC,EAAE,OAAO,gBAAgB,cAAc,IAAI;YACpD,MAAM,iPAAY;YAClB,OAAO,kBAAkB,IAAI,mBAAmB;YAChD,IAAI,kBAAkB,IAAI,iBAAiB;QAC7C;KACD;IAED,qBACE,wPAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,wPAAC;gBAAgB,WAAU;;kCACzB,wPAAC;wBAAI,WAAW,CAAC,iBAAiB,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,KAAK,CAAC;kCAC9D,cAAA,wPAAC,KAAK,IAAI;4BAAC,WAAU;;;;;;;;;;;kCAEvB,wPAAC;;0CACC,wPAAC;gCAAE,WAAU;0CAAyB,KAAK,KAAK;;;;;;0CAChD,wPAAC;gCAAE,WAAU;0CAAyB,KAAK,KAAK;;;;;;;;;;;;;eAN1C;;;;;;;;;;AAYlB","debugId":null}},
    {"offset": {"line": 1112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/incomePieChart.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { PieChart, Pie, Cell, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\r\n\r\nconst COLORS = [\"#4ade80\", \"#22c55e\", \"#16a34a\", \"#15803d\", \"#166534\"];\r\n\r\nexport default function IncomePieChart({ transactions }) {\r\n  // Filter only deposits\r\n  const incomeTx = transactions.filter(t => t.deposit > 0);\r\n\r\n  // Group income by remarks/category\r\n  const grouped = {};\r\n  incomeTx.forEach(t => {\r\n    const key = t.remarks?.trim() || \"Uncategorized\";\r\n    grouped[key] = (grouped[key] || 0) + t.deposit;\r\n  });\r\n\r\n  const chartData = Object.keys(grouped).map(key => ({\r\n    name: key,\r\n    value: grouped[key],\r\n  }));\r\n\r\n  return (\r\n    <div className=\"w-full h-[300px]\">\r\n      <h2 className=\"font-semibold text-lg mb-2\">Income Breakdown</h2>\r\n      <ResponsiveContainer>\r\n        <PieChart>\r\n          <Pie\r\n            data={chartData}\r\n            cx=\"50%\"\r\n            cy=\"50%\"\r\n            label\r\n            outerRadius={110}\r\n            dataKey=\"value\"\r\n          >\r\n            {chartData.map((_, i) => (\r\n              <Cell key={i} fill={COLORS[i % COLORS.length]} />\r\n            ))}\r\n          </Pie>\r\n          <Tooltip />\r\n          <Legend />\r\n        </PieChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAIA,MAAM,SAAS;IAAC;IAAW;IAAW;IAAW;IAAW;CAAU;AAEvD,SAAS,eAAe,EAAE,YAAY,EAAE;IACrD,uBAAuB;IACvB,MAAM,WAAW,aAAa,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,GAAG;IAEtD,mCAAmC;IACnC,MAAM,UAAU,CAAC;IACjB,SAAS,OAAO,CAAC,CAAA;QACf,MAAM,MAAM,EAAE,OAAO,EAAE,UAAU;QACjC,OAAO,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,OAAO;IAChD;IAEA,MAAM,YAAY,OAAO,IAAI,CAAC,SAAS,GAAG,CAAC,CAAA,MAAO,CAAC;YACjD,MAAM;YACN,OAAO,OAAO,CAAC,IAAI;QACrB,CAAC;IAED,qBACE,wPAAC;QAAI,WAAU;;0BACb,wPAAC;gBAAG,WAAU;0BAA6B;;;;;;0BAC3C,wPAAC,oMAAmB;0BAClB,cAAA,wPAAC,0KAAQ;;sCACP,wPAAC,gKAAG;4BACF,MAAM;4BACN,IAAG;4BACH,IAAG;4BACH,KAAK;4BACL,aAAa;4BACb,SAAQ;sCAEP,UAAU,GAAG,CAAC,CAAC,GAAG,kBACjB,wPAAC,sKAAI;oCAAS,MAAM,MAAM,CAAC,IAAI,OAAO,MAAM,CAAC;mCAAlC;;;;;;;;;;sCAGf,wPAAC,4KAAO;;;;;sCACR,wPAAC,0KAAM;;;;;;;;;;;;;;;;;;;;;;AAKjB","debugId":null}},
    {"offset": {"line": 1211, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/page.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport CashflowChart from \"./components/cashflowChart.jsx\";\r\nimport TransactionTable from \"./components/transactionTable\";\r\nimport ToggleButton from \"./components/toggleButton\";\r\nimport { useCashflowData } from \"./components/useCashflowData\";\r\nimport { supabase } from \"../../../lib/supabaseClient\";\r\nimport KPICards from \"./components/kpiCards\";\r\nimport IncomePieChart from \"./components/incomePieChart\";\r\nimport ExpensePieChart from \"./components/expensePieChart\";\r\n\r\n\r\nexport default function Page() {\r\n  const { transactions: fetchedTransactions, chartData, loading, refetch } = useCashflowData();\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [showTable, setShowTable] = useState(false);\r\n\r\n\r\n  // Sync fetched transactions\r\n  useEffect(() => {\r\n    setTransactions(fetchedTransactions || []);\r\n  }, [fetchedTransactions]);\r\n\r\n  \r\n\r\n  // Add new transaction\r\n const handleAddTransaction = async (newTransaction) => {\r\n  try {\r\n    const lastBalance = transactions.length\r\n      ? transactions[transactions.length - 1].balance\r\n      : 0;\r\n\r\n    const newBalance =\r\n      lastBalance + (newTransaction.deposit || 0) - (newTransaction.withdrawal || 0);\r\n\r\n    const transactionToInsert = { ...newTransaction, balance: newBalance };\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"transactions\")\r\n      .insert([transactionToInsert])\r\n      .select(); // important to get ID\r\n    if (error) throw error;\r\n\r\n    // ✅ Update local state immediately\r\n    setTransactions((prev) => [...prev, data[0]]);\r\n\r\n    // Optional: refetch chart data\r\n    refetch();\r\n  } catch (err) {\r\n    console.error(\"Failed to add transaction:\", err.message);\r\n    alert(\"Error adding transaction.\");\r\n  }\r\n};\r\n\r\n\r\n\r\n const handleDeleteTransaction = async (id) => {\r\n  if (!id) return;\r\n\r\n  const confirmDelete = window.confirm(\"Are you sure you want to delete this transaction?\");\r\n  if (!confirmDelete) return;\r\n\r\n  try {\r\n    await supabase.from(\"transactions\").delete().eq(\"id\", id);\r\n\r\n    // Update local state immediately\r\n    const updated = transactions.filter((t) => t.id !== id);\r\n\r\n    let runningBalance = 0;\r\n    const recalculated = updated.map((t) => {\r\n      runningBalance += (t.deposit || 0) - (t.withdrawal || 0);\r\n      return { ...t, balance: runningBalance };\r\n    });\r\n\r\n    setTransactions(recalculated);\r\n    refetch();\r\n  } catch (err) {\r\n    console.error(\"Failed to delete transaction:\", err.message);\r\n    alert(\"Error deleting transaction.\");\r\n  }\r\n};\r\n\r\n const totalIncome =\r\n  chartData?.reduce((acc, row) => acc + (row.income || 0), 0) || 0;\r\n\r\nconst totalExpense =\r\n  chartData?.reduce((acc, row) => acc + (row.expense || 0), 0) || 0;\r\n\r\n// MUST COME FIRST ✔\r\n// Beginning balance = FIRST transaction's balance\r\nconst beginningBalance = transactions.length > 0\r\n  ? transactions[0].balance\r\n  : 0;\r\n\r\n// Running balance = LAST transaction's balance\r\nconst lastBalance = transactions.length > 0\r\n  ? transactions[transactions.length - 1].balance\r\n  : 0;\r\n\r\n\r\n// last month surplus\r\nconst lastMonth = chartData.length > 0 ? chartData[chartData.length - 1] : null;\r\n\r\nconst monthlySurplus = lastMonth\r\n  ? (lastMonth.income || 0) - (lastMonth.expense || 0)\r\n  : 0;\r\n\r\nconst kpiTotals = {\r\n  beginningBalance,\r\n  totalIncome,\r\n  totalExpense,\r\n  runningBalance: lastBalance,\r\n  monthlySurplus,\r\n};\r\n\r\n\r\n // Edit transaction\r\nconst handleEditTransaction = async (updatedTransaction, id) => {\r\n  try {\r\n    const index = transactions.findIndex((t) => t.id === id);\r\n    if (index === -1) throw new Error(\"Transaction not found in state\");\r\n\r\n    const previousBalance = index > 0 ? transactions[index - 1].balance : 0;\r\n    const newBalance =\r\n      previousBalance + (updatedTransaction.deposit || 0) - (updatedTransaction.withdrawal || 0);\r\n\r\n    const transactionToUpdate = { ...updatedTransaction, balance: newBalance };\r\n\r\n    const { error } = await supabase\r\n      .from(\"transactions\")\r\n      .update(transactionToUpdate)\r\n      .eq(\"id\", id);\r\n    if (error) throw error;\r\n\r\n    // Update local state immediately\r\n    const updatedTransactions = [...transactions];\r\n    updatedTransactions[index] = transactionToUpdate;\r\n\r\n    // Update balances for subsequent transactions\r\n    let runningBalance = newBalance;\r\n    for (let i = index + 1; i < updatedTransactions.length; i++) {\r\n      const t = updatedTransactions[i];\r\n      runningBalance += (t.deposit || 0) - (t.withdrawal || 0);\r\n      updatedTransactions[i] = { ...t, balance: runningBalance };\r\n\r\n      // Update Supabase for subsequent transactions\r\n      await supabase.from(\"transactions\").update({ balance: runningBalance }).eq(\"id\", t.id);\r\n    }\r\n\r\n    // ✅ Update state\r\n    setTransactions(updatedTransactions);\r\n    refetch();\r\n  } catch (err) {\r\n    console.error(\"Failed to edit transaction:\", err.message);\r\n    alert(\"Error editing transaction.\");\r\n  }\r\n};\r\n\r\n\r\n  return (\r\n\r\n  \r\n   <div className=\"p-6 space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">2025 Cashflow </h1>\r\n\r\n<div className=\"w-full h-full\">\r\n\r\n        {/* KPI CARDS */}\r\n      <KPICards totals={kpiTotals} />\r\n\r\n\r\n        {/* Monthly Chart */}\r\n        <Card>\r\n          <CashflowChart data={chartData} />\r\n        </Card>\r\n\r\n        <IncomePieChart transactions={transactions} />\r\n  <ExpensePieChart transactions={transactions} />\r\n\r\n  \r\n        {/* Toggle Transaction Table */}\r\n        <div>\r\n          <ToggleButton showTable={showTable} setShowTable={setShowTable} />\r\n          {showTable && (\r\n            <TransactionTable\r\n              transactions={transactions}\r\n              loading={loading}\r\n              setTransactions={setTransactions}\r\n              onAddTransaction={handleAddTransaction}\r\n              onDeleteTransaction={handleDeleteTransaction}\r\n              onEditTransaction={handleEditTransaction}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n       </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}