{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/lib/useBudgetData.js"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\nimport { supabase } from \"../../../../lib/supabaseClient\"\r\n\r\nexport default function useBudgetData() {\r\n  const [budgetData, setBudgetData] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  async function fetchBudgetData() {\r\n    setLoading(true)\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"yearly_budget\")\r\n      .select(\"year,total_income\")\r\n      .order(\"year\", { ascending: true })\r\n\r\n    setLoading(false)\r\n    if (error) return console.error(error)\r\n\r\n    setBudgetData(\r\n      data.map(d => ({\r\n        year: Number(d.year),\r\n        totalIncome: Number(d.total_income)\r\n      }))\r\n    )\r\n  }\r\n\r\n  return { budgetData, loading, fetchBudgetData }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAIe,SAAS;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,2NAAQ,EAAC,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2NAAQ,EAAC;IAEvC,eAAe;QACb,WAAW;QAEX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,qBACP,KAAK,CAAC,QAAQ;YAAE,WAAW;QAAK;QAEnC,WAAW;QACX,IAAI,OAAO,OAAO,QAAQ,KAAK,CAAC;QAEhC,cACE,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;gBACb,MAAM,OAAO,EAAE,IAAI;gBACnB,aAAa,OAAO,EAAE,YAAY;YACpC,CAAC;IAEL;IAEA,OAAO;QAAE;QAAY;QAAS;IAAgB;AAChD","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/lib/useBreakdownData.js"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\nimport { supabase } from \"../../../../lib/supabaseClient\"\r\n\r\nexport default function useBreakdownData() {\r\n  const [breakdownData, setBreakdownData] = useState({})\r\n\r\n  async function fetchBreakdownData() {\r\n    const { data, error } = await supabase\r\n      .from(\"barangay_budget_breakdown\")\r\n      .select(\"year, category, subcategory, description, amount\")\r\n\r\n    if (error) return console.error(error)\r\n\r\n    const grouped = {}\r\n\r\n    data.forEach(row => {\r\n      const year = Number(row.year)\r\n      if (!grouped[year]) grouped[year] = { income: {}, appropriations: {} }\r\n\r\n      const cat = row.category?.toLowerCase().includes(\"income\")\r\n        ? \"income\"\r\n        : \"appropriations\"\r\n\r\n      const label = row.subcategory || row.description || \"Uncategorized\"\r\n      const value = Number(String(row.amount).replace(/[^\\d.-]/g, \"\"))\r\n\r\n      grouped[year][cat][label] =\r\n        (grouped[year][cat][label] || 0) + value\r\n    })\r\n\r\n    setBreakdownData(grouped)\r\n  }\r\n\r\n  return { breakdownData, fetchBreakdownData }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAIe,SAAS;IACtB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,2NAAQ,EAAC,CAAC;IAEpD,eAAe;QACb,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAQ,CACnC,IAAI,CAAC,6BACL,MAAM,CAAC;QAEV,IAAI,OAAO,OAAO,QAAQ,KAAK,CAAC;QAEhC,MAAM,UAAU,CAAC;QAEjB,KAAK,OAAO,CAAC,CAAA;YACX,MAAM,OAAO,OAAO,IAAI,IAAI;YAC5B,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,GAAG;gBAAE,QAAQ,CAAC;gBAAG,gBAAgB,CAAC;YAAE;YAErE,MAAM,MAAM,IAAI,QAAQ,EAAE,cAAc,SAAS,YAC7C,WACA;YAEJ,MAAM,QAAQ,IAAI,WAAW,IAAI,IAAI,WAAW,IAAI;YACpD,MAAM,QAAQ,OAAO,OAAO,IAAI,MAAM,EAAE,OAAO,CAAC,YAAY;YAE5D,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GACvB,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI;QACvC;QAEA,iBAAiB;IACnB;IAEA,OAAO;QAAE;QAAe;IAAmB;AAC7C","debugId":null}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/forecastChart.jsx"],"sourcesContent":["\"use client\"\r\nimport { LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid, ResponsiveContainer } from \"recharts\"\r\n\r\nexport default function ForecastChart({ historyData, forecastData }) {\r\n  if (!forecastData || forecastData.length === 0) {\r\n    return (\r\n      <div className=\"bg-white shadow rounded-lg p-4 mt-6\">\r\n        <p className=\"text-gray-500\">Forecast will appear here once model is integrated.</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Merge past data + future data into one chart\r\n  const combined = [\r\n    ...historyData.map(d => ({ ...d, type: \"Actual\" })),\r\n    ...forecastData.map(f => ({ ...f, type: \"Forecast\" }))\r\n  ]\r\n\r\n  return (\r\n    <div className=\"bg-white shadow rounded-lg p-4 mt-6\">\r\n      <h3 className=\"text-lg font-semibold mb-2\">Forecasted Income</h3>\r\n\r\n      <ResponsiveContainer width=\"100%\" height={350}>\r\n        <LineChart data={combined}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"year\" />\r\n          <YAxis tickFormatter={v => `${(v / 1_000_000).toFixed(1)}M`} />\r\n          <Tooltip />\r\n          <Line dataKey=\"totalIncome\" stroke=\"#4F46E5\" strokeWidth={3} dot={{ r: 4 }} />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;;;AAGe,SAAS,cAAc,EAAE,WAAW,EAAE,YAAY,EAAE;IACjE,IAAI,CAAC,gBAAgB,aAAa,MAAM,KAAK,GAAG;QAC9C,qBACE,wPAAC;YAAI,WAAU;sBACb,cAAA,wPAAC;gBAAE,WAAU;0BAAgB;;;;;;;;;;;IAGnC;IAEA,+CAA+C;IAC/C,MAAM,WAAW;WACZ,YAAY,GAAG,CAAC,CAAA,IAAK,CAAC;gBAAE,GAAG,CAAC;gBAAE,MAAM;YAAS,CAAC;WAC9C,aAAa,GAAG,CAAC,CAAA,IAAK,CAAC;gBAAE,GAAG,CAAC;gBAAE,MAAM;YAAW,CAAC;KACrD;IAED,qBACE,wPAAC;QAAI,WAAU;;0BACb,wPAAC;gBAAG,WAAU;0BAA6B;;;;;;0BAE3C,wPAAC,oMAAmB;gBAAC,OAAM;gBAAO,QAAQ;0BACxC,cAAA,wPAAC,4KAAS;oBAAC,MAAM;;sCACf,wPAAC,wLAAa;4BAAC,iBAAgB;;;;;;sCAC/B,wPAAC,wKAAK;4BAAC,SAAQ;;;;;;sCACf,wPAAC,wKAAK;4BAAC,eAAe,CAAA,IAAK,GAAG,CAAC,IAAI,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;;;;;;sCAC3D,wPAAC,4KAAO;;;;;sCACR,wPAAC,sKAAI;4BAAC,SAAQ;4BAAc,QAAO;4BAAU,aAAa;4BAAG,KAAK;gCAAE,GAAG;4BAAE;;;;;;;;;;;;;;;;;;;;;;;AAKnF","debugId":null}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/budgetUploader.jsx"],"sourcesContent":["\"use client\"\r\nimport Papa from \"papaparse\"\r\nimport * as XLSX from \"xlsx\"\r\nimport { supabase } from \"../../../../lib/supabaseClient\"\r\nimport { useState } from \"react\"\r\n\r\nexport default function BudgetUploader({ refresh }) {\r\n  const [uploading, setUploading] = useState(false)\r\n\r\n  async function handleFileUpload(event) {\r\n    const file = event.target.files[0]\r\n    if (!file) return\r\n\r\n    setUploading(true)\r\n    try {\r\n      let rows = []\r\n      const fileName = file.name.toLowerCase()\r\n\r\n      if (fileName.endsWith(\".csv\")) {\r\n        const text = await file.text()\r\n        rows = Papa.parse(text, { header: true }).data\r\n      } else {\r\n        const buffer = await file.arrayBuffer()\r\n        const sheet = XLSX.read(buffer).Sheets[\"Sheet1\"]\r\n        rows = XLSX.utils.sheet_to_json(sheet)\r\n      }\r\n\r\n      // upsert rows\r\n      for (const row of rows) {\r\n        const year = Number(row.year)\r\n        const income = Number(String(row.total_income).replace(/[^\\d.-]/g, \"\"))\r\n\r\n        if (!year || !income) continue\r\n\r\n        await supabase.from(\"yearly_budget\").upsert({ year, total_income: income })\r\n      }\r\n\r\n      refresh()\r\n      alert(\"Upload successful!\")\r\n    } catch (e) {\r\n      console.error(e)\r\n      alert(\"Upload error.\")\r\n    }\r\n    setUploading(false)\r\n  }\r\n\r\n  return (\r\n    <div className=\"mb-4\">\r\n      <label className=\"inline-block bg-blue-600 text-white px-4 py-2 rounded-lg cursor-pointer hover:bg-blue-700\">\r\n        {uploading ? \"Uploading...\" : \"Upload CSV/Excel\"}\r\n        <input type=\"file\" className=\"hidden\" onChange={handleFileUpload} />\r\n      </label>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAMe,SAAS,eAAe,EAAE,OAAO,EAAE;IAChD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2NAAQ,EAAC;IAE3C,eAAe,iBAAiB,KAAK;QACnC,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC,EAAE;QAClC,IAAI,CAAC,MAAM;QAEX,aAAa;QACb,IAAI;YACF,IAAI,OAAO,EAAE;YACb,MAAM,WAAW,KAAK,IAAI,CAAC,WAAW;YAEtC,IAAI,SAAS,QAAQ,CAAC,SAAS;gBAC7B,MAAM,OAAO,MAAM,KAAK,IAAI;gBAC5B,OAAO,2JAAI,CAAC,KAAK,CAAC,MAAM;oBAAE,QAAQ;gBAAK,GAAG,IAAI;YAChD,OAAO;gBACL,MAAM,SAAS,MAAM,KAAK,WAAW;gBACrC,MAAM,QAAQ,+IAAS,CAAC,QAAQ,MAAM,CAAC,SAAS;gBAChD,OAAO,gJAAU,CAAC,aAAa,CAAC;YAClC;YAEA,cAAc;YACd,KAAK,MAAM,OAAO,KAAM;gBACtB,MAAM,OAAO,OAAO,IAAI,IAAI;gBAC5B,MAAM,SAAS,OAAO,OAAO,IAAI,YAAY,EAAE,OAAO,CAAC,YAAY;gBAEnE,IAAI,CAAC,QAAQ,CAAC,QAAQ;gBAEtB,MAAM,2IAAQ,CAAC,IAAI,CAAC,iBAAiB,MAAM,CAAC;oBAAE;oBAAM,cAAc;gBAAO;YAC3E;YAEA;YACA,MAAM;QACR,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC;YACd,MAAM;QACR;QACA,aAAa;IACf;IAEA,qBACE,wPAAC;QAAI,WAAU;kBACb,cAAA,wPAAC;YAAM,WAAU;;gBACd,YAAY,iBAAiB;8BAC9B,wPAAC;oBAAM,MAAK;oBAAO,WAAU;oBAAS,UAAU;;;;;;;;;;;;;;;;;AAIxD","debugId":null}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/summaryCards.jsx"],"sourcesContent":["export default function SummaryCards({ data }) {\r\n  const total = data.reduce((s, d) => s + d.totalIncome, 0)\r\n  const avg = total / data.length\r\n  const max = Math.max(...data.map(d => d.totalIncome))\r\n  const min = Math.min(...data.map(d => d.totalIncome))\r\n\r\n  const currency = val =>\r\n    new Intl.NumberFormat(\"en-PH\", { style: \"currency\", currency: \"PHP\" }).format(val)\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n      <Card label=\"Total Income\" value={currency(total)} color=\"indigo\" />\r\n      <Card label=\"Average Income\" value={currency(avg)} color=\"green\" />\r\n      <Card label=\"Highest Income\" value={currency(max)} color=\"yellow\" />\r\n      <Card label=\"Lowest Income\" value={currency(min)} color=\"red\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Card({ label, value, color }) {\r\n  const colors = {\r\n    indigo: \"bg-indigo-50 text-indigo-700\",\r\n    green: \"bg-green-50 text-green-700\",\r\n    yellow: \"bg-yellow-50 text-yellow-700\",\r\n    red: \"bg-red-50 text-red-700\",\r\n  }\r\n\r\n  return (\r\n    <div className={`p-4 rounded-lg text-center ${colors[color]}`}>\r\n      <p className=\"text-sm text-gray-600\">{label}</p>\r\n      <p className=\"text-lg font-semibold\">{value}</p>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAe,SAAS,aAAa,EAAE,IAAI,EAAE;IAC3C,MAAM,QAAQ,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,WAAW,EAAE;IACvD,MAAM,MAAM,QAAQ,KAAK,MAAM;IAC/B,MAAM,MAAM,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW;IACnD,MAAM,MAAM,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW;IAEnD,MAAM,WAAW,CAAA,MACf,IAAI,KAAK,YAAY,CAAC,SAAS;YAAE,OAAO;YAAY,UAAU;QAAM,GAAG,MAAM,CAAC;IAEhF,qBACE,wPAAC;QAAI,WAAU;;0BACb,wPAAC;gBAAK,OAAM;gBAAe,OAAO,SAAS;gBAAQ,OAAM;;;;;;0BACzD,wPAAC;gBAAK,OAAM;gBAAiB,OAAO,SAAS;gBAAM,OAAM;;;;;;0BACzD,wPAAC;gBAAK,OAAM;gBAAiB,OAAO,SAAS;gBAAM,OAAM;;;;;;0BACzD,wPAAC;gBAAK,OAAM;gBAAgB,OAAO,SAAS;gBAAM,OAAM;;;;;;;;;;;;AAG9D;AAEA,SAAS,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;IACnC,MAAM,SAAS;QACb,QAAQ;QACR,OAAO;QACP,QAAQ;QACR,KAAK;IACP;IAEA,qBACE,wPAAC;QAAI,WAAW,CAAC,2BAA2B,EAAE,MAAM,CAAC,MAAM,EAAE;;0BAC3D,wPAAC;gBAAE,WAAU;0BAAyB;;;;;;0BACtC,wPAAC;gBAAE,WAAU;0BAAyB;;;;;;;;;;;;AAG5C","debugId":null}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/incomeTrendChart.jsx"],"sourcesContent":["\"use client\"\r\nimport {\r\n  LineChart, Line, XAxis, YAxis, Tooltip,\r\n  CartesianGrid, ResponsiveContainer\r\n} from \"recharts\"\r\n\r\nexport default function IncomeTrendChart({ data, onYearClick }) {\r\n  const currency = val =>\r\n    new Intl.NumberFormat(\"en-PH\", { style: \"currency\", currency: \"PHP\" }).format(val)\r\n\r\n  return (\r\n    <div className=\"bg-white shadow rounded-lg p-4\">\r\n      <h3 className=\"text-lg font-semibold mb-2\">Yearly Income Trend</h3>\r\n\r\n      <ResponsiveContainer width=\"100%\" height={350}>\r\n        <LineChart\r\n          data={data}\r\n          onClick={e => e?.activeLabel && onYearClick(e.activeLabel)}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"year\" />\r\n          <YAxis tickFormatter={val => `${(val / 1_000_000).toFixed(1)}M`} />\r\n          <Tooltip formatter={v => currency(v)} labelFormatter={y => `Year: ${y}`} />\r\n          <Line dataKey=\"totalIncome\" stroke=\"#4F46E5\" strokeWidth={3} dot={{ r: 5 }} />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;;;AAMe,SAAS,iBAAiB,EAAE,IAAI,EAAE,WAAW,EAAE;IAC5D,MAAM,WAAW,CAAA,MACf,IAAI,KAAK,YAAY,CAAC,SAAS;YAAE,OAAO;YAAY,UAAU;QAAM,GAAG,MAAM,CAAC;IAEhF,qBACE,wPAAC;QAAI,WAAU;;0BACb,wPAAC;gBAAG,WAAU;0BAA6B;;;;;;0BAE3C,wPAAC,oMAAmB;gBAAC,OAAM;gBAAO,QAAQ;0BACxC,cAAA,wPAAC,4KAAS;oBACR,MAAM;oBACN,SAAS,CAAA,IAAK,GAAG,eAAe,YAAY,EAAE,WAAW;;sCAEzD,wPAAC,wLAAa;4BAAC,iBAAgB;;;;;;sCAC/B,wPAAC,wKAAK;4BAAC,SAAQ;;;;;;sCACf,wPAAC,wKAAK;4BAAC,eAAe,CAAA,MAAO,GAAG,CAAC,MAAM,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;;;;;;sCAC/D,wPAAC,4KAAO;4BAAC,WAAW,CAAA,IAAK,SAAS;4BAAI,gBAAgB,CAAA,IAAK,CAAC,MAAM,EAAE,GAAG;;;;;;sCACvE,wPAAC,sKAAI;4BAAC,SAAQ;4BAAc,QAAO;4BAAU,aAAa;4BAAG,KAAK;gCAAE,GAAG;4BAAE;;;;;;;;;;;;;;;;;;;;;;;AAKnF","debugId":null}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/components/breakdownPieSection.jsx"],"sourcesContent":["\"use client\"\r\nimport { PieChart, Pie, Cell, Tooltip, ResponsiveContainer } from \"recharts\"\r\n\r\nexport default function BreakdownPieSection({ selectedYear, breakdown }) {\r\n  const COLORS = [\"#4F46E5\", \"#10B981\", \"#F59E0B\", \"#EF4444\", \"#3B82F6\"]\r\n\r\n  if (!selectedYear)\r\n    return <p className=\"text-gray-500 text-center\">Click a year to view breakdown</p>\r\n\r\n  return (\r\n    <div className=\"bg-white shadow rounded-lg p-4 mt-6\">\r\n      <h3 className=\"text-lg font-semibold mb-2\">\r\n        Budget Breakdown ({selectedYear})\r\n      </h3>\r\n\r\n      <div className=\"flex flex-col lg:flex-row gap-8 justify-center mt-6\">\r\n        <PieGroup title=\"Income Breakdown\" data={breakdown.income || {}} colors={COLORS} />\r\n        <PieGroup title=\"Appropriations Breakdown\" data={breakdown.appropriations || {}} colors={COLORS} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction PieGroup({ title, data, colors }) {\r\n  const formatted = Object.entries(data).map(([name, value]) => ({ name, value }))\r\n  const total = formatted.reduce((sum, i) => sum + i.value, 0)\r\n\r\n  // Convert value â†’ percentage\r\n  const toPercent = (v) => ((v / total) * 100).toFixed(2) + \"%\"\r\n\r\n  return (\r\n    <div className=\"w-full lg:w-1/2\">\r\n      <p className=\"font-semibold text-center\">{title}</p>\r\n\r\n      <ResponsiveContainer width=\"100%\" height={360}>\r\n        <PieChart>\r\n          <Pie\r\n            data={formatted}\r\n            dataKey=\"value\"\r\n            nameKey=\"name\"\r\n            outerRadius={110}\r\n            label={({ name, value }) => `${name}: ${toPercent(value)}`}\r\n          >\r\n            {formatted.map((entry, index) => (\r\n              <Cell key={index} fill={colors[index % colors.length]} />\r\n            ))}\r\n          </Pie>\r\n\r\n          <Tooltip\r\n            formatter={(value) => toPercent(value)}\r\n            labelFormatter={(name) => name}\r\n          />\r\n        </PieChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AADA;;;AAGe,SAAS,oBAAoB,EAAE,YAAY,EAAE,SAAS,EAAE;IACrE,MAAM,SAAS;QAAC;QAAW;QAAW;QAAW;QAAW;KAAU;IAEtE,IAAI,CAAC,cACH,qBAAO,wPAAC;QAAE,WAAU;kBAA4B;;;;;;IAElD,qBACE,wPAAC;QAAI,WAAU;;0BACb,wPAAC;gBAAG,WAAU;;oBAA6B;oBACtB;oBAAa;;;;;;;0BAGlC,wPAAC;gBAAI,WAAU;;kCACb,wPAAC;wBAAS,OAAM;wBAAmB,MAAM,UAAU,MAAM,IAAI,CAAC;wBAAG,QAAQ;;;;;;kCACzE,wPAAC;wBAAS,OAAM;wBAA2B,MAAM,UAAU,cAAc,IAAI,CAAC;wBAAG,QAAQ;;;;;;;;;;;;;;;;;;AAIjG;AAEA,SAAS,SAAS,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE;IACvC,MAAM,YAAY,OAAO,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,MAAM,MAAM,GAAK,CAAC;YAAE;YAAM;QAAM,CAAC;IAC9E,MAAM,QAAQ,UAAU,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE;IAE1D,6BAA6B;IAC7B,MAAM,YAAY,CAAC,IAAM,CAAC,AAAC,IAAI,QAAS,GAAG,EAAE,OAAO,CAAC,KAAK;IAE1D,qBACE,wPAAC;QAAI,WAAU;;0BACb,wPAAC;gBAAE,WAAU;0BAA6B;;;;;;0BAE1C,wPAAC,oMAAmB;gBAAC,OAAM;gBAAO,QAAQ;0BACxC,cAAA,wPAAC,0KAAQ;;sCACP,wPAAC,gKAAG;4BACF,MAAM;4BACN,SAAQ;4BACR,SAAQ;4BACR,aAAa;4BACb,OAAO,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,GAAK,GAAG,KAAK,EAAE,EAAE,UAAU,QAAQ;sCAEzD,UAAU,GAAG,CAAC,CAAC,OAAO,sBACrB,wPAAC,sKAAI;oCAAa,MAAM,MAAM,CAAC,QAAQ,OAAO,MAAM,CAAC;mCAA1C;;;;;;;;;;sCAIf,wPAAC,4KAAO;4BACN,WAAW,CAAC,QAAU,UAAU;4BAChC,gBAAgB,CAAC,OAAS;;;;;;;;;;;;;;;;;;;;;;;AAMtC","debugId":null}},
    {"offset": {"line": 628, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/page.jsx"],"sourcesContent":["\"use client\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { supabase } from \"../../../lib/supabaseClient\"\r\n\r\n// Hooks\r\nimport useBudgetData from \"./lib/useBudgetData\"\r\nimport useBreakdownData from \"./lib/useBreakdownData\"\r\nimport ForecastChart from \"./components/forecastChart\"\r\n\r\n// Components\r\nimport BudgetUploader from \"./components/budgetUploader\"\r\nimport SummaryCards from \"./components/summaryCards\"\r\nimport IncomeTrendChart from \"./components/incomeTrendChart\"\r\nimport BreakdownPieSection from \"./components/breakdownPieSection\"\r\n\r\nexport default function TransactionPage() {\r\n  const [session, setSession] = useState(null)\r\n  const [selectedYear, setSelectedYear] = useState(null)\r\n\r\n  // Custom hooks\r\n  const { budgetData, loading, fetchBudgetData } = useBudgetData()\r\n  const { breakdownData, fetchBreakdownData } = useBreakdownData()\r\n\r\n  // Check auth\r\n  useEffect(() => {\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session)\r\n      if (session) {\r\n        fetchBudgetData()\r\n        fetchBreakdownData()\r\n      }\r\n    })\r\n\r\n    const { data: listener } = supabase.auth.onAuthStateChange((_event, session) => {\r\n      setSession(session)\r\n      if (session) {\r\n        fetchBudgetData()\r\n        fetchBreakdownData()\r\n      }\r\n    })\r\n\r\n    return () => listener.subscription.unsubscribe()\r\n  }, [])\r\n\r\n  if (!session) return <div className=\"p-10 text-center\">Please log in first</div>\r\n  if (loading) return <p className=\"p-6\">Loading budget data...</p>\r\n\r\n  const selectedData = breakdownData[selectedYear] || {}\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-8\">\r\n      <h2 className=\"text-2xl font-semibold\">Barangay Budget Dashboard</h2>\r\n\r\n      <BudgetUploader refresh={fetchBudgetData} />\r\n\r\n      <SummaryCards data={budgetData} />\r\n\r\n      <IncomeTrendChart\r\n        data={budgetData}\r\n        onYearClick={setSelectedYear}\r\n      />\r\n\r\n      <BreakdownPieSection\r\n        selectedYear={selectedYear}\r\n        breakdown={selectedData}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA,QAAQ;AACR;AACA;AACA;AAEA,aAAa;AACb;AACA;AACA;AACA;AAbA;;;;;;;;;;;AAee,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2NAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,2NAAQ,EAAC;IAEjD,eAAe;IACf,MAAM,EAAE,UAAU,EAAE,OAAO,EAAE,eAAe,EAAE,GAAG,IAAA,iLAAa;IAC9D,MAAM,EAAE,aAAa,EAAE,kBAAkB,EAAE,GAAG,IAAA,oLAAgB;IAE9D,aAAa;IACb,IAAA,4NAAS,EAAC;QACR,2IAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE;YACpD,WAAW;YACX,IAAI,SAAS;gBACX;gBACA;YACF;QACF;QAEA,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,2IAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,QAAQ;YAClE,WAAW;YACX,IAAI,SAAS;gBACX;gBACA;YACF;QACF;QAEA,OAAO,IAAM,SAAS,YAAY,CAAC,WAAW;IAChD,GAAG,EAAE;IAEL,IAAI,CAAC,SAAS,qBAAO,wPAAC;QAAI,WAAU;kBAAmB;;;;;;IACvD,IAAI,SAAS,qBAAO,wPAAC;QAAE,WAAU;kBAAM;;;;;;IAEvC,MAAM,eAAe,aAAa,CAAC,aAAa,IAAI,CAAC;IAErD,qBACE,wPAAC;QAAI,WAAU;;0BACb,wPAAC;gBAAG,WAAU;0BAAyB;;;;;;0BAEvC,wPAAC,0LAAc;gBAAC,SAAS;;;;;;0BAEzB,wPAAC,wLAAY;gBAAC,MAAM;;;;;;0BAEpB,wPAAC,4LAAgB;gBACf,MAAM;gBACN,aAAa;;;;;;0BAGf,wPAAC,+LAAmB;gBAClB,cAAc;gBACd,WAAW;;;;;;;;;;;;AAInB","debugId":null}}]
}