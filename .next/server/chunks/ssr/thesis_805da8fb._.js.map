{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/components/ui/card.jsx"],"sourcesContent":["export function Card({ children }) {\r\n  return <div className=\"bg-white rounded-xl shadow\">{children}</div>\r\n}\r\n\r\nexport function CardContent({ children, className }) {\r\n  return <div className={className}>{children}</div>\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAO,SAAS,KAAK,EAAE,QAAQ,EAAE;IAC/B,qBAAO,wPAAC;QAAI,WAAU;kBAA8B;;;;;;AACtD;AAEO,SAAS,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE;IACjD,qBAAO,wPAAC;QAAI,WAAW;kBAAY;;;;;;AACrC","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transaction/components/transactionTable.jsx"],"sourcesContent":["\"use client\";\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\n// ‚úÖ Card components\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\n\r\n// ‚úÖ Button\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\n// ‚úÖ Input\r\nimport { Input } from \"@/components/ui/input\";\r\n\r\n// Icons\r\nimport {\r\n  Edit3,\r\n  Trash2,\r\n  Check,\r\n  X,\r\n  Plus,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  DollarSign,\r\n} from \"lucide-react\";\r\n\r\n// Format numbers as Philippine Peso\r\nconst currency = (val) => {\r\n  const amount = val || 0;\r\n  return new Intl.NumberFormat(\"en-PH\", {\r\n    style: \"currency\",\r\n    currency: \"PHP\",\r\n    minimumFractionDigits: 2,\r\n  }).format(amount);\r\n};\r\n\r\nexport default function TransactionTable({\r\n  transactions,\r\n  loading,\r\n  onAddTransaction,\r\n  onEditTransaction,\r\n  onDeleteTransaction,\r\n  setTransactions,\r\n}) {\r\n  const [form, setForm] = useState({\r\n    date: \"\",\r\n    description: \"\",\r\n    deposit: \"\",\r\n    withdrawal: \"\",\r\n  });\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [rowForm, setRowForm] = useState({});\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const calculateBalances = (list) => {\r\n    let runningBalance = 0;\r\n    return list.map((t) => {\r\n      runningBalance += (t.deposit || 0) - (t.withdrawal || 0);\r\n      return { ...t, balance: runningBalance };\r\n    });\r\n  };\r\n\r\n  const handleEditClick = (t) => {\r\n    setEditingId(t.id);\r\n    setRowForm({\r\n      date: t.date,\r\n      description: t.description,\r\n      deposit: t.deposit,\r\n      withdrawal: t.withdrawal,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!form.date || (!form.deposit && !form.withdrawal)) {\r\n      alert(\"Enter a date and at least deposit or withdrawal.\");\r\n      return;\r\n    }\r\n\r\n    const newTransaction = {\r\n      ...form,\r\n      deposit: Number(form.deposit || 0),\r\n      withdrawal: Number(form.withdrawal || 0),\r\n      id: Date.now(),\r\n    };\r\n\r\n    onAddTransaction?.(newTransaction);\r\n    setForm({ date: \"\", description: \"\", deposit: \"\", withdrawal: \"\" });\r\n    setShowForm(false);\r\n  };\r\n\r\n  const handleSave = (id) => {\r\n    if (!rowForm.date || (!rowForm.deposit && !rowForm.withdrawal)) {\r\n      alert(\"Enter a date and at least deposit or withdrawal.\");\r\n      return;\r\n    }\r\n\r\n    const updatedTransaction = {\r\n      ...rowForm,\r\n      deposit: Number(rowForm.deposit || 0),\r\n      withdrawal: Number(rowForm.withdrawal || 0),\r\n    };\r\n\r\n    onEditTransaction(updatedTransaction, id);\r\n    setEditingId(null);\r\n    setRowForm({});\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    if (window.confirm(\"Are you sure you want to delete this transaction?\")) {\r\n      onDeleteTransaction?.(id);\r\n    }\r\n  };\r\n\r\n  const sortedTransactions = [...transactions].sort((a, b) => {\r\n    const dateCompare = new Date(b.date) - new Date(a.date);\r\n    if (dateCompare !== 0) return dateCompare;\r\n    return (b.id ?? 0) - (a.id ?? 0);\r\n  });\r\n\r\n  const totalDeposits = transactions.reduce((sum, t) => sum + (t.deposit || 0), 0);\r\n  const totalWithdrawals = transactions.reduce((sum, t) => sum + (t.withdrawal || 0), 0);\r\n  const currentBalance = totalDeposits - totalWithdrawals;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Summary Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <Card className=\"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200\">\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-green-700\">Total Deposits</p>\r\n                <p className=\"text-2xl font-bold text-green-800\">{currency(totalDeposits)}</p>\r\n              </div>\r\n              <div className=\"bg-green-100 p-3 rounded-full\">\r\n                <TrendingUp className=\"w-6 h-6 text-green-600\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"bg-gradient-to-br from-red-50 to-rose-50 border-red-200\">\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-red-700\">Total Withdrawals</p>\r\n                <p className=\"text-2xl font-bold text-red-800\">{currency(totalWithdrawals)}</p>\r\n              </div>\r\n              <div className=\"bg-red-100 p-3 rounded-full\">\r\n                <TrendingDown className=\"w-6 h-6 text-red-600\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200\">\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-blue-700\">Current Balance</p>\r\n                <p className={`text-2xl font-bold ${currentBalance >= 0 ? 'text-blue-800' : 'text-red-800'}`}>\r\n                  {currency(currentBalance)}\r\n                </p>\r\n              </div>\r\n              <div className=\"bg-blue-100 p-3 rounded-full\">\r\n                <DollarSign className=\"w-6 h-6 text-blue-600\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Main Transaction Table */}\r\n      <Card className=\"shadow-lg\">\r\n        <CardHeader className=\"bg-gradient-to-r from-slate-50 to-gray-50 border-b\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <CardTitle className=\"text-xl font-semibold text-gray-800\">\r\n              Transaction Records\r\n            </CardTitle>\r\n            <Button\r\n              onClick={() => setShowForm(!showForm)}\r\n              className=\"bg-blue-600 hover:bg-blue-700 transition-colors duration-200\"\r\n            >\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              Add Transaction\r\n            </Button>\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"p-6\">\r\n          {/* Add Transaction Form */}\r\n          {showForm && (\r\n            <Card className=\"mb-6 bg-gray-50 border-2 border-dashed border-gray-300\">\r\n              <CardContent className=\"p-4\">\r\n                <form onSubmit={handleSubmit} className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Date</label>\r\n                    <Input\r\n                      type=\"date\"\r\n                      name=\"date\"\r\n                      value={form.date}\r\n                      onChange={handleChange}\r\n                      className=\"border-gray-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\r\n                    <Input\r\n                      type=\"text\"\r\n                      name=\"description\"\r\n                      value={form.description}\r\n                      onChange={handleChange}\r\n                      placeholder=\"Transaction description\"\r\n                      className=\"border-gray-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Deposit</label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      name=\"deposit\"\r\n                      value={form.deposit}\r\n                      onChange={handleChange}\r\n                      placeholder=\"0.00\"\r\n                      step=\"0.01\"\r\n                      min=\"0\"\r\n                      className=\"border-gray-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Withdrawal</label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      name=\"withdrawal\"\r\n                      value={form.withdrawal}\r\n                      onChange={handleChange}\r\n                      placeholder=\"0.00\"\r\n                      step=\"0.01\"\r\n                      min=\"0\"\r\n                      className=\"border-gray-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-end space-x-2\">\r\n                    <Button\r\n                      type=\"submit\"\r\n                      className=\"bg-green-600 hover:bg-green-700 transition-colors duration-200\"\r\n                    >\r\n                      <Check className=\"w-4 h-4 mr-1\" />\r\n                      Save\r\n                    </Button>\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"outline\"\r\n                      onClick={() => setShowForm(false)}\r\n                      className=\"border-gray-300 hover:bg-gray-50\"\r\n                    >\r\n                      <X className=\"w-4 h-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </form>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n              <span className=\"ml-3 text-gray-600\">Loading transactions...</span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-hidden rounded-lg border border-gray-200\">\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                  <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Date\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Description\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Deposit\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Withdrawal\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Balance\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Actions\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {sortedTransactions.map((t, index) => (\r\n                      <tr key={t.id ?? index} className=\"hover:bg-gray-50 transition-colors duration-150\">\r\n                        {editingId === t.id ? (\r\n                          <>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <Input\r\n                                type=\"date\"\r\n                                value={rowForm.date}\r\n                                onChange={(e) =>\r\n                                  setRowForm({ ...rowForm, date: e.target.value })\r\n                                }\r\n                                className=\"w-full text-sm\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-6 py-4\">\r\n                              <Input\r\n                                type=\"text\"\r\n                                value={rowForm.description}\r\n                                onChange={(e) =>\r\n                                  setRowForm({ ...rowForm, description: e.target.value })\r\n                                }\r\n                                className=\"w-full text-sm\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={rowForm.deposit}\r\n                                onChange={(e) =>\r\n                                  setRowForm({ ...rowForm, deposit: e.target.value })\r\n                                }\r\n                                className=\"w-full text-sm text-right\"\r\n                                step=\"0.01\"\r\n                                min=\"0\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={rowForm.withdrawal}\r\n                                onChange={(e) =>\r\n                                  setRowForm({ ...rowForm, withdrawal: e.target.value })\r\n                                }\r\n                                className=\"w-full text-sm text-right\"\r\n                                step=\"0.01\"\r\n                                min=\"0\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-blue-700\">\r\n                              {currency(t.balance)}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                              <div className=\"flex items-center justify-center space-x-2\">\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  onClick={() => handleSave(t.id)}\r\n                                  className=\"bg-green-600 hover:bg-green-700 h-8 w-8 p-0\"\r\n                                >\r\n                                  <Check className=\"w-4 h-4\" />\r\n                                </Button>\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"outline\"\r\n                                  onClick={() => setEditingId(null)}\r\n                                  className=\"h-8 w-8 p-0\"\r\n                                >\r\n                                  <X className=\"w-4 h-4\" />\r\n                                </Button>\r\n                              </div>\r\n                            </td>\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                              {new Date(t.date).toLocaleDateString(\"en-PH\", {\r\n                                month: \"short\",\r\n                                day: \"numeric\",\r\n                                year: \"numeric\",\r\n                              })}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 text-sm text-gray-900\">\r\n                              {t.description || \"-\"}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm\">\r\n                              {t.deposit ? (\r\n                                <span className=\"text-green-600 font-semibold\">\r\n                                  {currency(t.deposit)}\r\n                                </span>\r\n                              ) : (\r\n                                <span className=\"text-gray-400\">-</span>\r\n                              )}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm\">\r\n                              {t.withdrawal ? (\r\n                                <span className=\"text-red-600 font-semibold\">\r\n                                  {currency(t.withdrawal)}\r\n                                </span>\r\n                              ) : (\r\n                                <span className=\"text-gray-400\">-</span>\r\n                              )}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-bold\">\r\n                              <span className={t.balance >= 0 ? \"text-blue-700\" : \"text-red-700\"}>\r\n                                {currency(t.balance)}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                              <div className=\"flex items-center justify-center space-x-2\">\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"outline\"\r\n                                  onClick={() => handleEditClick(t)}\r\n                                  className=\"h-8 w-8 p-0 hover:bg-yellow-50 hover:border-yellow-300\"\r\n                                >\r\n                                  <Edit3 className=\"w-3 h-3 text-yellow-600\" />\r\n                                </Button>\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"outline\"\r\n                                  onClick={() => handleDelete(t.id)}\r\n                                  className=\"h-8 w-8 p-0 hover:bg-red-50 hover:border-red-300\"\r\n                                >\r\n                                  <Trash2 className=\"w-3 h-3 text-red-600\" />\r\n                                </Button>\r\n                              </div>\r\n                            </td>\r\n                          </>\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                    {sortedTransactions.length === 0 && (\r\n                      <tr>\r\n                        <td colSpan=\"6\" className=\"px-6 py-12 text-center text-gray-500\">\r\n                          <div className=\"flex flex-col items-center\">\r\n                            <DollarSign className=\"w-12 h-12 text-gray-300 mb-4\" />\r\n                            <p className=\"text-lg font-medium\">No transactions yet</p>\r\n                            <p className=\"text-sm\">Add your first transaction to get started</p>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1064, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/dashboard/components/useCashflowData.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"../../../../lib/supabaseClient\";\r\n\r\nexport function useCashflowData() {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [chartData, setChartData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchCashflow();\r\n  }, []);\r\n\r\n  const fetchCashflow = async () => {\r\n    setLoading(true);\r\n\r\n    // 1Ô∏è‚É£ Fetch transactions from Supabase\r\n    const { data, error } = await supabase\r\n      .from(\"transactions\")\r\n      .select(\"*\")\r\n      .order(\"date\", { ascending: true});\r\n\r\n    if (error) {\r\n      console.error(\"‚ùå Supabase fetch error:\", error.message);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // 2Ô∏è‚É£ Clean deposit and withdrawal values\r\n    const mapped = (data || [])\r\n      .filter((row) => row.date)\r\n      .map((row) => ({\r\n        ...row,\r\n        deposit: Number(String(row.deposit || \"0\").replace(/[‚Ç±, ]/g, \"\")),\r\n        withdrawal: Number(String(row.withdrawal || \"0\").replace(/[‚Ç±, ]/g, \"\")),\r\n        balance: Number(String(row.balance || \"0\").replace(/[‚Ç±, ]/g, \"\")), // use Supabase balance\r\n      }));\r\n\r\n    // 3Ô∏è‚É£ Save raw transactions for table\r\n    setTransactions(mapped);\r\n\r\n    // 4Ô∏è‚É£ Aggregate chart data per month\r\n    const grouped = {};\r\n\r\n    mapped.forEach((t) => {\r\n      const d = new Date(t.date);\r\n      const monthKey = `${d.toLocaleString(\"default\", { month: \"short\" })} ${d.getFullYear()}`;\r\n\r\n      if (!grouped[monthKey])\r\n        grouped[monthKey] = { month: monthKey, income: 0, expense: 0, balance: 0 };\r\n\r\n      grouped[monthKey].income += t.deposit || 0;\r\n      grouped[monthKey].expense += t.withdrawal || 0;\r\n\r\n      // Take the last transaction's Supabase balance in the month\r\n      grouped[monthKey].balance = t.balance || grouped[monthKey].balance;\r\n    });\r\n\r\n    const monthlyArray = Object.values(grouped)\r\n      .sort((a, b) => new Date(`${a.month}`) - new Date(`${b.month}`))\r\n      .map((g) => ({ ...g, net: g.income - g.expense }));\r\n\r\n    setChartData(monthlyArray);\r\n    setLoading(false);\r\n  };\r\n\r\n  return { transactions, chartData, loading,  refetch: fetchCashflow};\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKO,SAAS;IACd,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,2NAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2NAAQ,EAAC,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2NAAQ,EAAC;IAEvC,IAAA,4NAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,WAAW;QAEX,uCAAuC;QACvC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAQ,CACnC,IAAI,CAAC,gBACL,MAAM,CAAC,KACP,KAAK,CAAC,QAAQ;YAAE,WAAW;QAAI;QAElC,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,2BAA2B,MAAM,OAAO;YACtD,WAAW;YACX;QACF;QAEA,0CAA0C;QAC1C,MAAM,SAAS,CAAC,QAAQ,EAAE,EACvB,MAAM,CAAC,CAAC,MAAQ,IAAI,IAAI,EACxB,GAAG,CAAC,CAAC,MAAQ,CAAC;gBACb,GAAG,GAAG;gBACN,SAAS,OAAO,OAAO,IAAI,OAAO,IAAI,KAAK,OAAO,CAAC,UAAU;gBAC7D,YAAY,OAAO,OAAO,IAAI,UAAU,IAAI,KAAK,OAAO,CAAC,UAAU;gBACnE,SAAS,OAAO,OAAO,IAAI,OAAO,IAAI,KAAK,OAAO,CAAC,UAAU;YAC/D,CAAC;QAEH,sCAAsC;QACtC,gBAAgB;QAEhB,qCAAqC;QACrC,MAAM,UAAU,CAAC;QAEjB,OAAO,OAAO,CAAC,CAAC;YACd,MAAM,IAAI,IAAI,KAAK,EAAE,IAAI;YACzB,MAAM,WAAW,GAAG,EAAE,cAAc,CAAC,WAAW;gBAAE,OAAO;YAAQ,GAAG,CAAC,EAAE,EAAE,WAAW,IAAI;YAExF,IAAI,CAAC,OAAO,CAAC,SAAS,EACpB,OAAO,CAAC,SAAS,GAAG;gBAAE,OAAO;gBAAU,QAAQ;gBAAG,SAAS;gBAAG,SAAS;YAAE;YAE3E,OAAO,CAAC,SAAS,CAAC,MAAM,IAAI,EAAE,OAAO,IAAI;YACzC,OAAO,CAAC,SAAS,CAAC,OAAO,IAAI,EAAE,UAAU,IAAI;YAE7C,4DAA4D;YAC5D,OAAO,CAAC,SAAS,CAAC,OAAO,GAAG,EAAE,OAAO,IAAI,OAAO,CAAC,SAAS,CAAC,OAAO;QACpE;QAEA,MAAM,eAAe,OAAO,MAAM,CAAC,SAChC,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,GAAG,EAAE,KAAK,EAAE,IAAI,IAAI,KAAK,GAAG,EAAE,KAAK,EAAE,GAC7D,GAAG,CAAC,CAAC,IAAM,CAAC;gBAAE,GAAG,CAAC;gBAAE,KAAK,EAAE,MAAM,GAAG,EAAE,OAAO;YAAC,CAAC;QAElD,aAAa;QACb,WAAW;IACb;IAEA,OAAO;QAAE;QAAc;QAAW;QAAU,SAAS;IAAa;AACpE","debugId":null}},
    {"offset": {"line": 1136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transaction/components/transactionModal.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\n\r\nexport default function TransactionModal({ onClose, onSubmit }) {\r\n  const [form, setForm] = useState({\r\n    date: \"\",\r\n    description: \"\",\r\n    deposit: \"\",\r\n    withdrawal: \"\",\r\n  });\r\n\r\n  const updateField = (field, value) => {\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [field]: value,\r\n      ...(field === \"deposit\" ? { withdrawal: \"\" } : {}),\r\n      ...(field === \"withdrawal\" ? { deposit: \"\" } : {}),\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const newTx = {\r\n      date: form.date,\r\n      description: form.description,\r\n      deposit: Number(form.deposit) || 0,\r\n      withdrawal: Number(form.withdrawal) || 0,\r\n    };\r\n\r\n    onSubmit(newTx);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-xl shadow-xl w-full max-w-md p-6 animate-fadeIn\">\r\n\r\n        {/* HEADER */}\r\n        <h2 className=\"text-xl font-semibold mb-4 text-emerald-700\">\r\n          ‚ûï Add New Transaction\r\n        </h2>\r\n\r\n        {/* FORM */}\r\n        <form className=\"space-y-4\" onSubmit={handleSubmit}>\r\n          \r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">Date</label>\r\n            <input\r\n              type=\"date\"\r\n              value={form.date}\r\n              onChange={(e) => updateField(\"date\", e.target.value)}\r\n              required\r\n              className=\"w-full border rounded-lg px-3 py-2\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">Description</label>\r\n            <input\r\n              type=\"text\"\r\n              value={form.description}\r\n              onChange={(e) => updateField(\"description\", e.target.value)}\r\n              required\r\n              className=\"w-full border rounded-lg px-3 py-2\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-1\">Deposit (‚Ç±)</label>\r\n              <input\r\n                type=\"number\"\r\n                value={form.deposit}\r\n                onChange={(e) => updateField(\"deposit\", e.target.value)}\r\n                disabled={!!form.withdrawal}\r\n                className=\"w-full border rounded-lg px-3 py-2\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-1\">Withdrawal (‚Ç±)</label>\r\n              <input\r\n                type=\"number\"\r\n                value={form.withdrawal}\r\n                onChange={(e) => updateField(\"withdrawal\", e.target.value)}\r\n                disabled={!!form.deposit}\r\n                className=\"w-full border rounded-lg px-3 py-2\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* BUTTONS */}\r\n          <div className=\"flex justify-end gap-3 pt-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 rounded-lg border text-slate-600 hover:bg-slate-100\"\r\n            >\r\n              Cancel\r\n            </button>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 rounded-lg bg-emerald-600 text-white font-medium hover:bg-emerald-700 shadow\"\r\n            >\r\n              Save Transaction\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKe,SAAS,iBAAiB,EAAE,OAAO,EAAE,QAAQ,EAAE;IAC5D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2NAAQ,EAAC;QAC/B,MAAM;QACN,aAAa;QACb,SAAS;QACT,YAAY;IACd;IAEA,MAAM,cAAc,CAAC,OAAO;QAC1B,QAAQ,CAAC,OAAS,CAAC;gBACjB,GAAG,IAAI;gBACP,CAAC,MAAM,EAAE;gBACT,GAAI,UAAU,YAAY;oBAAE,YAAY;gBAAG,IAAI,CAAC,CAAC;gBACjD,GAAI,UAAU,eAAe;oBAAE,SAAS;gBAAG,IAAI,CAAC,CAAC;YACnD,CAAC;IACH;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAEhB,MAAM,QAAQ;YACZ,MAAM,KAAK,IAAI;YACf,aAAa,KAAK,WAAW;YAC7B,SAAS,OAAO,KAAK,OAAO,KAAK;YACjC,YAAY,OAAO,KAAK,UAAU,KAAK;QACzC;QAEA,SAAS;QACT;IACF;IAEA,qBACE,wPAAC;QAAI,WAAU;kBACb,cAAA,wPAAC;YAAI,WAAU;;8BAGb,wPAAC;oBAAG,WAAU;8BAA8C;;;;;;8BAK5D,wPAAC;oBAAK,WAAU;oBAAY,UAAU;;sCAEpC,wPAAC;;8CACC,wPAAC;oCAAM,WAAU;8CAAiC;;;;;;8CAClD,wPAAC;oCACC,MAAK;oCACL,OAAO,KAAK,IAAI;oCAChB,UAAU,CAAC,IAAM,YAAY,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACnD,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAId,wPAAC;;8CACC,wPAAC;oCAAM,WAAU;8CAAiC;;;;;;8CAClD,wPAAC;oCACC,MAAK;oCACL,OAAO,KAAK,WAAW;oCACvB,UAAU,CAAC,IAAM,YAAY,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC1D,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAId,wPAAC;4BAAI,WAAU;;8CACb,wPAAC;;sDACC,wPAAC;4CAAM,WAAU;sDAAiC;;;;;;sDAClD,wPAAC;4CACC,MAAK;4CACL,OAAO,KAAK,OAAO;4CACnB,UAAU,CAAC,IAAM,YAAY,WAAW,EAAE,MAAM,CAAC,KAAK;4CACtD,UAAU,CAAC,CAAC,KAAK,UAAU;4CAC3B,WAAU;;;;;;;;;;;;8CAId,wPAAC;;sDACC,wPAAC;4CAAM,WAAU;sDAAiC;;;;;;sDAClD,wPAAC;4CACC,MAAK;4CACL,OAAO,KAAK,UAAU;4CACtB,UAAU,CAAC,IAAM,YAAY,cAAc,EAAE,MAAM,CAAC,KAAK;4CACzD,UAAU,CAAC,CAAC,KAAK,OAAO;4CACxB,WAAU;;;;;;;;;;;;;;;;;;sCAMhB,wPAAC;4BAAI,WAAU;;8CACb,wPAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;8CACX;;;;;;8CAID,wPAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 1359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transaction/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"../../../lib/supabaseClient\";\r\nimport TransactionTable from \"../transaction/components/transactionTable\";\r\nimport { useCashflowData } from \"../dashboard/components/useCashflowData\";\r\nimport TransactionModal from \"../transaction/components/transactionModal\";\r\n\r\n\r\nexport default function TransactionsPage() {\r\n  const { transactions: fetchedTransactions, loading, refetch } = useCashflowData();\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    setTransactions(fetchedTransactions || []);\r\n  }, [fetchedTransactions]);\r\n\r\n  // -----------------------------\r\n  // ADD TRANSACTION\r\n  // -----------------------------\r\n  const handleAddTransaction = async (newTransaction) => {\r\n    try {\r\n      const lastBalance = transactions.length\r\n        ? transactions[transactions.length - 1].balance\r\n        : 0;\r\n\r\n      const newBalance =\r\n        lastBalance +\r\n        (newTransaction.deposit || 0) -\r\n        (newTransaction.withdrawal || 0);\r\n\r\n      const transactionToInsert = { ...newTransaction, balance: newBalance };\r\n\r\n      const { data, error } = await supabase\r\n        .from(\"transactions\")\r\n        .insert([transactionToInsert])\r\n        .select();\r\n\r\n      if (error) throw error;\r\n\r\n      setTransactions((prev) => [...prev, data[0]]);\r\n      refetch();\r\n    } catch (err) {\r\n      console.error(\"Add transaction failed:\", err.message);\r\n      alert(\"Error adding transaction.\");\r\n    }\r\n  };\r\n\r\n  // -----------------------------\r\n  // DELETE TRANSACTION\r\n  // -----------------------------\r\n  const handleDeleteTransaction = async (id) => {\r\n    if (!id) return;\r\n\r\n    const confirmDelete = window.confirm(\"Delete this transaction?\");\r\n    if (!confirmDelete) return;\r\n\r\n    try {\r\n      await supabase.from(\"transactions\").delete().eq(\"id\", id);\r\n\r\n      const updated = transactions.filter((t) => t.id !== id);\r\n\r\n      let runningBalance = 0;\r\n      const recalculated = updated.map((t) => {\r\n        runningBalance += (t.deposit || 0) - (t.withdrawal || 0);\r\n        return { ...t, balance: runningBalance };\r\n      });\r\n\r\n      setTransactions(recalculated);\r\n      refetch();\r\n    } catch (err) {\r\n      console.error(\"Delete failed:\", err.message);\r\n      alert(\"Error deleting transaction.\");\r\n    }\r\n  };\r\n\r\n  // -----------------------------\r\n  // EDIT TRANSACTION\r\n  // -----------------------------\r\n  const handleEditTransaction = async (updatedTransaction, id) => {\r\n    try {\r\n      const index = transactions.findIndex((t) => t.id === id);\r\n      if (index === -1) throw new Error(\"Not found\");\r\n\r\n      const prevBalance = index > 0 ? transactions[index - 1].balance : 0;\r\n\r\n      const newBalance =\r\n        prevBalance +\r\n        (updatedTransaction.deposit || 0) -\r\n        (updatedTransaction.withdrawal || 0);\r\n\r\n      const transactionToUpdate = { ...updatedTransaction, balance: newBalance };\r\n\r\n      const { error } = await supabase\r\n        .from(\"transactions\")\r\n        .update(transactionToUpdate)\r\n        .eq(\"id\", id);\r\n\r\n      if (error) throw error;\r\n\r\n      const updated = [...transactions];\r\n      updated[index] = transactionToUpdate;\r\n\r\n      // Recompute next balances\r\n      let runBal = newBalance;\r\n\r\n      for (let i = index + 1; i < updated.length; i++) {\r\n        const t = updated[i];\r\n        runBal += (t.deposit || 0) - (t.withdrawal || 0);\r\n        updated[i] = { ...t, balance: runBal };\r\n\r\n        await supabase.from(\"transactions\").update({ balance: runBal }).eq(\"id\", t.id);\r\n      }\r\n\r\n      setTransactions(updated);\r\n      refetch();\r\n    } catch (err) {\r\n      console.error(\"Edit failed:\", err.message);\r\n      alert(\"Error updating transaction.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n  <div className=\"min-h-screen bg-gray-50 p-6\">\r\n\r\n    {/* PAGE HEADER */}\r\n    <div className=\"flex flex-col md:flex-row md:items-center md:justify-between mb-6\">\r\n      <div>\r\n        <h1 className=\"text-3xl font-bold text-slate-900\">Transactions</h1>\r\n        <p className=\"text-sm text-slate-500\">\r\n          Manage barangay income & expense records.\r\n        </p>\r\n      </div>\r\n\r\n      {/* ACTION BUTTONS */}\r\n      <div className=\"flex gap-3 mt-4 md:mt-0\">\r\n\r\n        {/* ADD TRANSACTION BUTTON (Opens modal from table) */}\r\n        <button\r\n        onClick={() => setShowAddModal(true)}\r\n        className=\"px-4 py-2 rounded-lg bg-emerald-600 text-white font-medium\r\n                  hover:bg-emerald-700 transition shadow\"\r\n      >\r\n        ‚ûï Add Transaction\r\n      </button>\r\n\r\n\r\n\r\n        {/* REFRESH */}\r\n        <button\r\n          onClick={() => refetch()}\r\n          className=\"px-4 py-2 rounded-lg bg-blue-600 text-white font-medium\r\n                     hover:bg-blue-700 transition shadow\"\r\n        >\r\n          üîÑ Refresh\r\n        </button>\r\n\r\n        {/* PRINT */}\r\n        <button\r\n          onClick={() => window.print()}\r\n          className=\"px-4 py-2 rounded-lg bg-slate-700 text-white font-medium\r\n                     hover:bg-slate-800 transition shadow\"\r\n        >\r\n          üñ®Ô∏è Print\r\n        </button>\r\n\r\n      </div>\r\n    </div>\r\n\r\n    {/* MAIN CARD CONTAINER */}\r\n    <div className=\"bg-white rounded-xl shadow p-6 border border-slate-200\">\r\n\r\n      <TransactionTable\r\n        transactions={transactions}\r\n        loading={loading}\r\n        setTransactions={setTransactions}\r\n        onAddTransaction={handleAddTransaction}\r\n        onDeleteTransaction={handleDeleteTransaction}\r\n        onEditTransaction={handleEditTransaction}\r\n      />\r\n      {showAddModal && (\r\n  <TransactionModal\r\n    onClose={() => setShowAddModal(false)}\r\n    onSubmit={handleAddTransaction}\r\n  />\r\n)}\r\n\r\n    </div>\r\n\r\n  </div>\r\n);\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}