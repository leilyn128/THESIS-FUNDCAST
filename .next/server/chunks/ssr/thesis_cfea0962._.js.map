{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/components/ui/card.jsx"],"sourcesContent":["export function Card({ children }) {\r\n  return <div className=\"bg-white rounded-xl shadow\">{children}</div>\r\n}\r\n\r\nexport function CardContent({ children, className }) {\r\n  return <div className={className}>{children}</div>\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAO,SAAS,KAAK,EAAE,QAAQ,EAAE;IAC/B,qBAAO,wPAAC;QAAI,WAAU;kBAA8B;;;;;;AACtD;AAEO,SAAS,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE;IACjD,qBAAO,wPAAC;QAAI,WAAW;kBAAY;;;;;;AACrC","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/%28protected%29/transactions/page.jsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { supabase } from \"../../../lib/supabaseClient\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  BarChart,\r\n  Bar,\r\n} from \"recharts\";\r\n\r\nexport default function TransactionsPage() {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [chartData, setChartData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [showTable, setShowTable] = useState(false); // <-- NEW state\r\n\r\n\r\n  // âœ… Fetch cashflow table\r\n  const fetchCashflow = async () => {\r\n    setLoading(true);\r\n    const { data, error } = await supabase\r\n      .from(\"transactions\") // ðŸ‘ˆ change this if your table has a different name\r\n      .select(\"*\")\r\n      .order(\"date\", { ascending: true });\r\n\r\n    if (error) {\r\n      console.error(\"âŒ Supabase fetch error:\", error.message);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    console.log(\"âœ… Raw data:\", data);\r\n\r\n    // âœ… Map table columns to unified format\r\n    const mapped = (data || [])\r\n      .filter((row) => row.date) // remove blanks\r\n      .map((row) => ({\r\n        date: row.date,\r\n        description: row.description || \"\",\r\n        deposit: Number(\r\n          String(row.deposit || \"0\").replace(/[â‚±, ]/g, \"\")\r\n        ),\r\n        withdrawal: Number(\r\n          String(row.withdrawal || \"0\").replace(/[â‚±, ]/g, \"\")\r\n        ),\r\n        balance: Number(\r\n          String(row.balance || \"0\").replace(/[â‚±, ]/g, \"\")\r\n        ),\r\n        type:\r\n          row.deposit && Number(String(row.deposit).replace(/[â‚±, ]/g, \"\")) > 0\r\n            ? \"Income\"\r\n            : row.withdrawal &&\r\n              Number(String(row.withdrawal).replace(/[â‚±, ]/g, \"\")) > 0\r\n            ? \"Expense\"\r\n            : \"Other\",\r\n        amount:\r\n          Number(\r\n            String(row.deposit || row.withdrawal || \"0\").replace(/[â‚±, ]/g, \"\")\r\n          ) || 0,\r\n      }));\r\n\r\n    setTransactions(mapped);\r\n    processChartData(mapped);\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCashflow();\r\n  }, []);\r\n\r\n  // âœ… Generate monthly chart data\r\n  const processChartData = (data) => {\r\n    if (!data || !data.length) return setChartData([]);\r\n\r\n    const grouped = {};\r\n\r\n    data.forEach((t) => {\r\n      const d = new Date(t.date);\r\n      if (isNaN(d)) return;\r\n\r\n      const month = d.toLocaleString(\"default\", { month: \"short\" });\r\n      const year = d.getFullYear();\r\n      const key = `${month} ${year}`;\r\n\r\n      if (!grouped[key]) grouped[key] = { month: key, income: 0, expense: 0 };\r\n\r\n      if (t.type === \"Income\") grouped[key].income += t.amount;\r\n      else if (t.type === \"Expense\") grouped[key].expense += t.amount;\r\n    });\r\n\r\n    const formatted = Object.values(grouped).map((g) => ({\r\n      ...g,\r\n      net: g.income - g.expense,\r\n    }));\r\n\r\n    setChartData(formatted);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">ðŸ’° 2025 Cashflow Overview</h1>\r\n\r\n      {/* ðŸ“Š Monthly Chart */}\r\n      {/* ðŸ“Š Monthly Chart */}\r\n      <Card>\r\n        <CardContent className=\"p-4\">\r\n          <h2 className=\"text-lg font-semibold mb-2\">\r\n            Monthly Income vs Expense\r\n          </h2>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <LineChart data={chartData} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"month\" />\r\n              <YAxis />\r\n              <Tooltip formatter={(v) => `â‚±${v.toLocaleString()}`} />\r\n              <Legend />\r\n              <Line type=\"monotone\" dataKey=\"income\" stroke=\"#16a34a\" name=\"Income\" />\r\n              <Line type=\"monotone\" dataKey=\"expense\" stroke=\"#dc2626\" name=\"Expense\" />\r\n              <Line type=\"monotone\" dataKey=\"net\" stroke=\"#2563eb\" name=\"Net\" />\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </CardContent>\r\n      </Card>\r\n\r\n\r\n     {/* ðŸ“‹ Toggle Transaction Table */}\r\n      <div>\r\n        <button\r\n          onClick={() => setShowTable(!showTable)}\r\n          className=\"mb-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\r\n        >\r\n          {showTable ? \"Hide Transactions\" : \"Show Transactions\"}\r\n        </button>\r\n\r\n        {showTable && (\r\n          <Card>\r\n            <CardContent className=\"overflow-x-auto p-4\">\r\n              <h2 className=\"text-lg font-semibold mb-3\">Transaction Records</h2>\r\n              {loading ? (\r\n                <p>Loading...</p>\r\n              ) : (\r\n                <table className=\"min-w-full border border-gray-200\">\r\n                  <thead className=\"bg-gray-100\">\r\n                    <tr>\r\n                      <th className=\"border p-2 text-left\">Date</th>\r\n                      <th className=\"border p-2 text-left\">Description</th>\r\n                      <th className=\"border p-2 text-right\">Deposit (â‚±)</th>\r\n                      <th className=\"border p-2 text-right\">Withdrawal (â‚±)</th>\r\n                      <th className=\"border p-2 text-right\">Balance (â‚±)</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {transactions.map((t, i) => (\r\n                      <tr key={i} className=\"hover:bg-gray-50\">\r\n                        <td className=\"border p-2\">\r\n                          {new Date(t.date).toLocaleDateString(\"en-PH\", {\r\n                            month: \"short\",\r\n                            day: \"numeric\",\r\n                            year: \"numeric\",\r\n                          })}\r\n                        </td>\r\n                        <td className=\"border p-2\">{t.description}</td>\r\n                        <td className=\"border p-2 text-right\">\r\n                          {t.deposit ? t.deposit.toLocaleString() : \"\"}\r\n                        </td>\r\n                        <td className=\"border p-2 text-right text-red-600\">\r\n                          {t.withdrawal ? t.withdrawal.toLocaleString() : \"\"}\r\n                        </td>\r\n                        <td className=\"border p-2 text-right font-semibold text-blue-700\">\r\n                          {t.balance ? t.balance.toLocaleString() : \"\"}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}