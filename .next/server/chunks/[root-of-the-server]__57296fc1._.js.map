{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ALDEGS09/thesis/app/api/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { spawn } from \"child_process\"\r\nimport path from \"path\"\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const body = await request.json()\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const pyPath = path.join(process.cwd(), \"forecast\", \"model.py\")\r\n\r\n      const python = spawn(\"python\", [pyPath], {\r\n        stdio: [\"pipe\", \"pipe\", \"pipe\"]\r\n      })\r\n\r\n      python.stdin.write(JSON.stringify(body))\r\n      python.stdin.end()\r\n\r\n      let output = \"\"\r\n\r\n      python.stdout.on(\"data\", (data) => {\r\n        output += data.toString()\r\n      })\r\n\r\n      python.stderr.on(\"data\", (data) => {\r\n        console.error(\"PYTHON ERROR:\", data.toString())\r\n      })\r\n\r\n      python.on(\"close\", () => {\r\n        try {\r\n          const parsed = JSON.parse(output)\r\n\r\n          // ‚≠ê Ensure ALWAYS an array\r\n          if (!Array.isArray(parsed)) {\r\n            console.error(\"FORECAST NOT ARRAY:\", parsed)\r\n            return resolve(\r\n              NextResponse.json([], { status: 200 })\r\n            )\r\n          }\r\n\r\n          resolve(NextResponse.json(parsed))\r\n        } catch (e) {\r\n          console.error(\"JSON PARSE FAILED:\", e)\r\n          resolve(NextResponse.json([], { status: 200 }))\r\n        }\r\n      })\r\n    })\r\n  } catch (error) {\r\n    console.error(\"API ERROR:\", error)\r\n    return NextResponse.json([], { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,OAAO,IAAI,QAAQ,CAAC,SAAS;YAC3B,MAAM,SAAS,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY;YAEpD,MAAM,SAAS,IAAA,4HAAK,EAAC,UAAU;gBAAC;aAAO,EAAE;gBACvC,OAAO;oBAAC;oBAAQ;oBAAQ;iBAAO;YACjC;YAEA,OAAO,KAAK,CAAC,KAAK,CAAC,KAAK,SAAS,CAAC;YAClC,OAAO,KAAK,CAAC,GAAG;YAEhB,IAAI,SAAS;YAEb,OAAO,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC;gBACxB,UAAU,KAAK,QAAQ;YACzB;YAEA,OAAO,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC;gBACxB,QAAQ,KAAK,CAAC,iBAAiB,KAAK,QAAQ;YAC9C;YAEA,OAAO,EAAE,CAAC,SAAS;gBACjB,IAAI;oBACF,MAAM,SAAS,KAAK,KAAK,CAAC;oBAE1B,2BAA2B;oBAC3B,IAAI,CAAC,MAAM,OAAO,CAAC,SAAS;wBAC1B,QAAQ,KAAK,CAAC,uBAAuB;wBACrC,OAAO,QACL,0JAAY,CAAC,IAAI,CAAC,EAAE,EAAE;4BAAE,QAAQ;wBAAI;oBAExC;oBAEA,QAAQ,0JAAY,CAAC,IAAI,CAAC;gBAC5B,EAAE,OAAO,GAAG;oBACV,QAAQ,KAAK,CAAC,sBAAsB;oBACpC,QAAQ,0JAAY,CAAC,IAAI,CAAC,EAAE,EAAE;wBAAE,QAAQ;oBAAI;gBAC9C;YACF;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,0JAAY,CAAC,IAAI,CAAC,EAAE,EAAE;YAAE,QAAQ;QAAI;IAC7C;AACF","debugId":null}}]
}